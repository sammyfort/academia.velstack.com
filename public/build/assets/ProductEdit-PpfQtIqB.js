import{d as v,r as c,x as h,f as x,q as f,c as k,o as g,a as t,u as o,g as U,w as d,b as n,j as q,i as P,F as S}from"./app-CD1NC3sI.js";import{t as $,a as N}from"./helpers-Z4k3lx1P.js";import{B as V,_ as B}from"./Layout.vue_vue_type_script_setup_true_lang-CGqJlrHK.js";import{_ as C}from"./PageHeader.vue_vue_type_script_setup_true_lang-BxFI-oEe.js";import{_ as E,a as R}from"./FeatureFileUpload.vue_vue_type_script_setup_true_lang-DwVKY18j.js";import{_ as m}from"./InputSelect.vue_vue_type_script_setup_true_lang-DUFeZLbB.js";import{_ as i}from"./InputText.vue_vue_type_script_setup_true_lang-zgJseAKK.js";import{_ as I}from"./GalleryFilesUpload.vue_vue_type_script_setup_true_lang-DGp-eUzP.js";import{_ as F}from"./TextEditor.vue_vue_type_script_setup_true_lang-C0ovVMFT.js";import{d as M}from"./Input.vue_vue_type_script_setup_true_lang-C0m9J3Pu.js";import"./map-pin-CUU8dTyu.js";import"./createLucideIcon-DR-yItwA.js";import"./check-D6CqSZti.js";import"./upload-CJ2CLCSc.js";import"./plus-icBFOGgc.js";const W={class:"w-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},j={class:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm"},A={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},D={class:"col-span-1 rounded-xl border border-gray-200 bg-white p-6 shadow-sm md:col-span-2"},te=v({__name:"ProductEdit",props:{categories:{},regions:{},choices:{},product:{},statuses:{},countries:{}},setup(_){const s=_,b=c(),y=c(),e=h({country_id:"",name:"",status:"",description:"",short_description:"",price:"",categories:[],is_negotiable:"",first_mobile:"",second_mobile:"",whatsapp_mobile:"",video_link:"",website:"",town:"",region_id:"",featured:null,gallery:[],removed_gallery_urls:[]});x(()=>{const r=s.product;e.country_id=r.country_id,e.region_id=r.region_id,e.name=r.name,e.status=r.status,e.categories=(r.categories||[]).map(l=>l.id),e.description=r.description,e.short_description=r.short_description,e.price=r.price,e.is_negotiable=r.is_negotiable?"yes":"no",e.first_mobile=r.first_mobile,e.second_mobile=r.second_mobile,e.town=r.town,e.video_link=r.video_link,e.website=r.website});const u=f(()=>s.product.gallery?Array.from(s.product.gallery).map((l,a)=>({url:l,isOriginal:!0,originalIndex:a})):[]),p=f(()=>Object.keys(e.errors).filter(r=>r.startsWith("gallery.")).map(r=>e.errors[r])),w=()=>{e.put(route("my-products.update",s.product.id),{onSuccess:r=>{r.props.success?$(r.props.message):N(r.props.message)}})};return(r,l)=>(g(),k(S,null,[t(o(U),{title:"Update Product"}),t(B,null,{default:d(()=>[n("div",W,[t(C,{title:"Edit Product",subtitle:"Update Product",icon:o(V)},null,8,["icon"]),t(E,{form:o(e),"featured-preview":s.product.featured,"gallery-items":u.value,"gallery-errors":p.value,"submit-text":"Update Product","processing-text":"Updating Product...",onSubmit:w},{"form-sections":d(()=>[n("div",j,[l[3]||(l[3]=n("h2",{class:"mb-6 text-lg font-semibold text-gray-900"},"Product Information",-1)),n("div",A,[t(m,{label:"Select Country",form:o(e),model:"country_id",options:s.countries,required:"",searchable:""},null,8,["form","options"]),t(m,{label:"Select Region",form:o(e),model:"region_id",options:s.regions,required:"",searchable:""},null,8,["form","options"]),t(i,{form:o(e),label:"Product Name",model:"name",required:""},null,8,["form"]),t(m,{form:o(e),label:"Status",model:"status",options:s.statuses,required:""},null,8,["form","options"]),t(m,{form:o(e),label:"Category",model:"categories",options:s.categories,taggable:"",required:"",searchable:""},null,8,["form","options"]),t(i,{form:o(e),label:"Price",model:"price",type:"number",required:""},null,8,["form"]),t(m,{label:"Is Negotiable?",form:o(e),model:"is_negotiable",options:s.choices,required:""},null,8,["form","options"]),t(i,{form:o(e),label:"First Mobile No",type:"tel",model:"first_mobile",required:""},null,8,["form"]),t(i,{form:o(e),label:"Second Mobile No",type:"tel",model:"second_mobile"},null,8,["form"]),t(i,{form:o(e),label:"WhatsApp No",type:"tel",model:"whatsapp_mobile"},null,8,["form"]),t(i,{form:o(e),label:"Website",model:"website"},null,8,["form"]),t(i,{form:o(e),label:"Town",model:"town",required:""},null,8,["form"]),t(i,{form:o(e),label:"Video Link",model:"video_link"},null,8,["form"]),t(i,{form:o(e),label:"Short Description",model:"short_description",textarea:""},null,8,["form"])])]),n("div",D,[l[4]||(l[4]=n("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Product Description",-1)),t(F,{modelValue:o(e).description,"onUpdate:modelValue":l[0]||(l[0]=a=>o(e).description=a)},null,8,["modelValue"]),o(e).errors.description?(g(),q(M,{key:0,message:o(e).errors.description},null,8,["message"])):P("",!0)])]),"media-section":d(()=>[t(R,{ref_key:"featureUploadRef",ref:y,form:o(e),"featured-preview":s.product.featured,file:o(e).featured,"onUpdate:file":l[1]||(l[1]=a=>o(e).featured=a),"model-name":"featured"},null,8,["form","featured-preview","file"]),t(I,{ref_key:"galleryUploadRef",ref:b,form:o(e),files:o(e).gallery,"onUpdate:files":l[2]||(l[2]=a=>o(e).gallery=a),"gallery-errors":p.value,"gallery-items":u.value},null,8,["form","files","gallery-errors","gallery-items"])]),_:1},8,["form","featured-preview","gallery-items","gallery-errors"])])]),_:1})],64))}});export{te as default};
