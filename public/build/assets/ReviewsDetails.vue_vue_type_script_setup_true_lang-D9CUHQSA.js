import{r as B,a as D,t as E,n as w}from"./helpers-DR95bE27.js";import{c as O}from"./createLucideIcon-CHvHpnEa.js";import{d as C,j as M,o as v,w as y,k as V,u as t,q as U,c as f,n as A,b as e,a as o,e as k,t as u,i as z,F as G,h as L,x as Q,r as I,f as W,l as H,B as T,G as $}from"./app-C8oEjEkN.js";import{_ as J,a as K}from"./ReviewsList.vue_vue_type_script_setup_true_lang-DuXLD_r_.js";import{S as x}from"./VueStarRating.common-DtMG6iol.js";import{a as X,P as Y,_ as P,c as Z}from"./Input.vue_vue_type_script_setup_true_lang-DUZY91Fz.js";import{h as ee,j as te,k as se,l as ae}from"./Layout.vue_vue_type_script_setup_true_lang-BXtNfpbh.js";import{d as le}from"./DialogTitle.vue_vue_type_script_setup_true_lang-ChlZV3dv.js";import{r as ie}from"./api-CLTgNM6N.js";var re=C({__name:"PopoverClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(_){const n=_;X();const c=ee();return(l,g)=>(v(),M(t(Y),{type:l.as==="button"?"button":void 0,as:l.as,"as-child":n.asChild,onClick:g[0]||(g[0]=i=>t(c).onOpenChange(!1))},{default:y(()=>[V(l.$slots,"default")]),_:3},8,["type","as","as-child"]))}}),oe=re;/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=O("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=O("Maximize2Icon",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),ne={class:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2"},de={key:0},ue={key:0,class:"mb-8"},me={class:"relative group cursor-pointer"},pe=["href","data-gallery"],ve=["src"],ce={class:"absolute top-4 right-4 p-2 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-colors duration-200"},ge={key:1,class:"space-y-4"},fe={class:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4"},be=["href","data-gallery"],ye=["src","alt"],_e={class:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 rounded-xl flex items-center justify-center"},we={key:1,class:"text-center py-12"},xe={class:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},he={class:"text-gray-500"},kt=C({__name:"ImagePreview",props:{featuredUrl:{default:null},galleryUrls:{default:()=>[]},title:{default:"Image Gallery"},className:{default:""},forPublic:{type:Boolean}},setup(_){const n=_,c=B(),l=B(),g=U(()=>{const m=[];return n.featuredUrl&&m.push({url:n.featuredUrl,isFeatured:!0}),n.galleryUrls&&m.push(...n.galleryUrls.map(p=>({url:p,isFeatured:!1}))),m}),i=U(()=>g.value.length>0),s=U(()=>n.galleryUrls&&n.galleryUrls.length>0);return(m,p)=>(v(),f("div",{class:A(["bg-white rounded-2xl shadow-xl border border-gray-100 p-6",m.className])},[e("h3",ne,[o(t(F),{class:"w-5 h-5 text-primary"}),k(" "+u(m.title),1)]),i.value?(v(),f("div",de,[m.featuredUrl?(v(),f("div",ue,[e("div",me,[e("a",{href:m.featuredUrl,class:"glightbox cursor-pointer","data-gallery":`gallery-${t(c)}`},[e("img",{src:m.featuredUrl,alt:"Featured Image",class:"w-full h-80 object-contain bg-gray-50 rounded-2xl shadow-lg transition-transform duration-300 group-hover:scale-[1.02]"},null,8,ve),p[0]||(p[0]=e("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300 rounded-2xl"},null,-1)),p[1]||(p[1]=e("div",{class:"absolute top-4 left-4"},[e("span",{class:"bg-gradient-to-r from-yellow-400 to-primary text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg"}," Featured ")],-1)),e("button",ce,[o(t(N),{class:"w-4 h-4"})])],8,pe)])])):z("",!0),s.value?(v(),f("div",ge,[p[2]||(p[2]=e("h4",{class:"text-lg font-semibold text-gray-800"},"Additional Photos",-1)),e("div",fe,[(v(!0),f(G,null,L(m.galleryUrls,(r,a)=>(v(),f("div",{key:a,class:"relative group cursor-pointer"},[e("a",{href:r,class:"glightbox cursor-pointer","data-gallery":`gallery-${t(l)}`},[e("img",{src:r,alt:`Gallery Image ${a+1}`,class:"w-full h-32 object-contain bg-gray-50 rounded-xl shadow-md transition-all duration-300 group-hover:shadow-xl group-hover:scale-105"},null,8,ye),e("div",_e,[o(t(N),{class:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"})])],8,be)]))),128))])])):z("",!0)])):(v(),f("div",we,[e("div",xe,[o(t(F),{class:"w-8 h-8 text-gray-400"})]),p[3]||(p[3]=e("h4",{class:"text-lg font-medium text-gray-600 mb-2"},"No Images Available",-1)),e("p",he,u(m.forPublic?"Owner has no uploads.":"Upload photos to showcase this location."),1)]))],2))}}),$e={class:"flex flex-wrap items-center border-b py-1.5 text-sm font-medium text-fade"},ke={class:"w-1/2 flex items-center"},Ce={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ue={class:"w-1/2 flex items-center"},ze={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Pe={class:"w-1/2 flex items-center"},Ie={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Re={class:"w-1/2 flex items-center"},Se={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},qe={class:"w-1/2 flex items-center"},je={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Be={class:"w-1/2 flex items-center"},Fe={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ne={class:"pt-3 flex justify-between"},Oe=C({__name:"RatePopover",props:{ratable:{},ratable_type:{},carouselPlugin:{}},emits:["popoverOpen","rated"],setup(_,{emit:n}){const c=_,l=Q({overall:0,customer_service:0,quality:0,price:0,communication:0,speed:0,review:"",ratable_id:c.ratable.id,ratable_type:c.ratable_type}),g=I(null),i=I(null),s=n,m=async()=>{await ie(l,c.ratable.id,r=>{var a,d;r.props.message&&(E(r.props.message),s("rated",r.props.data.ratable.total_average_rating)),(d=(a=i==null?void 0:i.value)==null?void 0:a.$el)==null||d.click()},null,r=>{for(const a in r){D(r[a]);break}})};W(()=>{var r,a,d,R,S,q,j;if(g.value=(r=c.ratable.reviews)!=null&&r.length?c.ratable.reviews[0]:null,g.value){const h=g.value.ratings;l.review=g.value.review,l.overall=((a=h.find(b=>b.key==="overall"))==null?void 0:a.value)??0,l.customer_service=((d=h.find(b=>b.key==="customer_service"))==null?void 0:d.value)??0,l.quality=((R=h.find(b=>b.key==="quality"))==null?void 0:R.value)??0,l.price=((S=h.find(b=>b.key==="price"))==null?void 0:S.value)??0,l.communication=((q=h.find(b=>b.key==="communication"))==null?void 0:q.value)??0,l.speed=((j=h.find(b=>b.key==="speed"))==null?void 0:j.value)??0}});const p=r=>{s("popoverOpen",r)};return(r,a)=>(v(),f("div",null,[o(t(te),{"onUpdate:open":p},{default:y(()=>[o(t(se),null,{default:y(()=>[V(r.$slots,"default")]),_:3}),o(t(ae),{class:"w-[20rem]"},{default:y(()=>[e("form",{onSubmit:H(m,["prevent"]),class:"grid grid-cols-1"},[e("div",$e,[a[6]||(a[6]=e("div",{class:"w-1/2"},"Overall",-1)),e("div",ke,[o(t(x),{rating:t(l).overall,"onUpdate:rating":a[0]||(a[0]=d=>t(l).overall=d),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",Ce,[a[7]||(a[7]=e("div",{class:"w-1/2"},"Customer Service",-1)),e("div",Ue,[o(t(x),{rating:t(l).customer_service,"onUpdate:rating":a[1]||(a[1]=d=>t(l).customer_service=d),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",ze,[a[8]||(a[8]=e("div",{class:"w-1/2"},"Quality",-1)),e("div",Pe,[o(t(x),{rating:t(l).quality,"onUpdate:rating":a[2]||(a[2]=d=>t(l).quality=d),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",Ie,[a[9]||(a[9]=e("div",{class:"w-1/2"},"Price",-1)),e("div",Re,[o(t(x),{rating:t(l).price,"onUpdate:rating":a[3]||(a[3]=d=>t(l).price=d),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",Se,[a[10]||(a[10]=e("div",{class:"w-1/2"},"Communication",-1)),e("div",qe,[o(t(x),{rating:t(l).communication,"onUpdate:rating":a[4]||(a[4]=d=>t(l).communication=d),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",je,[a[11]||(a[11]=e("div",{class:"w-1/2"},"Speed",-1)),e("div",Be,[o(t(x),{rating:t(l).speed,"onUpdate:rating":a[5]||(a[5]=d=>t(l).speed=d),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",Fe,[o(le,{textarea:"","container-class":"w-full",label:"Review",required:"",form:t(l),model:"review"},null,8,["form"])]),e("div",Ne,[o(t(oe),{"as-child":"",ref_key:"closeBtn",ref:i},{default:y(()=>[o(t(P),{type:"button",size:"sm",variant:"secondary"},{default:y(()=>a[12]||(a[12]=[k("Close")])),_:1,__:[12]})]),_:1},512),o(t(P),{type:"submit",size:"sm",processing:t(l).processing},{default:y(()=>a[13]||(a[13]=[k("Submit Review")])),_:1,__:[13]},8,["processing"])])],32)]),_:1})]),_:3})]))}}),Me={class:"flex items-center"},Ve={key:0,class:"ms-auto md:block hidden"},Ae={key:1,class:"ms-auto md:hidden"},De={class:"my-5 flex flex-col items-start gap-4"},Ee={class:"flex items-start gap-2 lg:gap-4"},Ge={class:"text-5xl"},Le={class:""},Qe={class:"w-full"},We={class:"flex flex-wrap"},He={class:"w-full md:w-1/2"},Te={class:"flex flex-col gap-1 text-sm"},Je={class:"flex gap-3"},Ke={class:"flex gap-3"},Xe={class:"flex gap-3"},Ye={class:"flex gap-3"},Ze={class:"flex gap-3"},et={class:"flex gap-3"},tt={class:"w-full md:w-1/2 mt-7 md:mt-0"},st={class:"flex flex-col gap-1 text-sm"},at={class:"flex items-center gap-4"},lt={class:"flex bg-gray-200 w-[150px]"},it={class:"flex items-center gap-4"},rt={class:"flex bg-gray-200 w-[150px]"},ot={class:"flex items-center gap-4"},nt={class:"flex bg-gray-200 w-[150px]"},dt={class:"flex items-center gap-4"},ut={class:"flex bg-gray-200 w-[150px]"},mt={class:"flex items-center gap-4"},pt={class:"flex bg-gray-200 w-[150px]"},vt=C({__name:"ReviewsInsight",props:{ratable:{},ratings:{},distributions:{},class:{},ratable_type:{}},setup(_){const n=T(),c=U(()=>n.props.auth.user),l=_,g=I(l.ratable.total_average_rating);return(i,s)=>{var m,p;return v(),f("div",{class:A(t(Z)("p-4 border-t text-fade",l.class))},[e("div",Me,[s[2]||(s[2]=e("div",{class:"font-medium text-lg"},"Reviews",-1)),((m=c.value)==null?void 0:m.id)!==i.ratable.user_id?(v(),f("div",Ve,[o(Oe,{ratable:i.ratable,ratable_type:i.ratable_type,onRated:s[0]||(s[0]=r=>{g.value=r})},{default:y(()=>[o(t(P),{size:"sm"},{default:y(()=>{var r;return[k(u((r=l.ratable.reviews)!=null&&r.length?"Update review":"Write review"),1)]}),_:1})]),_:1},8,["ratable","ratable_type"])])):z("",!0),((p=c.value)==null?void 0:p.id)!=i.ratable.user_id?(v(),f("div",Ae,[o(J,{ratable:i.ratable,ratable_type:i.ratable_type,onRated:s[1]||(s[1]=r=>{g.value=r})},{default:y(()=>[o(t(P),{size:"sm"},{default:y(()=>{var r;return[k(u((r=l.ratable.reviews)!=null&&r.length?"Update review":"Write review"),1)]}),_:1})]),_:1},8,["ratable","ratable_type"])])):z("",!0)]),e("div",De,[e("div",Ee,[e("div",Ge,u(t(w)(i.ratable.total_average_rating,1)),1),(v(),M(t(x),{"star-size":37,"show-rating":!1,rating:g.value,"read-only":"","active-color":"#009689",padding:3,class:"md:w-1/3 w-full",key:`rating-card-${i.ratable.id}`,increment:.01},null,8,["rating"]))]),e("div",Le," ("+u(i.ratable.reviews_count)+" total reviews) ",1),e("div",Qe,[s[16]||(s[16]=e("div",{class:"text-xl mb-3 font-medium text-secondary"},"Insights",-1)),e("div",We,[e("div",He,[s[9]||(s[9]=e("div",{class:"font-medium mb-2"},"Ratings By Category",-1)),e("div",Te,[e("div",Je,[e("div",null,u(t(w)(i.ratings.overall,1)),1),s[3]||(s[3]=e("div",null,"Overall",-1))]),e("div",Ke,[e("div",null,u(t(w)(i.ratings.customer_service,1)),1),s[4]||(s[4]=e("div",null,"Customer Service",-1))]),e("div",Xe,[e("div",null,u(t(w)(i.ratings.quality,1)),1),s[5]||(s[5]=e("div",null,"Quality",-1))]),e("div",Ye,[e("div",null,u(t(w)(i.ratings.price,1)),1),s[6]||(s[6]=e("div",null,"Price",-1))]),e("div",Ze,[e("div",null,u(t(w)(i.ratings.communication,1)),1),s[7]||(s[7]=e("div",null,"Communication",-1))]),e("div",et,[e("div",null,u(t(w)(i.ratings.speed,1)),1),s[8]||(s[8]=e("div",null,"Speed",-1))])])]),e("div",tt,[s[15]||(s[15]=e("div",{class:"font-medium mb-2"},"Ratings Distribution",-1)),e("div",st,[e("div",at,[s[10]||(s[10]=e("div",{class:"w-[50px]"},"5 stars",-1)),e("div",lt,[e("div",{class:"bg-gray-400 h-2",style:$({width:`${i.distributions[5]}%`})},null,4)]),e("div",null,u(i.distributions[5])+"%",1)]),e("div",it,[s[11]||(s[11]=e("div",{class:"w-[50px]"},"4 stars",-1)),e("div",rt,[e("div",{class:"bg-gray-400 h-2",style:$({width:`${i.distributions[4]}%`})},null,4)]),e("div",null,u(i.distributions[4])+"%",1)]),e("div",ot,[s[12]||(s[12]=e("div",{class:"w-[50px]"},"3 stars",-1)),e("div",nt,[e("div",{class:"bg-gray-400 h-2",style:$({width:`${i.distributions[3]}%`})},null,4)]),e("div",null,u(i.distributions[3])+"%",1)]),e("div",dt,[s[13]||(s[13]=e("div",{class:"w-[50px]"},"2 stars",-1)),e("div",ut,[e("div",{class:"bg-gray-400 h-2",style:$({width:`${i.distributions[2]}%`})},null,4)]),e("div",null,u(i.distributions[2])+"%",1)]),e("div",mt,[s[14]||(s[14]=e("div",{class:"w-[50px]"},"1 star",-1)),e("div",pt,[e("div",{class:"bg-gray-400 h-2",style:$({width:`${i.distributions[1]}%`})},null,4)]),e("div",null,u(i.distributions[1])+"%",1)])])])])])]),s[17]||(s[17]=e("div",{class:"w-full flex flex-col gap-3 mt-3"},null,-1))],2)}}}),ct={class:"p-4"},Ct=C({__name:"ReviewsDetails",props:{ratable:{},ratings:{},distributions:{},reviews:{},ratable_type:{}},setup(_){return(n,c)=>(v(),f("div",null,[o(vt,{ratable:n.ratable,ratings:n.ratings,distributions:n.distributions,ratable_type:n.ratable_type},null,8,["ratable","ratings","distributions","ratable_type"]),e("div",ct,[o(K,{ratable:n.ratable,reviews:n.reviews},null,8,["ratable","reviews"])])]))}});export{kt as _,Ct as a};
