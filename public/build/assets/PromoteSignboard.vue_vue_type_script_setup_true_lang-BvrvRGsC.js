import{_ as x}from"./InputSelect.vue_vue_type_script_setup_true_lang-D6l0ygoq.js";import{d as v,r as b,x as w,f as h,c as i,o as a,b as s,a as m,e as p,u as l,n as _,t as r,N as k,h as f,F as P,i as S}from"./app-Bt0bSdJ2.js";import{a as N}from"./helpers-CJVF3whO.js";import{c as j}from"./createLucideIcon-DHIHATuF.js";import{L as C}from"./Input.vue_vue_type_script_setup_true_lang-Bp_7bBrn.js";import{R as V}from"./rocket-DqGg_TU5.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=j("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),D={class:"mb-6 rounded-2xl border border-gray-100 bg-white p-6 shadow-xl"},$={class:"mb-4 flex items-center gap-2 text-xl font-bold text-gray-900"},E={class:"mb-6"},F={class:"mb-3 flex items-center justify-between"},L={class:"mb-3 h-2 w-full rounded-full bg-gray-200"},T={class:"mb-3 h-2 w-full rounded-full bg-gray-200"},B={class:"space-y-2 text-sm"},R={class:"flex justify-between"},U={class:"font-semibold"},I={class:"flex justify-between"},q={class:"font-semibold"},M={key:0,class:"flex justify-between"},A={class:"font-semibold text-orange-600"},G={class:"mt-6 mb-4 border-t border-gray-100 pt-4"},H={class:"mb-3 flex items-center justify-between"},J={key:0,class:"space-y-2"},K={class:"text-gray-600"},O={class:"font-semibold text-primary"},Q={key:1,class:"relative"},W=["disabled"],X={key:0,class:"flex items-center gap-2"},Y={key:1,class:"flex items-center gap-2"},as=v({__name:"PromoteSignboard",props:{signboard:{},plans:{}},setup(y){const e=y,u=b(0),c=b(!1),d=w({plan_id:"",signboard_id:e.signboard.id}),g=()=>{d.post(route("payments.signboard-subscription"),{replace:!0,onSuccess:o=>{const t=o.props.data.authorization_url;t?window.location=t:N("Payment initialization failed, pleased reload the page and try again")}})};return h(()=>{const o=e.signboard.active_subscription;o&&o.total_days>0&&o.days_left>0&&(u.value=100*o.days_left/o.total_days),console.log(o)}),(o,t)=>(a(),i("div",D,[s("h3",$,[m(l(z),{class:"h-5 w-5 text-primary"}),t[1]||(t[1]=p(" Promote Signboard "))]),s("div",E,[s("div",F,[t[2]||(t[2]=s("span",{class:"font-medium text-gray-600"},"Current Status",-1)),s("span",{class:_(["rounded-full px-3 py-1 text-sm font-medium",e.signboard.active_subscription?"bg-green-600 text-white":"bg-red-600 text-white"])},r(e.signboard.active_subscription?"Promoted":"Not Promoted"),3)]),s("div",L,[s("div",{class:_(["h-2 rounded-full bg-primary transition-all duration-300",[`w-${u.value-45}%`]])},null,2)]),s("div",T,[s("div",{class:"h-2 rounded-full bg-primary transition-all duration-300",style:k([e.signboard.views_count,"%"])},null,4)]),s("div",B,[s("div",R,[t[3]||(t[3]=s("span",{class:"text-gray-600"},"Reviews",-1)),s("span",U,r(e.signboard.reviews_count||0),1)]),s("div",I,[t[4]||(t[4]=s("span",{class:"text-gray-600"},"Total Views",-1)),s("span",q,r(e.signboard.views_count||0),1)]),e.signboard.active_subscription?(a(),i("div",M,[t[5]||(t[5]=s("span",{class:"text-gray-600"},"Expires",-1)),s("span",A,r(new Date(e.signboard.active_subscription.ends_at).toDateString()),1)])):f("",!0)])]),s("div",G,[s("div",H,[t[6]||(t[6]=s("h4",{class:"font-semibold text-gray-900"},"Promote Now",-1)),s("button",{onClick:t[0]||(t[0]=n=>c.value=!c.value),class:"text-sm font-medium text-primary transition-colors hover:text-primary/80"},r(c.value?"Select Plan":"View Plans"),1)]),c.value?(a(),i("div",J,[(a(!0),i(P,null,S(e.plans.slice(0,3),n=>(a(),i("div",{key:n.id,class:"flex items-center justify-between text-sm"},[s("span",K,r(n.number_of_days)+" Days",1),s("span",O,r(n.price),1)]))),128))])):(a(),i("div",Q,[m(x,{label:"Select Plan",form:l(d),model:"plan_id",options:e.plans.map(n=>({label:`${n.number_of_days} Days - â‚µ${n.price}`,value:n.id})),required:"",searchable:""},null,8,["form","options"])])),l(d).plan_id?(a(),i("button",{key:2,onClick:g,disabled:l(d).processing,class:"mt-4 flex w-full items-center justify-center gap-2 rounded-xl bg-primary px-4 py-3 font-medium text-white transition-all duration-200 hover:scale-105 disabled:cursor-not-allowed disabled:opacity-50"},[l(d).processing?(a(),i("span",X,[m(l(C),{class:"h-4 w-4 animate-spin"}),t[7]||(t[7]=p("Processing..."))])):(a(),i("span",Y,[m(l(V),{class:"h-4 w-4"}),p(" "+r(e.signboard.active_subscription>1?"Extend Promotion":"Promote Now"),1)]))],8,W)):f("",!0)])]))}});export{as as _};
