import{_ as I,a as L}from"./CardContent.vue_vue_type_script_setup_true_lang-BejB2bV-.js";import{_ as M}from"./CardHeader.vue_vue_type_script_setup_true_lang-Cxs8uiwB.js";import{_ as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-CGA33nxh.js";import{h as T,a as W,b as G,c as H,j as K,k as X,l as Y}from"./Layout.vue_vue_type_script_setup_true_lang-hhrSENzq.js";import{S as p}from"./VueStarRating.common-4L2RY1Ja.js";import{d as x,j as z,o as _,w as d,k as j,u as e,y as Z,c as C,F as ss,h as es,a as r,e as w,t as c,b as s,x as D,r as O,f as F,l as N,B as ts,q as is,n as as,i as B,J as P}from"./app-BY5kmqxs.js";import{a as V,t as A,n as y}from"./helpers-D0dytOI8.js";import{a as rs,P as ls,_ as R,c as ns}from"./Input.vue_vue_type_script_setup_true_lang-cGZXPzZh.js";import{j as os,_ as E}from"./InputText.vue_vue_type_script_setup_true_lang-CY4l3jJH.js";import{r as Q}from"./api-DRucsNsE.js";import{_ as ds,a as us,d as ms,b as fs,c as vs,e as cs,f as ps}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-GY-g2lUe.js";var gs=x({__name:"PopoverClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(b){const v=b;rs();const m=T();return(i,f)=>(_(),z(e(ls),{type:i.as==="button"?"button":void 0,as:i.as,"as-child":v.asChild,onClick:f[0]||(f[0]=n=>e(m).onOpenChange(!1))},{default:d(()=>[j(i.$slots,"default")]),_:3},8,["type","as","as-child"]))}}),_s=gs;const bs=x({__name:"DialogClose",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]}},setup(b){const v=b;return(m,i)=>(_(),z(e(os),Z({"data-slot":"dialog-close"},v),{default:d(()=>[j(m.$slots,"default")]),_:3},16))}}),ws={class:"w-full text-sm"},ys={class:"text-fade mt-3 flex w-full items-center"},xs={class:"text-xs"},$s={class:"ms-auto"},ks=x({__name:"ReviewsList",props:{signboard:{},reviews:{}},setup(b){return(v,m)=>(_(!0),C(ss,null,es(v.reviews,i=>(_(),z(e(L),{key:`review-${i.id}`,class:"gap-4 shadow-none"},{default:d(()=>[r(e(M),{class:"flex items-center"},{default:d(()=>[r(e(J),{class:"text-fade"},{default:d(()=>[w(c(i.user.fullname),1)]),_:2},1024),r(e(W),{class:"h-12 w-12 lg:ms-auto"},{default:d(()=>{var f;return[r(e(G),{src:((f=i.user.avatar)==null?void 0:f.original_url)??""},null,8,["src"]),r(e(H),null,{default:d(()=>[w(c(i.user.initials),1)]),_:2},1024)]}),_:2},1024)]),_:2},1024),r(e(I),null,{default:d(()=>[s("div",ws,c(i.review),1),s("div",ys,[s("div",xs,c(i.created_at_str),1),s("div",$s,[(_(),z(e(p),{"star-size":15,"show-rating":!1,rating:i.average_rating,"read-only":"","active-color":"#009689",padding:3,class:"w-full md:w-1/3",key:`rating-card-${v.signboard.id}`,increment:.01},null,8,["rating"]))])])]),_:2},1024)]),_:2},1024))),128))}}),Cs={class:"flex flex-wrap items-center border-b py-1.5 text-sm font-medium text-fade"},zs={class:"w-1/2 flex items-center"},Rs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},hs={class:"w-1/2 flex items-center"},Ss={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},qs={class:"w-1/2 flex items-center"},Us={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ps={class:"w-1/2 flex items-center"},Os={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},js={class:"w-1/2 flex items-center"},Bs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ds={class:"w-1/2 flex items-center"},Fs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ns={class:"pt-3 flex justify-between"},Vs=x({__name:"RatePopover",props:{ratable:{},ratable_type:{},carouselPlugin:{}},emits:["popoverOpen","rated"],setup(b,{emit:v}){const m=b,i=D({overall:0,customer_service:0,quality:0,price:0,communication:0,speed:0,review:"",ratable_id:m.ratable.id,ratable_type:m.ratable_type}),f=O(null),n=O(null),a=v,$=async()=>{await Q(i,m.ratable.id,o=>{var t,l;o.props.message&&(A(o.props.message),a("rated",o.props.data.ratable.total_average_rating)),(l=(t=n==null?void 0:n.value)==null?void 0:t.$el)==null||l.click()},null,o=>{for(const t in o){V(o[t]);break}})};F(()=>{var o,t,l,h,S,q,U;if(f.value=(o=m.ratable.reviews)!=null&&o.length?m.ratable.reviews[0]:null,f.value){const g=f.value.ratings;i.review=f.value.review,i.overall=((t=g.find(u=>u.key==="overall"))==null?void 0:t.value)??0,i.customer_service=((l=g.find(u=>u.key==="customer_service"))==null?void 0:l.value)??0,i.quality=((h=g.find(u=>u.key==="quality"))==null?void 0:h.value)??0,i.price=((S=g.find(u=>u.key==="price"))==null?void 0:S.value)??0,i.communication=((q=g.find(u=>u.key==="communication"))==null?void 0:q.value)??0,i.speed=((U=g.find(u=>u.key==="speed"))==null?void 0:U.value)??0}});const k=o=>{a("popoverOpen",o)};return(o,t)=>(_(),C("div",null,[r(e(K),{"onUpdate:open":k},{default:d(()=>[r(e(X),null,{default:d(()=>[j(o.$slots,"default")]),_:3}),r(e(Y),{class:"w-[20rem]"},{default:d(()=>[s("form",{onSubmit:N($,["prevent"]),class:"grid grid-cols-1"},[s("div",Cs,[t[6]||(t[6]=s("div",{class:"w-1/2"},"Overall",-1)),s("div",zs,[r(e(p),{rating:e(i).overall,"onUpdate:rating":t[0]||(t[0]=l=>e(i).overall=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Rs,[t[7]||(t[7]=s("div",{class:"w-1/2"},"Customer Service",-1)),s("div",hs,[r(e(p),{rating:e(i).customer_service,"onUpdate:rating":t[1]||(t[1]=l=>e(i).customer_service=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Ss,[t[8]||(t[8]=s("div",{class:"w-1/2"},"Quality",-1)),s("div",qs,[r(e(p),{rating:e(i).quality,"onUpdate:rating":t[2]||(t[2]=l=>e(i).quality=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Us,[t[9]||(t[9]=s("div",{class:"w-1/2"},"Price",-1)),s("div",Ps,[r(e(p),{rating:e(i).price,"onUpdate:rating":t[3]||(t[3]=l=>e(i).price=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Os,[t[10]||(t[10]=s("div",{class:"w-1/2"},"Communication",-1)),s("div",js,[r(e(p),{rating:e(i).communication,"onUpdate:rating":t[4]||(t[4]=l=>e(i).communication=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Bs,[t[11]||(t[11]=s("div",{class:"w-1/2"},"Speed",-1)),s("div",Ds,[r(e(p),{rating:e(i).speed,"onUpdate:rating":t[5]||(t[5]=l=>e(i).speed=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Fs,[r(E,{textarea:"","container-class":"w-full",label:"Review",required:"",form:e(i),model:"review"},null,8,["form"])]),s("div",Ns,[r(e(_s),{"as-child":"",ref_key:"closeBtn",ref:n},{default:d(()=>[r(e(R),{type:"button",size:"sm",variant:"secondary"},{default:d(()=>t[12]||(t[12]=[w("Close")])),_:1,__:[12]})]),_:1},512),r(e(R),{type:"submit",size:"sm",processing:e(i).processing},{default:d(()=>t[13]||(t[13]=[w("Submit Review")])),_:1,__:[13]},8,["processing"])])],32)]),_:1})]),_:3})]))}}),As={class:"flex flex-wrap items-center border-b py-1.5 text-sm font-medium text-fade"},Es={class:"w-1/2 flex items-center"},Qs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Is={class:"w-1/2 flex items-center"},Ls={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ms={class:"w-1/2 flex items-center"},Js={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ts={class:"w-1/2 flex items-center"},Ws={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Gs={class:"w-1/2 flex items-center"},Hs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ks={class:"w-1/2 flex items-center"},Xs={class:"flex items-center py-1.5 text-sm font-medium text-fade"},Ys={class:"flex gap-3 justify-between w-full"},Zs=x({__name:"RateDialog",props:{ratable:{},ratable_type:{},carouselPlugin:{}},emits:["popoverOpen","rated"],setup(b,{emit:v}){const m=b,i=D({overall:0,customer_service:0,quality:0,price:0,communication:0,speed:0,review:"",ratable_id:m.ratable.id,ratable_type:m.ratable_type}),f=O(null),n=O(null),a=v,$=async()=>{await Q(i,m.ratable.id,o=>{var t,l;o.props.message&&(A(o.props.message),a("rated",o.props.data.ratable.total_average_rating)),(l=(t=n==null?void 0:n.value)==null?void 0:t.$el)==null||l.click()},null,o=>{for(const t in o){V(o[t]);break}})};F(()=>{var o,t,l,h,S,q,U;if(f.value=(o=m.ratable.reviews)!=null&&o.length?m.ratable.reviews[0]:null,f.value){const g=f.value.ratings;i.review=f.value.review,i.overall=((t=g.find(u=>u.key==="overall"))==null?void 0:t.value)??0,i.customer_service=((l=g.find(u=>u.key==="customer_service"))==null?void 0:l.value)??0,i.quality=((h=g.find(u=>u.key==="quality"))==null?void 0:h.value)??0,i.price=((S=g.find(u=>u.key==="price"))==null?void 0:S.value)??0,i.communication=((q=g.find(u=>u.key==="communication"))==null?void 0:q.value)??0,i.speed=((U=g.find(u=>u.key==="speed"))==null?void 0:U.value)??0}});const k=o=>{a("popoverOpen",o)};return(o,t)=>(_(),z(e(ps),{"onUpdate:open":k},{default:d(()=>[r(e(ds),null,{default:d(()=>[j(o.$slots,"default")]),_:3}),r(e(us),null,{default:d(()=>[r(e(ms)),r(e(fs),null,{default:d(()=>[r(e(vs),null,{default:d(()=>t[6]||(t[6]=[w("Write Review")])),_:1,__:[6]})]),_:1}),s("div",null,[s("form",{onSubmit:N($,["prevent"]),class:"grid grid-cols-1",id:"form"},[s("div",As,[t[7]||(t[7]=s("div",{class:"w-1/2"},"Overall",-1)),s("div",Es,[r(e(p),{rating:e(i).overall,"onUpdate:rating":t[0]||(t[0]=l=>e(i).overall=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Qs,[t[8]||(t[8]=s("div",{class:"w-1/2"},"Customer Service",-1)),s("div",Is,[r(e(p),{rating:e(i).customer_service,"onUpdate:rating":t[1]||(t[1]=l=>e(i).customer_service=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Ls,[t[9]||(t[9]=s("div",{class:"w-1/2"},"Quality",-1)),s("div",Ms,[r(e(p),{rating:e(i).quality,"onUpdate:rating":t[2]||(t[2]=l=>e(i).quality=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Js,[t[10]||(t[10]=s("div",{class:"w-1/2"},"Price",-1)),s("div",Ts,[r(e(p),{rating:e(i).price,"onUpdate:rating":t[3]||(t[3]=l=>e(i).price=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Ws,[t[11]||(t[11]=s("div",{class:"w-1/2"},"Communication",-1)),s("div",Gs,[r(e(p),{rating:e(i).communication,"onUpdate:rating":t[4]||(t[4]=l=>e(i).communication=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Hs,[t[12]||(t[12]=s("div",{class:"w-1/2"},"Speed",-1)),s("div",Ks,[r(e(p),{rating:e(i).speed,"onUpdate:rating":t[5]||(t[5]=l=>e(i).speed=l),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Xs,[r(E,{textarea:"","container-class":"w-full",label:"Review",required:"",form:e(i),model:"review"},null,8,["form"])])],32)]),r(e(cs),{class:"flex"},{default:d(()=>[s("div",Ys,[r(e(bs),{"as-child":"",ref_key:"closeBtn",ref:n},{default:d(()=>[r(e(R),{type:"button",size:"sm",variant:"destructive"},{default:d(()=>t[13]||(t[13]=[w("Close")])),_:1,__:[13]})]),_:1},512),r(e(R),{type:"submit",form:"form",size:"sm",processing:e(i).processing},{default:d(()=>t[14]||(t[14]=[w("Submit Review")])),_:1,__:[14]},8,["processing"])])]),_:1})]),_:1})]),_:3}))}}),se={class:"flex items-center"},ee={key:0,class:"ms-auto md:block hidden"},te={key:1,class:"ms-auto md:hidden"},ie={class:"my-5 flex flex-col items-start gap-4"},ae={class:"flex items-start gap-2 lg:gap-4"},re={class:"text-5xl"},le={class:""},ne={class:"w-full"},oe={class:"flex flex-wrap"},de={class:"w-full md:w-1/2"},ue={class:"flex flex-col gap-1 text-sm"},me={class:"flex gap-3"},fe={class:"flex gap-3"},ve={class:"flex gap-3"},ce={class:"flex gap-3"},pe={class:"flex gap-3"},ge={class:"flex gap-3"},_e={class:"w-full md:w-1/2 mt-7 md:mt-0"},be={class:"flex flex-col gap-1 text-sm"},we={class:"flex items-center gap-4"},ye={class:"flex bg-gray-200 w-[150px]"},xe={class:"flex items-center gap-4"},$e={class:"flex bg-gray-200 w-[150px]"},ke={class:"flex items-center gap-4"},Ce={class:"flex bg-gray-200 w-[150px]"},ze={class:"flex items-center gap-4"},Re={class:"flex bg-gray-200 w-[150px]"},he={class:"flex items-center gap-4"},Se={class:"flex bg-gray-200 w-[150px]"},qe=x({__name:"ReviewsInsight",props:{signboard:{},ratings:{},distributions:{},class:{}},setup(b){const v=ts(),m=is(()=>v.props.auth.user),i=b,f=O(i.signboard.total_average_rating);return(n,a)=>{var $,k;return _(),C("div",{class:as(e(ns)("p-4 border-t text-fade",i.class))},[s("div",se,[a[4]||(a[4]=s("div",{class:"font-medium text-lg"},"Reviews",-1)),(($=m.value)==null?void 0:$.id)!==n.signboard.business.user_id?(_(),C("div",ee,[r(Vs,{ratable:n.signboard,ratable_type:"signboard",onRated:a[0]||(a[0]=o=>{f.value=o})},{default:d(()=>[r(e(R),{size:"sm"},{default:d(()=>a[2]||(a[2]=[w("Add Review")])),_:1,__:[2]})]),_:1},8,["ratable"])])):B("",!0),((k=m.value)==null?void 0:k.id)!==n.signboard.business.user_id?(_(),C("div",te,[r(Zs,{ratable:n.signboard,ratable_type:"signboard",onRated:a[1]||(a[1]=o=>{f.value=o})},{default:d(()=>[r(e(R),{size:"sm"},{default:d(()=>a[3]||(a[3]=[w("Add Review")])),_:1,__:[3]})]),_:1},8,["ratable"])])):B("",!0)]),s("div",ie,[s("div",ae,[s("div",re,c(e(y)(n.signboard.total_average_rating,1)),1),(_(),z(e(p),{"star-size":37,"show-rating":!1,rating:f.value,"read-only":"","active-color":"#009689",padding:3,class:"md:w-1/3 w-full",key:`rating-card-${n.signboard.id}`,increment:.01},null,8,["rating"]))]),s("div",le," ("+c(n.signboard.reviews_count)+" total reviews) ",1),s("div",ne,[a[18]||(a[18]=s("div",{class:"text-xl mb-3 font-medium text-secondary"},"Insights",-1)),s("div",oe,[s("div",de,[a[11]||(a[11]=s("div",{class:"font-medium mb-2"},"Ratings By Category",-1)),s("div",ue,[s("div",me,[s("div",null,c(e(y)(n.ratings.overall,1)),1),a[5]||(a[5]=s("div",null,"Overall",-1))]),s("div",fe,[s("div",null,c(e(y)(n.ratings.customer_service,1)),1),a[6]||(a[6]=s("div",null,"Customer Service",-1))]),s("div",ve,[s("div",null,c(e(y)(n.ratings.quality,1)),1),a[7]||(a[7]=s("div",null,"Quality",-1))]),s("div",ce,[s("div",null,c(e(y)(n.ratings.price,1)),1),a[8]||(a[8]=s("div",null,"Price",-1))]),s("div",pe,[s("div",null,c(e(y)(n.ratings.communication,1)),1),a[9]||(a[9]=s("div",null,"Communication",-1))]),s("div",ge,[s("div",null,c(e(y)(n.ratings.speed,1)),1),a[10]||(a[10]=s("div",null,"Speed",-1))])])]),s("div",_e,[a[17]||(a[17]=s("div",{class:"font-medium mb-2"},"Ratings Distribution",-1)),s("div",be,[s("div",we,[a[12]||(a[12]=s("div",{class:"w-[50px]"},"5 stars",-1)),s("div",ye,[s("div",{class:"bg-gray-400 h-2",style:P({width:`${n.distributions[5]}%`})},null,4)]),s("div",null,c(n.distributions[5])+"%",1)]),s("div",xe,[a[13]||(a[13]=s("div",{class:"w-[50px]"},"4 stars",-1)),s("div",$e,[s("div",{class:"bg-gray-400 h-2",style:P({width:`${n.distributions[4]}%`})},null,4)]),s("div",null,c(n.distributions[4])+"%",1)]),s("div",ke,[a[14]||(a[14]=s("div",{class:"w-[50px]"},"3 stars",-1)),s("div",Ce,[s("div",{class:"bg-gray-400 h-2",style:P({width:`${n.distributions[3]}%`})},null,4)]),s("div",null,c(n.distributions[3])+"%",1)]),s("div",ze,[a[15]||(a[15]=s("div",{class:"w-[50px]"},"2 stars",-1)),s("div",Re,[s("div",{class:"bg-gray-400 h-2",style:P({width:`${n.distributions[2]}%`})},null,4)]),s("div",null,c(n.distributions[2])+"%",1)]),s("div",he,[a[16]||(a[16]=s("div",{class:"w-[50px]"},"1 star",-1)),s("div",Se,[s("div",{class:"bg-gray-400 h-2",style:P({width:`${n.distributions[1]}%`})},null,4)]),s("div",null,c(n.distributions[1])+"%",1)])])])])])]),a[19]||(a[19]=s("div",{class:"w-full flex flex-col gap-3 mt-3"},null,-1))],2)}}}),Ue={class:"p-4"},Ie=x({__name:"ReviewsDetails",props:{ratable:{},ratings:{},distributions:{},reviews:{}},setup(b){return(v,m)=>(_(),C("div",null,[r(qe,{signboard:v.ratable,ratings:v.ratings,distributions:v.distributions},null,8,["signboard","ratings","distributions"]),s("div",Ue,[r(ks,{signboard:v.ratable,reviews:v.reviews},null,8,["signboard","reviews"])])]))}});export{Ie as _};
