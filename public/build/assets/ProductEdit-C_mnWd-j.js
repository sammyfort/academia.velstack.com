import{d as E,r as P,x as I,f as F,q as N,c as M,o as S,a as t,u as o,g as R,w as n,b as d,j as W,i as j,F as A}from"./app-BSE14mLX.js";import{t as D,a as O}from"./helpers-COG5VrcA.js";import{B as L,_ as T}from"./Layout.vue_vue_type_script_setup_true_lang-COw0kUfd.js";import{_ as z}from"./PageHeader.vue_vue_type_script_setup_true_lang-CxlYHIWl.js";import{_ as G,a as H}from"./FeaturedFilePond.vue_vue_type_script_setup_true_lang-CCc6F4_L.js";import{_ as m}from"./InputSelect.vue_vue_type_script_setup_true_lang-BQD2t77I.js";import{d as i}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DQSjvP_f.js";import{_ as J}from"./TextEditor.vue_vue_type_script_setup_true_lang-BaEWoRYl.js";import{d as K}from"./Input.vue_vue_type_script_setup_true_lang-D1XutL9j.js";import{_ as Q}from"./GalleryFilePond.vue_vue_type_script_setup_true_lang-cXJhfUN4.js";import"./map-pin-BvvnU2Xu.js";import"./createLucideIcon-CQbmQB6n.js";import"./check-BdkrYdnM.js";import"./plus-myh4SIs-.js";const X={class:"w-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},Y={class:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm"},Z={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},ee={class:"col-span-1 rounded-xl border border-gray-200 bg-white p-6 shadow-sm md:col-span-2"},be=E({__name:"ProductEdit",props:{categories:{},regions:{},choices:{},product:{},statuses:{},countries:{}},setup(U){var u,p,c,f,b,_,g,y,w,x,h,v,V,k,q;const r=U;P();const $=P(),e=I({country_id:((u=r.product)==null?void 0:u.country_id)||"",region_id:((p=r.product)==null?void 0:p.region_id)||"",name:((c=r.product)==null?void 0:c.name)||"",status:((f=r.product)==null?void 0:f.status)||"",description:((b=r.product)==null?void 0:b.description)||"",short_description:((_=r.product)==null?void 0:_.short_description)||"",price:((g=r.product)==null?void 0:g.price)??"",categories:(((y=r.product)==null?void 0:y.categories)||[]).map(l=>l.id),is_negotiable:(w=r.product)!=null&&w.is_negotiable?"yes":"no",first_mobile:((x=r.product)==null?void 0:x.first_mobile)||"",second_mobile:((h=r.product)==null?void 0:h.second_mobile)||"",whatsapp_mobile:((v=r.product)==null?void 0:v.whatsapp_mobile)||"",town:((V=r.product)==null?void 0:V.town)||"",video_link:((k=r.product)==null?void 0:k.video_link)||"",website:((q=r.product)==null?void 0:q.website)||"",featured:null,gallery:[],removed_gallery_urls:[]});F(()=>{});const B=N(()=>r.product.gallery?Array.from(r.product.gallery).map((s,a)=>({url:s,isOriginal:!0,originalIndex:a})):[]);N(()=>Object.keys(e.errors).filter(l=>l.startsWith("gallery.")).map(l=>e.errors[l]));const C=()=>{e.put(route("my-products.update",r.product.id),{onSuccess:l=>{l.props.success?D(l.props.message):O(l.props.message)}})};return(l,s)=>(S(),M(A,null,[t(o(R),{title:"Update Product"}),t(T,null,{default:n(()=>[d("div",X,[t(z,{title:"Edit Product",subtitle:"Update Product",icon:o(L)},null,8,["icon"]),t(G,{form:o(e),"submit-text":"Update Product","processing-text":"Updating Product...",onSubmit:C},{"form-sections":n(()=>[d("div",Y,[s[3]||(s[3]=d("h2",{class:"mb-6 text-lg font-semibold text-gray-900"},"Product Information",-1)),d("div",Z,[t(m,{label:"Select Country",form:o(e),model:"country_id",options:r.countries,required:"",searchable:""},null,8,["form","options"]),t(m,{label:"Select Region",form:o(e),model:"region_id",options:r.regions,required:"",searchable:""},null,8,["form","options"]),t(i,{form:o(e),label:"Product Name",model:"name",required:""},null,8,["form"]),t(m,{form:o(e),label:"Status",model:"status",options:r.statuses,required:""},null,8,["form","options"]),t(m,{form:o(e),label:"Category",model:"categories",options:r.categories,taggable:"",required:"",searchable:""},null,8,["form","options"]),t(i,{form:o(e),label:"Price",model:"price",type:"number",required:""},null,8,["form"]),t(m,{label:"Is Negotiable?",form:o(e),model:"is_negotiable",options:r.choices,required:""},null,8,["form","options"]),t(i,{form:o(e),label:"First Mobile No",type:"tel",model:"first_mobile",required:""},null,8,["form"]),t(i,{form:o(e),label:"Second Mobile No",type:"tel",model:"second_mobile"},null,8,["form"]),t(i,{form:o(e),label:"WhatsApp No",type:"tel",model:"whatsapp_mobile"},null,8,["form"]),t(i,{form:o(e),label:"Website",model:"website"},null,8,["form"]),t(i,{form:o(e),label:"Town",model:"town",required:""},null,8,["form"]),t(i,{form:o(e),label:"Video Link",model:"video_link"},null,8,["form"]),t(i,{form:o(e),label:"Short Description",model:"short_description",textarea:""},null,8,["form"])])]),d("div",ee,[s[4]||(s[4]=d("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Product Description",-1)),t(J,{modelValue:o(e).description,"onUpdate:modelValue":s[0]||(s[0]=a=>o(e).description=a)},null,8,["modelValue"]),o(e).errors.description?(S(),W(K,{key:0,message:o(e).errors.description},null,8,["message"])):j("",!0)])]),"media-section":n(()=>[t(H,{ref_key:"featureUploadRef",ref:$,form:o(e),modelValue:o(e).featured,"onUpdate:modelValue":s[1]||(s[1]=a=>o(e).featured=a),preview:r.product.featured,modelName:"featured",error:o(e).errors.featured},null,8,["form","modelValue","preview","error"]),t(Q,{modelValue:o(e).gallery,"onUpdate:modelValue":s[2]||(s[2]=a=>o(e).gallery=a),form:o(e),error:o(e).errors.gallery,existing:B.value},null,8,["modelValue","form","error","existing"])]),_:1},8,["form"])])]),_:1})],64))}});export{be as default};
