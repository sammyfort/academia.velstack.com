import{_ as v}from"./InputSelect.vue_vue_type_script_setup_true_lang-BTRyvu9m.js";import{d as w,r as f,x as h,f as k,c as i,o as a,b as s,a as m,e as p,u as l,h as u,n as P,t as n,N as y,F as S,i as N}from"./app-CJOsepMj.js";import{n as j,a as C}from"./helpers-f9gJiNVo.js";import{c as D}from"./createLucideIcon-DNOILhqk.js";import{L as V}from"./Input.vue_vue_type_script_setup_true_lang-C9BO0Bhe.js";import{R as z}from"./rocket-Bc-98qZT.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=D("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),$={class:"mb-6 rounded-2xl border border-gray-100 bg-white p-6 shadow-xl"},E={class:"mb-4 flex items-center gap-2 text-xl font-bold text-gray-900"},F={class:"mb-6"},T={class:"mb-3 flex items-center justify-between"},B={key:0,class:"flex flex-col w-full gap-1 mb-3"},R={class:"text-fade ms-auto text-sm"},U={class:"h-2 w-full rounded-full bg-gray-200"},I={class:"mb-3 h-2 w-full rounded-full bg-gray-200"},q={class:"space-y-2 text-sm"},M={class:"flex justify-between"},A={class:"font-semibold"},G={class:"flex justify-between"},H={class:"font-semibold"},J={key:0,class:"flex justify-between"},K={class:"font-semibold text-orange-600"},O={class:"mt-6 mb-4 border-t border-gray-100 pt-4"},Q={class:"mb-3 flex items-center justify-between"},W={key:0,class:"space-y-2"},X={class:"text-gray-600"},Y={class:"font-semibold text-primary"},Z={key:1,class:"relative"},ss=["disabled"],ts={key:0,class:"flex items-center gap-2"},es={key:1,class:"flex items-center gap-2"},ds=w({__name:"PromoteSignboard",props:{signboard:{},plans:{}},setup(g){const e=g,b=f(0),c=f(!1),d=h({plan_id:"",signboard_id:e.signboard.id}),x=()=>{d.post(route("payments.signboard-subscription"),{replace:!0,onSuccess:o=>{const t=o.props.data.authorization_url;t?window.location=t:C("Payment initialization failed, pleased reload the page and try again")}})};return k(()=>{const o=e.signboard.active_subscription;if(o&&o.total_days>0&&o.days_left>0){const t=o.total_days-o.days_left;t>0&&(b.value=j(100*t/o.total_days,0))}console.log(o)}),(o,t)=>{var _;return a(),i("div",$,[s("h3",E,[m(l(L),{class:"h-5 w-5 text-primary"}),t[1]||(t[1]=p(" Promote Signboard "))]),s("div",F,[s("div",T,[t[2]||(t[2]=s("span",{class:"font-medium text-gray-600"},"Current Status",-1)),s("span",{class:P(["rounded-full px-3 py-1 text-sm font-medium",e.signboard.active_subscription?"bg-green-600 text-white":"bg-red-600 text-white"])},n(e.signboard.active_subscription?"Promoted":"Not Promoted"),3)]),o.signboard.active_subscription?(a(),i("div",B,[s("div",R,n((_=e.signboard.active_subscription)==null?void 0:_.days_left)+" Day(s) Left",1),s("div",U,[s("div",{class:"h-2 rounded-full bg-primary transition-all duration-300",style:y({width:`${b.value}%`})},null,4)])])):u("",!0),s("div",I,[s("div",{class:"h-2 rounded-full bg-primary transition-all duration-300",style:y([e.signboard.views_count,"%"])},null,4)]),s("div",q,[s("div",M,[t[3]||(t[3]=s("span",{class:"text-gray-600"},"Reviews",-1)),s("span",A,n(e.signboard.reviews_count||0),1)]),s("div",G,[t[4]||(t[4]=s("span",{class:"text-gray-600"},"Total Views",-1)),s("span",H,n(e.signboard.views_count||0),1)]),e.signboard.active_subscription?(a(),i("div",J,[t[5]||(t[5]=s("span",{class:"text-gray-600"},"Expires",-1)),s("span",K,n(new Date(e.signboard.active_subscription.ends_at).toDateString()),1)])):u("",!0)])]),s("div",O,[s("div",Q,[t[6]||(t[6]=s("h4",{class:"font-semibold text-gray-900"},"Promote Now",-1)),s("button",{onClick:t[0]||(t[0]=r=>c.value=!c.value),class:"text-sm font-medium text-primary transition-colors hover:text-primary/80"},n(c.value?"Select Plan":"View Plans"),1)]),c.value?(a(),i("div",W,[(a(!0),i(S,null,N(e.plans.slice(0,3),r=>(a(),i("div",{key:r.id,class:"flex items-center justify-between text-sm"},[s("span",X,n(r.number_of_days)+" Days",1),s("span",Y,n(r.price),1)]))),128))])):(a(),i("div",Z,[m(v,{label:"Select Plan",form:l(d),model:"plan_id",options:e.plans.map(r=>({label:`${r.number_of_days} Days - â‚µ${r.price}`,value:r.id})),required:"",searchable:""},null,8,["form","options"])])),l(d).plan_id?(a(),i("button",{key:2,onClick:x,disabled:l(d).processing,class:"mt-4 flex w-full items-center justify-center gap-2 rounded-xl bg-primary px-4 py-3 font-medium text-white transition-all duration-200 hover:scale-105 disabled:cursor-not-allowed disabled:opacity-50"},[l(d).processing?(a(),i("span",ts,[m(l(V),{class:"h-4 w-4 animate-spin"}),t[7]||(t[7]=p("Processing..."))])):(a(),i("span",es,[m(l(z),{class:"h-4 w-4"}),p(" "+n(e.signboard.active_subscription>1?"Extend Promotion":"Promote Now"),1)]))],8,ss)):u("",!0)])])}}});export{ds as _};
