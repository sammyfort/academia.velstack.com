var I=Object.defineProperty;var L=(c,e,t)=>e in c?I(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var P=(c,e,t)=>L(c,typeof e!="symbol"?e+"":e,t);import{d as B,j as $,o as f,w as n,k as F,z as M,u as a,r as y,f as N,c as _,s as w,v as S,a as r,x as H,H as G,I as Q,g as K,b as d,h as R,F as b,i as x,e as q,t as C,W as k}from"./app-DfFecOqm.js";import{_ as W}from"./Layout.vue_vue_type_script_setup_true_lang-C2Ug_Mpi.js";import{_ as Y}from"./SignboardCardV1.vue_vue_type_script_setup_true_lang-3F5KOw2k.js";import{_ as J,S as X,a as Z}from"./AdvertisedSignboardV.vue_vue_type_script_setup_true_lang-W5R4JXtt.js";import{_ as ee}from"./InputText.vue_vue_type_script_setup_true_lang-BsqPTXet.js";import{_ as O,a as j,b as T,c as D,d as E}from"./SelectValue.vue_vue_type_script_setup_true_lang-gX-Nv08a.js";import{d as te,c as ae}from"./useForwardPropsEmits-BwZe92K5.js";import{P as se}from"./Input.vue_vue_type_script_setup_true_lang-DWBTmr9Q.js";import{_ as V}from"./index-CAp5TeUS.js";import{_ as re,a as le,b as ie,c as oe}from"./AccordionTrigger.vue_vue_type_script_setup_true_lang-CbLmqAew.js";import{c as A}from"./createLucideIcon-iN6Kw1K3.js";import{d as ne}from"./helpers-Br8MaYJK.js";import{S as ue}from"./star-CIAsa4v6.js";import"./chevron-down-BOhxRrmS.js";import"./DialogPortal-Ps0MxGNz.js";import"./x-Dox7THxo.js";import"./map-pin-CYV8ZlPJ.js";import"./building-2-D4Oo80PC.js";import"./VisuallyHidden-C16hkWUP.js";import"./VueStarRating.common-DHsCx7aP.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-B_ioJIGI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Label.vue_vue_type_script_setup_true_lang-BoVLLnr2.js";import"./Collection-36G-_yjH.js";import"./check-BcKuULAI.js";import"./nullish-CtH4V8ap.js";import"./useDirection-BhoQvZRC.js";import"./isValueEqualOrExist-BtCHUStO.js";const[ot,de]=ae("SelectGroup"),ce=B({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{}},setup(c){const e=c,t=te(void 0,"reka-select-group");return de({id:t}),(l,g)=>(f(),$(a(se),M({role:"group"},e,{"aria-labelledby":a(t)}),{default:n(()=>[F(l.$slots,"default")]),_:3},16,["aria-labelledby"]))}});/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=A("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=A("BriefcaseBusinessIcon",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=A("SignpostIcon",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M18 6a2 2 0 0 1 1.387.56l2.307 2.22a1 1 0 0 1 0 1.44l-2.307 2.22A2 2 0 0 1 18 13H6a2 2 0 0 1-1.387-.56l-2.306-2.22a1 1 0 0 1 0-1.44l2.306-2.22A2 2 0 0 1 6 6z",key:"gqqp9m"}]]),ge=B({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]}},setup(c){const e=c;return(t,l)=>(f(),$(a(ce),M({"data-slot":"select-group"},e),{default:n(()=>[F(t.$slots,"default")]),_:3},16))}}),he={class:"fixed bottom-6 right-6 opacity-100 starting:opacity-0 transition-opacity duration-2000"},_e=B({__name:"BackToTop",setup(c){const e=y(!1),t=()=>{e.value=window.scrollY>200},l=()=>{window.scrollTo({top:0,behavior:"smooth"})};return N(()=>{window.addEventListener("scroll",t)}),(g,o)=>(f(),_("div",he,[w(r(a(V),{onClick:l,class:"p-5 rounded-full",size:"icon",variant:"secondary"},{default:n(()=>[r(a(pe),{className:"w-5 h-5"})]),_:1},512),[[S,e.value]])]))}});var v,ve=(v=class{constructor(e){P(this,"_path");P(this,"_params",{});this._path=e}static defineAliases(e){v.aliases=e}filter(e,t){return this.createOrUpdateParams(`filter[${e}]`,[t]),this}sort(...e){return this.createOrUpdateParams("sort",e),this}include(...e){return this.createOrUpdateParams("include",e),this}append(...e){return this.createOrUpdateParams("append",e),this}param(e,...t){return this.createOrUpdateParams(e,t),this}fields(e){return Object.entries(e).forEach(([t,l])=>{this.createOrUpdateParams(`fields[${t}]`,l)}),this}page(e){return this._params.page=[e.toString()],this}when(e,t){return e&&t(this),this}forgetValue(e,t){return this._params[e]||(e=this.parseKeyToAlias(e)),this._params[e]=(this._params[e]||[]).filter(l=>l!==t),this}forget(e){return this._params[e]||(e=this.parseKeyToAlias(e)),delete this._params[e],this}forgets(...e){return e.forEach(t=>{this.forget(t)}),this}createOrUpdateParams(e,t){return e=this.parseKeyToAlias(e),this._params[e]=[...this._params[e]||[],...t],this}parseKeyToAlias(e){return Object.entries(v.aliases).forEach(([t,l])=>{e.includes(t)&&(e=e.replace(t,l))}),e}tap(e){return e(this),this}scopes(...e){return e.forEach(t=>t(this)),this}buildParams(e){const t=this._params[e];return t?`${e}=${t.join(",")}`:""}buildAsArray(e){let t=[];return e!=null&&e.includePath&&t.push(this._path),Object.keys(this._params).map(l=>{var g;(g=e==null?void 0:e.excludes)!=null&&g.includes(l)||!(e!=null&&e.includePagination)&&(l==="page"||l==="limit")||t.push(this.buildParams(l))}),t}build(){const e=Object.keys(this._params).map(l=>this.buildParams(l));let t=this.shouldHaveQmark()?"?":"";return`${this._path}${t}${this.connectQueryString(...e)}`}shouldHaveQmark(){return Object.keys(this._params).length>0}connectQueryString(...e){return e.filter(t=>t.length>0).join("&")}},P(v,"aliases",{}),v),be=ve,xe=(c="/")=>new be(c);const ye={class:"relative flex w-full gap-15"},we={class:"w-full text-gray-900 antialiased lg:w-4/5"},Se={class:"mb-5"},$e={class:"mt-3"},Pe={class:"grid grid-cols-1 items-center gap-3 p-2 md:grid-cols-2 lg:grid-cols-4"},qe={class:"grid grid-cols-2 gap-3"},ke={class:"grid items-stretch gap-7 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4"},Be={class:"flex items-center gap-2 lg:text-2xl text-lg font-bold"},Ue={key:0,class:"flex w-full flex-col items-center gap-4"},Ve={class:"hidden w-1/5 lg:block"},Ae={class:"sticky top-0"},nt=B({__name:"Signboards",props:{signboardsData:{},categories:{},regions:{}},setup(c){const e=c,t=y([]),l=y(!1),g=y(null),o=H({q:"",categories:null,region:null}),h=y(null),U=async()=>{if(!(l.value||!g.value)&&window.innerHeight+window.scrollY>=document.body.offsetHeight-100){if(!g.value)return;k.get(g.value,{},{onStart:()=>l.value=!0,onFinish:()=>l.value=!1,preserveState:!0,preserveScroll:!0,preserveUrl:!0,only:["signboardsData"],onSuccess:p=>{const s=p.props.signboardsData;t.value=[...t.value,...s.data];let i=s.next_page_url;h.value&&i&&(i=i+(h==null?void 0:h.value.replace("?","&"))),g.value=i}})}},z=()=>{const p=xe().when(o.region!==null,i=>{i.filter("region",o.region)}).when(o.categories!==null&&o.categories.length>0,i=>{const m=o.categories??[];console.log(m),m.forEach(u=>{i.filter("categories",u)})}).when(o.q!==null&&o.q!=="",i=>{i.filter("q",o.q)}),s=p.build().replace("/","");!s||s==="/"?(h.value=null,k.visit(route("signboards.index"))):(t.value=[],h.value=s,console.log("queryUrl",s),k.visit(route("signboards.index")+decodeURIComponent(p.build()),{preserveState:!0,preserveScroll:!0,only:["signboardsData"],onSuccess:i=>{const m=i.props.signboardsData;g.value=null,m.next_page_url&&(g.value=m.next_page_url+s.replace("?","&")),t.value=m.data},onStart:()=>l.value=!0,onFinish:()=>l.value=!1}))};return N(()=>{g.value=e.signboardsData.next_page_url,t.value=e.signboardsData.data,window.removeEventListener("scroll",U),window.addEventListener("scroll",U)}),G(()=>{const p=new URLSearchParams(window.location.search),s=p.get("filter[q]"),i=p.get("filter[categories]"),m=p.get("filter[region]");o.categories=i?i.split(",").map(u=>Number(u)):[],o.region=m?Number(m):null,o.q=s||"",p.size>0&&(h.value="&"+p.toString())}),Q(()=>{window.removeEventListener("scroll",U)}),(p,s)=>(f(),_(b,null,[r(a(K),{title:"Signboards"}),r(W,null,{default:n(()=>[d("div",ye,[d("div",we,[d("div",Se,[s[6]||(s[6]=d("div",{class:"text-fade text-2xl font-semibold"},"Browse Signboards",-1)),d("div",$e,[r(a(re),{type:"single",collapsible:"","default-value":h.value?"filter":""},{default:n(()=>[r(a(le),{value:"filter"},{default:n(()=>[r(a(ie),{class:"items-center justify-start gap-1"},{default:n(()=>s[3]||(s[3]=[d("div",{class:"text-fade cursor-pointer text-lg font-semibold"},"Filter:",-1)])),_:1,__:[3]}),r(a(oe),null,{default:n(()=>{var i,m;return[d("div",Pe,[r(ee,{placeholder:"Search signboard...","container-class":"gap-0",type:"text",model:"q",form:a(o)},null,8,["form"]),r(a(O),{modelValue:a(o).categories,"onUpdate:modelValue":s[0]||(s[0]=u=>a(o).categories=u),"default-value":a(o).categories,multiple:!0},{default:n(()=>[r(a(j),{class:"w-full"},{default:n(()=>[r(a(T),{placeholder:"Signboard category"})]),_:1}),r(a(D),null,{default:n(()=>[(f(!0),_(b,null,x(p.categories,u=>(f(),$(a(E),{key:u.id,value:u.id},{default:n(()=>[q(C(u.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","default-value"]),r(a(O),{modelValue:a(o).region,"onUpdate:modelValue":s[1]||(s[1]=u=>a(o).region=u),"default-value":a(o).region},{default:n(()=>[r(a(j),{class:"w-full"},{default:n(()=>[r(a(T),{placeholder:"Region"})]),_:1}),r(a(D),null,{default:n(()=>[r(a(ge),null,{default:n(()=>[(f(!0),_(b,null,x(p.regions,u=>(f(),$(a(E),{key:u.id,value:u.id},{default:n(()=>[q(C(u.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","default-value"]),d("div",qe,[w(r(a(V),{onClick:z},{default:n(()=>s[4]||(s[4]=[q("Apply Filter")])),_:1,__:[4]},512),[[S,a(o).region||((i=a(o).categories)==null?void 0:i.length)||((m=a(o).q)==null?void 0:m.length)]]),w(r(a(V),{variant:"secondary",onClick:s[2]||(s[2]=u=>a(k).visit(p.route("signboards.index")))},{default:n(()=>s[5]||(s[5]=[q("Reset")])),_:1,__:[5]},512),[[S,h.value]])])])]}),_:1})]),_:1})]),_:1},8,["default-value"])])]),d("div",ke,[(f(!0),_(b,null,x(a(ne)(t.value,15),(i,m)=>(f(),_(b,{key:`chunk-${m}`},[(f(!0),_(b,null,x(i,u=>(f(),$(Y,{signboard:u,key:u.id,class:"shadow-2xl","image-height":"45"},null,8,["signboard"]))),128)),w(r(J,{containerClass:"md:col-span-3 lg:col-span-3 xl:col-span-4 sm:col-span-2 lg:hidden"},{default:n(()=>[d("div",Be,[r(a(me),{size:25,class:"text-primary"}),s[7]||(s[7]=d("span",null,"Trusted Business",-1)),r(a(ue),{size:25,class:"text-primary"})])]),_:2},1536),[[S,i.length>14]])],64))),128)),(f(),_(b,null,x([1,2,3,4],i=>w(r(X,{key:i,class:"shadow-2xl","image-height":"30"}),[[S,l.value]])),64))]),!t.value.length&&!l.value?(f(),_("div",Ue,[r(a(fe),{class:"text-primary",size:70}),s[8]||(s[8]=d("div",{class:"text-center"},[d("div",{class:"mb-3 text-3xl font-bold"},"No Signboard Found"),d("div",null,"Broaden your search...")],-1))])):R("",!0)]),d("div",Ve,[d("div",Ae,[r(Z,{"items-class":"h-screen"})])])])]),_:1}),r(_e)],64))}});export{nt as default};
