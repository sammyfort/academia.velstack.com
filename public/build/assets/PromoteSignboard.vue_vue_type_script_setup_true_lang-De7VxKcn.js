import{_ as v}from"./InputSelect.vue_vue_type_script_setup_true_lang-OE0Kp9b5.js";import{d as w,r as f,x as h,f as k,c as a,o as i,b as t,a as c,e as p,u as l,i as u,n as P,t as r,K as y,F as S,h as j}from"./app-DRCK7nkC.js";import{n as C,a as N}from"./helpers-CMjjm8WS.js";import{c as z}from"./createLucideIcon-DJItMF46.js";import{L as D}from"./Input.vue_vue_type_script_setup_true_lang-C51oJD59.js";import{R as T}from"./rocket-CtylIfoH.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=z("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),$={class:"mb-6 rounded-2xl border border-gray-100 bg-white p-6 shadow-xl"},L={class:"mb-4 flex items-center gap-2 text-xl font-bold text-gray-900"},E={class:"mb-6"},F={class:"mb-3 flex items-center justify-between"},B={key:0,class:"flex flex-col w-full gap-1 mb-3"},R={class:"text-fade ms-auto text-sm"},U={class:"h-2 w-full rounded-full bg-gray-200"},I={class:"mb-3 h-2 w-full rounded-full bg-gray-200"},q={class:"space-y-2 text-sm"},K={class:"flex justify-between"},M={class:"font-semibold"},A={class:"flex justify-between"},G={class:"font-semibold"},H={key:0,class:"flex justify-between"},J={class:"font-semibold text-orange-600"},O={class:"mt-6 mb-4 border-t border-gray-100 pt-4"},Q={class:"mb-3 flex items-center justify-between"},W={key:0,class:"space-y-2"},X={class:"text-gray-600"},Y={class:"font-semibold text-primary"},Z={key:1,class:"relative"},tt=["disabled"],et={key:0,class:"flex items-center gap-2"},st={key:1,class:"flex items-center gap-2"},dt=w({__name:"PromoteSignboard",props:{signboard:{},plans:{},promotableType:{}},setup(g){const s=g,_=f(0),m=f(!1),d=h({plan_id:null,promotable_id:s.signboard.id,promotable_type:s.promotableType}),x=()=>{d.post(route("promotions.payment.initialize"),{replace:!0,onSuccess:o=>{const e=o.props.data.authorization_url;e?window.location=e:N("Payment initialization failed, pleased reload the page and try again")}})};return k(()=>{const o=s.signboard.active_promotion;if(o&&o.total_days>0&&o.days_left>0){const e=o.total_days-o.days_left;e>0&&(_.value=C(100*e/o.total_days,0))}}),(o,e)=>{var b;return i(),a("div",$,[t("h3",L,[c(l(V),{class:"h-5 w-5 text-primary"}),e[1]||(e[1]=p(" Promote Signboard "))]),t("div",E,[t("div",F,[e[2]||(e[2]=t("span",{class:"font-medium text-gray-600"},"Current Status",-1)),t("span",{class:P(["rounded-full px-3 py-1 text-sm font-medium",s.signboard.active_promotion?"bg-green-600 text-white":"bg-red-600 text-white"])},r(s.signboard.active_promotion?"Promoted":"Not Promoted"),3)]),o.signboard.active_promotion?(i(),a("div",B,[t("div",R,r((b=s.signboard.active_promotion)==null?void 0:b.days_left)+" Day(s) Left",1),t("div",U,[t("div",{class:"h-2 rounded-full bg-primary transition-all duration-300",style:y({width:`${_.value}%`})},null,4)])])):u("",!0),t("div",I,[t("div",{class:"h-2 rounded-full bg-primary transition-all duration-300",style:y([s.signboard.views_count,"%"])},null,4)]),t("div",q,[t("div",K,[e[3]||(e[3]=t("span",{class:"text-gray-600"},"Reviews",-1)),t("span",M,r(s.signboard.reviews_count||0),1)]),t("div",A,[e[4]||(e[4]=t("span",{class:"text-gray-600"},"Total Views",-1)),t("span",G,r(s.signboard.views_count||0),1)]),s.signboard.active_promotion?(i(),a("div",H,[e[5]||(e[5]=t("span",{class:"text-gray-600"},"Expires",-1)),t("span",J,r(new Date(s.signboard.active_promotion.ends_at).toDateString()),1)])):u("",!0)])]),t("div",O,[t("div",Q,[e[6]||(e[6]=t("h4",{class:"font-semibold text-gray-900"},"Promote Now",-1)),t("button",{onClick:e[0]||(e[0]=n=>m.value=!m.value),class:"text-sm font-medium text-primary transition-colors hover:text-primary/80"},r(m.value?"Select Plan":"View Plans"),1)]),m.value?(i(),a("div",W,[(i(!0),a(S,null,j(s.plans.slice(0,3),n=>(i(),a("div",{key:n.id,class:"flex items-center justify-between text-sm"},[t("span",X,r(n.number_of_days)+" Days",1),t("span",Y,r(n.price),1)]))),128))])):(i(),a("div",Z,[c(v,{label:"Select Plan",form:l(d),model:"plan_id",options:s.plans.map(n=>({label:`${n.name} - ${n.number_of_days} Days - â‚µ${n.price}`,value:n.id})),required:"",searchable:""},null,8,["form","options"])])),l(d).plan_id?(i(),a("button",{key:2,onClick:x,disabled:l(d).processing,class:"mt-4 flex w-full items-center justify-center gap-2 rounded-xl bg-primary px-4 py-3 font-medium text-white transition-all duration-200 hover:scale-105 disabled:cursor-not-allowed disabled:opacity-50"},[l(d).processing?(i(),a("span",et,[c(l(D),{class:"h-4 w-4 animate-spin"}),e[7]||(e[7]=p("Processing..."))])):(i(),a("span",st,[c(l(T),{class:"h-4 w-4"}),p(" "+r(s.signboard.active_promotion?"Extend Promotion":"Promote Now"),1)]))],8,tt)):u("",!0)])])}}});export{dt as _};
