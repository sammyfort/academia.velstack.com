import{_ as N,a as V}from"./ReviewsList.vue_vue_type_script_setup_true_lang-DS3jXwV-.js";import{S as c}from"./VueStarRating.common-1gKmfJEO.js";import{a as D,t as E,n as g}from"./helpers-DUnB0mrp.js";import{a as I,P as M,_ as k,c as Q}from"./Input.vue_vue_type_script_setup_true_lang-3B1K43zP.js";import{d as R,j as O,o as b,w as f,k as j,u as t,x as W,r as z,f as A,c as x,a as o,b as e,l as F,e as h,B as G,q as T,n as H,i as B,t as d,G as y}from"./app-c5OGnRl8.js";import{g as J,h as K,j as L,k as X}from"./Layout.vue_vue_type_script_setup_true_lang-Dmfvc_SE.js";import{_ as Y}from"./InputText.vue_vue_type_script_setup_true_lang-DZM9TOpJ.js";import{r as Z}from"./api-BzSQVwAz.js";var ee=R({__name:"PopoverClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(_){const u=_;I();const v=J();return(i,m)=>(b(),O(t(M),{type:i.as==="button"?"button":void 0,as:i.as,"as-child":u.asChild,onClick:m[0]||(m[0]=l=>t(v).onOpenChange(!1))},{default:f(()=>[j(i.$slots,"default")]),_:3},8,["type","as","as-child"]))}}),se=ee;const te={class:"flex flex-wrap items-center border-b py-1.5 text-sm font-medium text-fade"},ae={class:"w-1/2 flex items-center"},ie={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},le={class:"w-1/2 flex items-center"},re={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},oe={class:"w-1/2 flex items-center"},ne={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},de={class:"w-1/2 flex items-center"},ue={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ve={class:"w-1/2 flex items-center"},me={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},pe={class:"w-1/2 flex items-center"},fe={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ge={class:"pt-3 flex justify-between"},ce=R({__name:"RatePopover",props:{ratable:{},ratable_type:{},carouselPlugin:{}},emits:["popoverOpen","rated"],setup(_,{emit:u}){const v=_,i=W({overall:0,customer_service:0,quality:0,price:0,communication:0,speed:0,review:"",ratable_id:v.ratable.id,ratable_type:v.ratable_type}),m=z(null),l=z(null),s=u,$=async()=>{await Z(i,v.ratable.id,r=>{var a,n;r.props.message&&(E(r.props.message),s("rated",r.props.data.ratable.total_average_rating)),(n=(a=l==null?void 0:l.value)==null?void 0:a.$el)==null||n.click()},null,r=>{for(const a in r){D(r[a]);break}})};A(()=>{var r,a,n,S,q,P,U;if(m.value=(r=v.ratable.reviews)!=null&&r.length?v.ratable.reviews[0]:null,m.value){const w=m.value.ratings;i.review=m.value.review,i.overall=((a=w.find(p=>p.key==="overall"))==null?void 0:a.value)??0,i.customer_service=((n=w.find(p=>p.key==="customer_service"))==null?void 0:n.value)??0,i.quality=((S=w.find(p=>p.key==="quality"))==null?void 0:S.value)??0,i.price=((q=w.find(p=>p.key==="price"))==null?void 0:q.value)??0,i.communication=((P=w.find(p=>p.key==="communication"))==null?void 0:P.value)??0,i.speed=((U=w.find(p=>p.key==="speed"))==null?void 0:U.value)??0}});const C=r=>{s("popoverOpen",r)};return(r,a)=>(b(),x("div",null,[o(t(K),{"onUpdate:open":C},{default:f(()=>[o(t(L),null,{default:f(()=>[j(r.$slots,"default")]),_:3}),o(t(X),{class:"w-[20rem]"},{default:f(()=>[e("form",{onSubmit:F($,["prevent"]),class:"grid grid-cols-1"},[e("div",te,[a[6]||(a[6]=e("div",{class:"w-1/2"},"Overall",-1)),e("div",ae,[o(t(c),{rating:t(i).overall,"onUpdate:rating":a[0]||(a[0]=n=>t(i).overall=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",ie,[a[7]||(a[7]=e("div",{class:"w-1/2"},"Customer Service",-1)),e("div",le,[o(t(c),{rating:t(i).customer_service,"onUpdate:rating":a[1]||(a[1]=n=>t(i).customer_service=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",re,[a[8]||(a[8]=e("div",{class:"w-1/2"},"Quality",-1)),e("div",oe,[o(t(c),{rating:t(i).quality,"onUpdate:rating":a[2]||(a[2]=n=>t(i).quality=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",ne,[a[9]||(a[9]=e("div",{class:"w-1/2"},"Price",-1)),e("div",de,[o(t(c),{rating:t(i).price,"onUpdate:rating":a[3]||(a[3]=n=>t(i).price=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",ue,[a[10]||(a[10]=e("div",{class:"w-1/2"},"Communication",-1)),e("div",ve,[o(t(c),{rating:t(i).communication,"onUpdate:rating":a[4]||(a[4]=n=>t(i).communication=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",me,[a[11]||(a[11]=e("div",{class:"w-1/2"},"Speed",-1)),e("div",pe,[o(t(c),{rating:t(i).speed,"onUpdate:rating":a[5]||(a[5]=n=>t(i).speed=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),e("div",fe,[o(Y,{textarea:"","container-class":"w-full",label:"Review",required:"",form:t(i),model:"review"},null,8,["form"])]),e("div",ge,[o(t(se),{"as-child":"",ref_key:"closeBtn",ref:l},{default:f(()=>[o(t(k),{type:"button",size:"sm",variant:"secondary"},{default:f(()=>a[12]||(a[12]=[h("Close")])),_:1,__:[12]})]),_:1},512),o(t(k),{type:"submit",size:"sm",processing:t(i).processing},{default:f(()=>a[13]||(a[13]=[h("Submit Review")])),_:1,__:[13]},8,["processing"])])],32)]),_:1})]),_:3})]))}}),be={class:"flex items-center"},_e={key:0,class:"ms-auto md:block hidden"},we={key:1,class:"ms-auto md:hidden"},ye={class:"my-5 flex flex-col items-start gap-4"},xe={class:"flex items-start gap-2 lg:gap-4"},$e={class:"text-5xl"},Ce={class:""},ke={class:"w-full"},he={class:"flex flex-wrap"},Re={class:"w-full md:w-1/2"},ze={class:"flex flex-col gap-1 text-sm"},Se={class:"flex gap-3"},qe={class:"flex gap-3"},Pe={class:"flex gap-3"},Ue={class:"flex gap-3"},Be={class:"flex gap-3"},Oe={class:"flex gap-3"},je={class:"w-full md:w-1/2 mt-7 md:mt-0"},Ne={class:"flex flex-col gap-1 text-sm"},Ve={class:"flex items-center gap-4"},De={class:"flex bg-gray-200 w-[150px]"},Ee={class:"flex items-center gap-4"},Ie={class:"flex bg-gray-200 w-[150px]"},Me={class:"flex items-center gap-4"},Qe={class:"flex bg-gray-200 w-[150px]"},We={class:"flex items-center gap-4"},Ae={class:"flex bg-gray-200 w-[150px]"},Fe={class:"flex items-center gap-4"},Ge={class:"flex bg-gray-200 w-[150px]"},Te=R({__name:"ReviewsInsight",props:{ratable:{},ratings:{},distributions:{},class:{},ratable_type:{}},setup(_){const u=G(),v=T(()=>u.props.auth.user),i=_,m=z(i.ratable.total_average_rating);return(l,s)=>{var $,C;return b(),x("div",{class:H(t(Q)("p-4 border-t text-fade",i.class))},[e("div",be,[s[2]||(s[2]=e("div",{class:"font-medium text-lg"},"Reviews",-1)),(($=v.value)==null?void 0:$.id)!==l.ratable.created_by_id?(b(),x("div",_e,[o(ce,{ratable:l.ratable,ratable_type:l.ratable_type,onRated:s[0]||(s[0]=r=>{m.value=r})},{default:f(()=>[o(t(k),{size:"sm"},{default:f(()=>{var r;return[h(d((r=i.ratable.reviews)!=null&&r.length?"Update review":"Write review"),1)]}),_:1})]),_:1},8,["ratable","ratable_type"])])):B("",!0),((C=v.value)==null?void 0:C.id)!==l.ratable.created_by_id?(b(),x("div",we,[o(N,{ratable:l.ratable,ratable_type:l.ratable_type,onRated:s[1]||(s[1]=r=>{m.value=r})},{default:f(()=>[o(t(k),{size:"sm"},{default:f(()=>{var r;return[h(d((r=i.ratable.reviews)!=null&&r.length?"Update review":"Write review"),1)]}),_:1})]),_:1},8,["ratable","ratable_type"])])):B("",!0)]),e("div",ye,[e("div",xe,[e("div",$e,d(t(g)(l.ratable.total_average_rating,1)),1),(b(),O(t(c),{"star-size":37,"show-rating":!1,rating:m.value,"read-only":"","active-color":"#009689",padding:3,class:"md:w-1/3 w-full",key:`rating-card-${l.ratable.id}`,increment:.01},null,8,["rating"]))]),e("div",Ce," ("+d(l.ratable.reviews_count)+" total reviews) ",1),e("div",ke,[s[16]||(s[16]=e("div",{class:"text-xl mb-3 font-medium text-secondary"},"Insights",-1)),e("div",he,[e("div",Re,[s[9]||(s[9]=e("div",{class:"font-medium mb-2"},"Ratings By Category",-1)),e("div",ze,[e("div",Se,[e("div",null,d(t(g)(l.ratings.overall,1)),1),s[3]||(s[3]=e("div",null,"Overall",-1))]),e("div",qe,[e("div",null,d(t(g)(l.ratings.customer_service,1)),1),s[4]||(s[4]=e("div",null,"Customer Service",-1))]),e("div",Pe,[e("div",null,d(t(g)(l.ratings.quality,1)),1),s[5]||(s[5]=e("div",null,"Quality",-1))]),e("div",Ue,[e("div",null,d(t(g)(l.ratings.price,1)),1),s[6]||(s[6]=e("div",null,"Price",-1))]),e("div",Be,[e("div",null,d(t(g)(l.ratings.communication,1)),1),s[7]||(s[7]=e("div",null,"Communication",-1))]),e("div",Oe,[e("div",null,d(t(g)(l.ratings.speed,1)),1),s[8]||(s[8]=e("div",null,"Speed",-1))])])]),e("div",je,[s[15]||(s[15]=e("div",{class:"font-medium mb-2"},"Ratings Distribution",-1)),e("div",Ne,[e("div",Ve,[s[10]||(s[10]=e("div",{class:"w-[50px]"},"5 stars",-1)),e("div",De,[e("div",{class:"bg-gray-400 h-2",style:y({width:`${l.distributions[5]}%`})},null,4)]),e("div",null,d(l.distributions[5])+"%",1)]),e("div",Ee,[s[11]||(s[11]=e("div",{class:"w-[50px]"},"4 stars",-1)),e("div",Ie,[e("div",{class:"bg-gray-400 h-2",style:y({width:`${l.distributions[4]}%`})},null,4)]),e("div",null,d(l.distributions[4])+"%",1)]),e("div",Me,[s[12]||(s[12]=e("div",{class:"w-[50px]"},"3 stars",-1)),e("div",Qe,[e("div",{class:"bg-gray-400 h-2",style:y({width:`${l.distributions[3]}%`})},null,4)]),e("div",null,d(l.distributions[3])+"%",1)]),e("div",We,[s[13]||(s[13]=e("div",{class:"w-[50px]"},"2 stars",-1)),e("div",Ae,[e("div",{class:"bg-gray-400 h-2",style:y({width:`${l.distributions[2]}%`})},null,4)]),e("div",null,d(l.distributions[2])+"%",1)]),e("div",Fe,[s[14]||(s[14]=e("div",{class:"w-[50px]"},"1 star",-1)),e("div",Ge,[e("div",{class:"bg-gray-400 h-2",style:y({width:`${l.distributions[1]}%`})},null,4)]),e("div",null,d(l.distributions[1])+"%",1)])])])])])]),s[17]||(s[17]=e("div",{class:"w-full flex flex-col gap-3 mt-3"},null,-1))],2)}}}),He={class:"p-4"},ts=R({__name:"ReviewsDetails",props:{ratable:{},ratings:{},distributions:{},reviews:{},ratable_type:{}},setup(_){return(u,v)=>(b(),x("div",null,[o(Te,{ratable:u.ratable,ratings:u.ratings,distributions:u.distributions,ratable_type:u.ratable_type},null,8,["ratable","ratings","distributions","ratable_type"]),e("div",He,[o(V,{ratable:u.ratable,reviews:u.reviews},null,8,["ratable","reviews"])])]))}});export{ts as _};
