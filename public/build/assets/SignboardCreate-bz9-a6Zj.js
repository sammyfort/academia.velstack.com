import{d as M,x as O,r as b,v as A,m as F,C as y,c as d,o as i,a as r,u as t,g as G,w,b as e,e as h,t as u,F as _,k,h as C,f as E}from"./app-AYUAItGV.js";import{t as $,a as q}from"./helpers-D5H0wNSX.js";import{_ as g}from"./InputText.vue_vue_type_script_setup_true_lang-BUav05rB.js";import{_ as L,I as V}from"./InputSelect.vue_vue_type_script_setup_true_lang-BZ9Zrb3O.js";import{X as p,_ as T,L as D}from"./index-HGAjEnE_.js";import{B as R,_ as J}from"./Layout.vue_vue_type_script_setup_true_lang-CWMenEid.js";import{g as U}from"./meta-o3_ofRgN.js";import{M as W}from"./map-pin-DqCQyg83.js";import{U as X}from"./upload-Dz-eYaBN.js";import{P as S}from"./plus-Dc1J1Bsn.js";import{C as z}from"./check-BkAedqbK.js";import"./InputError.vue_vue_type_script_setup_true_lang-B2muTTzz.js";import"./Input.vue_vue_type_script_setup_true_lang-BrgIm8nW.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-B04inPsl.js";import"./VisuallyHidden-CutucHug.js";const H={class:"w-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},K={class:"bg-white border-b border-gray-200 shadow-sm"},Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Y={class:"flex items-center space-x-3"},Z={class:"p-2 bg-primary rounded-lg"},ee={class:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},se={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},te={class:"lg:col-span-2 space-y-6"},oe={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},re={class:"flex items-center space-x-3 mb-6"},ae={class:"p-2 bg-primary rounded-lg"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"md:col-span-2"},de={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},ne={class:"flex items-center space-x-3 mb-6"},ce={class:"p-2 bg-primary rounded-lg"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ue={class:"space-y-6"},ge={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},pe={class:"flex items-center space-x-3 mb-4"},be={class:"p-2 bg-primary rounded-lg"},he={class:"relative"},_e={class:"relative rounded-lg border-2 border-dashed border-gray-300 p-6 transition-all duration-200 hover:border-primary hover:bg-blue-50/50 group"},xe={key:0,class:"text-center"},fe={key:1,class:"relative"},ve=["src"],ye={key:0,class:"mt-2 text-sm text-red-600 flex items-center space-x-1"},we={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},ke={class:"flex items-center justify-between mb-4"},Ce={class:"flex items-center space-x-3"},Le={class:"p-2 bg-primary rounded-lg"},Re={class:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full"},Ue={class:"space-y-4"},Se={class:"relative rounded-lg border-2 border-dashed border-gray-300 p-4 transition-all duration-200 hover:border-primary hover:bg-indigo-50/50 group"},Be={class:"text-center"},je={key:0,class:"grid grid-cols-2 gap-3"},Pe=["src"],Ie=["onClick"],Ne={class:"absolute bottom-1 left-1 px-1.5 py-0.5 bg-black/50 rounded text-white text-xs"},Me={key:1,class:"space-y-1"},Oe={key:0,class:"text-sm text-red-600 flex items-center space-x-1"},Ae={class:"mt-8"},Fe={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Ge={class:"flex items-center justify-between"},ts=M({__name:"SignboardCreate",setup(Ee){const o=O({business_id:"",region_id:"",town:"",street:"",landmark:"",blk_number:"",gps:"",featured_image:null,gallery_images:[]}),x=b([]),f=b([]);A(async()=>{var l,c;const[a,s]=await Promise.all([U("regions"),U("authBusinesses")]);x.value=((l=a.metadata)==null?void 0:l.regions)??[],f.value=((c=s.metadata)==null?void 0:c.businesses)??[]});const n=b(null),m=b([]),v=F(()=>Object.keys(o.errors).filter(a=>a.startsWith("gallery_images.")).map(a=>o.errors[a])),B=()=>{o.post(route("my-signboards.store"),{onSuccess:a=>{a.props.success?$(a.props.message):q(a.props.message),o.reset(),n.value=null,m.value=[]}})},j=a=>{var l;const s=((l=a.target.files)==null?void 0:l[0])||null;o.featured_image=s,n.value=s?URL.createObjectURL(s):null},P=()=>{o.featured_image=null,n.value&&URL.revokeObjectURL(n.value),n.value=null},I=a=>{(a.target.files?Array.from(a.target.files):[]).forEach(l=>{o.gallery_images.push(l),m.value.push(URL.createObjectURL(l))}),a.target.value=""},N=a=>{const s=m.value.splice(a,1)[0];o.gallery_images.splice(a,1),URL.revokeObjectURL(s)};return y(n,(a,s)=>s&&URL.revokeObjectURL(s)),y(m,(a,s)=>s.forEach(l=>URL.revokeObjectURL(l))),(a,s)=>(i(),d(_,null,[r(t(G),{title:"Create Signboard"}),r(J,null,{default:w(()=>[e("div",H,[e("div",K,[e("div",Q,[e("div",Y,[e("div",Z,[r(t(R),{class:"h-6 w-6 text-white"})]),s[0]||(s[0]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Add New Signboard"),e("p",{class:"text-sm text-gray-600 mt-1"},"Create a new signboard listing for your business")],-1))])])]),e("div",ee,[e("div",se,[e("div",te,[e("div",oe,[e("div",re,[e("div",ae,[r(t(R),{class:"h-5 w-5 text-white"})]),s[1]||(s[1]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Business Information",-1))]),e("div",le,[e("div",ie,[r(L,{label:"Select Business",form:t(o),model:"business_id",options:f.value,required:"",searchable:""},null,8,["form","options"])]),r(L,{label:"Region",form:t(o),model:"region_id",options:x.value,required:"",searchable:""},null,8,["form","options"]),r(g,{form:t(o),label:"Town",model:"town",required:""},null,8,["form"])])]),e("div",de,[e("div",ne,[e("div",ce,[r(t(W),{class:"h-5 w-5 text-white"})]),s[2]||(s[2]=e("h2",{class:"text-lg font-semibold text-gray-900"},"Location Details",-1))]),e("div",me,[r(g,{form:t(o),label:"Street Address",model:"street",placeholder:"e.g., Main Street"},null,8,["form"]),r(g,{form:t(o),label:"Landmark",model:"landmark",required:"",placeholder:"e.g., Near Central Mall"},null,8,["form"]),r(g,{form:t(o),label:"Block Number",model:"blk_number",placeholder:"e.g., Block A"},null,8,["form"]),r(g,{form:t(o),label:"GPS Coordinates",model:"gps",placeholder:"e.g., 5.6037, -0.1870"},null,8,["form"])])])]),e("div",ue,[e("div",ge,[e("div",pe,[e("div",be,[r(t(V),{class:"h-5 w-5 text-white"})]),s[3]||(s[3]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Featured Image",-1))]),e("div",he,[e("div",_e,[e("input",{type:"file",accept:"image/*",onChange:j,class:"absolute inset-0 h-full w-full cursor-pointer opacity-0"},null,32),n.value?(i(),d("div",fe,[e("img",{src:n.value,class:"w-full h-40 rounded-lg object-cover"},null,8,ve),e("button",{type:"button",onClick:P,class:"absolute top-2 right-2 p-1 bg-red-100 hover:bg-red-200 rounded-full shadow-lg transition-colors duration-200"},[r(t(p),{class:"h-4 w-4 text-red-600"})]),s[5]||(s[5]=e("div",{class:"absolute bottom-2 left-2 px-2 py-1 bg-black/50 rounded text-white text-xs"}," Featured ",-1))])):(i(),d("div",xe,[r(t(X),{class:"mx-auto h-12 w-12 text-gray-400 group-hover:text-primary transition-colors duration-200"}),s[4]||(s[4]=e("div",{class:"mt-4"},[e("p",{class:"text-sm font-medium text-gray-900"},"Upload featured image"),e("p",{class:"text-xs text-gray-500 mt-1"},"PNG, JPG up to 10MB")],-1))]))]),t(o).errors.featured_image?(i(),d("p",ye,[r(t(p),{class:"h-4 w-4"}),e("span",null,u(t(o).errors.featured_image),1)])):h("",!0)])]),e("div",we,[e("div",ke,[e("div",Ce,[e("div",Le,[r(t(S),{class:"h-5 w-5 text-white"})]),s[6]||(s[6]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Gallery Images",-1))]),e("span",Re,u(m.value.length)+" uploaded ",1)]),e("div",Ue,[e("div",Se,[e("input",{type:"file",multiple:"",accept:"image/*",onChange:I,class:"absolute inset-0 h-full w-full cursor-pointer opacity-0"},null,32),e("div",Be,[r(t(S),{class:"mx-auto h-8 w-8 text-gray-400 group-hover:text-primary transition-colors duration-200"}),s[7]||(s[7]=e("p",{class:"text-sm font-medium text-gray-700 mt-2"},"Add more images",-1)),s[8]||(s[8]=e("p",{class:"text-xs text-gray-500"},"Multiple selection supported",-1))])]),m.value.length?(i(),d("div",je,[(i(!0),d(_,null,k(m.value,(l,c)=>(i(),d("div",{key:c,class:"relative group"},[e("img",{src:l,class:"w-full h-24 rounded-lg object-cover border border-gray-200"},null,8,Pe),e("button",{type:"button",onClick:$e=>N(c),class:"absolute top-1 right-1 p-1 bg-red-100 hover:bg-red-200 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200"},[r(t(p),{class:"h-3 w-3 text-red-600"})],8,Ie),e("div",Ne,u(c+1),1)]))),128))])):h("",!0),t(o).errors.gallery_images||v.value.length?(i(),d("div",Me,[t(o).errors.gallery_images?(i(),d("p",Oe,[r(t(p),{class:"h-4 w-4"}),e("span",null,u(t(o).errors.gallery_images),1)])):h("",!0),(i(!0),d(_,null,k(v.value,(l,c)=>(i(),d("p",{key:c,class:"text-sm text-red-600 flex items-center space-x-1"},[r(t(p),{class:"h-4 w-4"}),e("span",null,u(l),1)]))),128))])):h("",!0)])])])]),e("div",Ae,[e("div",Fe,[e("div",Ge,[s[9]||(s[9]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"These information will appear to the public."),e("p",{class:"text-sm text-gray-600 mt-1"},"Review your information and submit when ready")],-1)),r(t(T),{disabled:t(o).processing,onClick:B,class:"px-8 py-3 bg-gradient-to-r from-primary to-primary hover:from-primary hover:to-orange-300 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},{default:w(()=>[t(o).processing?(i(),C(t(D),{key:0,class:"mr-2 h-5 w-5 animate-spin"})):(i(),C(t(z),{key:1,class:"mr-2 h-5 w-5"})),E(" "+u(t(o).processing?"Creating Signboard...":"Create Signboard"),1)]),_:1},8,["disabled"])])])])])])]),_:1})],64))}});export{ts as default};
