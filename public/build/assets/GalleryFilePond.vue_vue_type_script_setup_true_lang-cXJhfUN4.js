import{d as x,bl as w,c as t,o as a,b as s,a as i,u as g,t as V,i as p,F,h as k,C,D}from"./app-BSE14mLX.js";import{v as P,p as $,b as B}from"./FeaturedFilePond.vue_vue_type_script_setup_true_lang-CCc6F4_L.js";import{d as G}from"./Input.vue_vue_type_script_setup_true_lang-D1XutL9j.js";import{P as N}from"./plus-myh4SIs-.js";const j={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},A={class:"flex items-center justify-between mb-4"},I={class:"flex items-center space-x-3"},R={class:"p-2 bg-primary rounded-lg"},S={class:"inline-flex items-center whitespace-nowrap px-3 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full"},X={class:"space-y-4"},E={class:"relative rounded-lg border-2 border-dashed border-gray-300 p-4 transition-all duration-200 hover:border-primary hover:bg-indigo-50/50 group"},L={key:0,class:"grid grid-cols-2 gap-3 max-h-96 overflow-y-auto"},O=["src","alt"],q=["onClick"],z={key:1,class:"space-y-1 mt-2"},T=x({__name:"GalleryFilePond",props:{modelValue:{},form:{},existing:{},error:{}},emits:["update:modelValue"],setup(_,{emit:h}){const f=P(B,$),e=_,d=h,v=(r,o)=>{!r&&o.file instanceof File&&d("update:modelValue",[...e.modelValue,o.file])},y=(r,o)=>{d("update:modelValue",e.modelValue.filter(n=>n.name!==o.file.name))},b=r=>{e.form.removed_gallery_urls.includes(r)||e.form.removed_gallery_urls.push(r)};return(r,o)=>{var c,m;const n=w("X");return a(),t("div",j,[s("div",A,[s("div",I,[s("div",R,[i(g(N),{class:"h-5 w-5 text-white"})]),o[0]||(o[0]=s("h3",{class:"text-lg font-semibold text-gray-900"},"Gallery Images",-1))]),s("span",S,V((((c=e.existing)==null?void 0:c.filter(l=>!e.form.removed_gallery_urls.includes(l.url)).length)??0)+e.modelValue.length)+" images ",1)]),s("div",X,[s("div",E,[i(g(f),{name:"gallery","allow-multiple":"","accepted-file-types":"image/*","label-idle":'Drag & Drop or <span class="filepond--label-action">Browse</span>',onAddfile:v,onRemovefile:y})]),(m=e.existing)!=null&&m.length?(a(),t("div",L,[(a(!0),t(F,null,k(e.existing,(l,u)=>C((a(),t("div",{key:`existing-${u}`,class:"relative group"},[s("img",{src:l.url,alt:`Gallery image ${u+1}`,class:"w-full h-24 object-cover rounded border"},null,8,O),s("button",{type:"button",onClick:H=>b(l.url),class:"absolute top-1 right-1 bg-red-500 text-white rounded p-1 text-xs hover:bg-red-600 transition-colors"},[i(n,{class:"h-3 w-3"})],8,q)])),[[D,l.url&&!e.form.removed_gallery_urls.includes(l.url)]])),128))])):p("",!0),e.error?(a(),t("div",z,[i(G,{message:e.error},null,8,["message"])])):p("",!0)])])}}});export{T as _};
