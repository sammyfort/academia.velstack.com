import{_ as Q,a as K,b as M,c as f,d as Z,e as _}from"./TableHeader.vue_vue_type_script_setup_true_lang-C-lFvNM1.js";import{p as ee,_ as Y,c as te}from"./Input.vue_vue_type_script_setup_true_lang-JYFAA2Md.js";import{_ as ae,a as se,b as le,c as ne,d as k}from"./SelectValue.vue_vue_type_script_setup_true_lang-BThLJnho.js";import{_ as $}from"./index-DWWqodMr.js";import{h as D,n as re}from"./helpers-Cyx2NYZ_.js";import{C as j}from"./credit-card-BIgFm5mL.js";import{S as E}from"./search-8Tepj4QB.js";import{X as oe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DWQhbLw0.js";import{C as ue}from"./calendar-BcN8KA5G.js";import{C as F}from"./clock-DMSvp0OG.js";import{C as ie}from"./circle-check-big-D76O3T0n.js";import{d as L,r as O,q as R,c as b,o as i,b as o,i as c,j as p,a,e as l,u as e,w as s,t as d,F as X,h as de,n as H,m as me,k as fe}from"./app-DzlptF85.js";import{_ as S,a as V}from"./index-DxBBuZru.js";import{C as _e}from"./check-DKKW4Q0l.js";import{c as ce}from"./createLucideIcon-CvYBHfXi.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=ce("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),pe={class:"rounded-2xl border border-gray-100 bg-white p-6 shadow-xl mt-4"},ye={class:"mb-6 flex items-center justify-between"},ve={class:"flex items-center gap-2 text-2xl font-bold text-gray-900"},ge={class:"mb-6 space-y-2"},xe={class:"flex flex-col sm:flex-row gap-4"},we={class:"relative flex-1"},be={class:"overflow-x-auto"},Ce={class:"flex items-center gap-1.5"},ke={class:"font-semibold"},$e={class:"flex items-center gap-1"},he={class:"font-medium"},De={key:0,class:"text-center py-8"},Se={key:1,class:"text-center py-8"},Re=L({__name:"PaymentHistory",props:{promotions:{}},setup(m){const y=m,r=O(""),v=O("all"),h=R(()=>{let u=[...y.promotions];if(r.value){const t=r.value.toLowerCase();u=u.filter(n=>{var C,g,x,w,T,B,N,z,I,q;return((g=(C=n.payment_reference)==null?void 0:C.toLowerCase())==null?void 0:g.includes(t))||((w=(x=n.amount)==null?void 0:x.toString())==null?void 0:w.includes(t))||((B=(T=n.payment_platform)==null?void 0:T.toLowerCase())==null?void 0:B.includes(t))||((z=(N=n.payment_channel)==null?void 0:N.toLowerCase())==null?void 0:z.includes(t))||((q=(I=n.plan.name)==null?void 0:I.toLowerCase())==null?void 0:q.includes(t))})}if(v.value!=="all"){const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate());u=u.filter(C=>{const g=new Date(C.created_at);switch(v.value){case"today":return g>=n;case"week":const x=new Date(n);return x.setDate(x.getDate()-7),g>=x;case"month":const w=new Date(n);return w.setMonth(w.getMonth()-1),g>=w;default:return!0}})}return u}),P=()=>{r.value="",v.value="all"},W=R(()=>r.value!==""||v.value!=="all"),G=u=>{switch(u){case"paid":return ie;case"pending":return F;case"failed":return U;default:return F}},J=u=>{switch(u){case"paid":return"text-green-600 bg-green-50 border-green-200";case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"failed":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return(u,t)=>(i(),b("div",pe,[o("div",ye,[o("h2",ve,[a(e(j),{class:"h-6 w-6 text-primary"}),t[2]||(t[2]=l(" Promotion History "))]),u.promotions.length?(i(),p(e($),{key:0,variant:"secondary",class:"text-sm"},{default:s(()=>[l(d(h.value.length)+" of "+d(u.promotions.length)+" promotions ",1)]),_:1})):c("",!0)]),o("div",ge,[o("div",xe,[o("div",we,[a(e(E),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),a(e(ee),{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=n=>r.value=n),placeholder:"Search reference, amount, platform, or channel...",class:"pl-10 w-100"},null,8,["modelValue"])]),a(e(ae),{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=n=>v.value=n)},{default:s(()=>[a(e(se),{class:"w-full sm:w-40"},{default:s(()=>[a(e(le),{placeholder:"Filter by date"})]),_:1}),a(e(ne),null,{default:s(()=>[a(e(k),{value:"all"},{default:s(()=>t[3]||(t[3]=[l("All Time")])),_:1,__:[3]}),a(e(k),{value:"today"},{default:s(()=>t[4]||(t[4]=[l("Today")])),_:1,__:[4]}),a(e(k),{value:"week"},{default:s(()=>t[5]||(t[5]=[l("Last Week")])),_:1,__:[5]}),a(e(k),{value:"month"},{default:s(()=>t[6]||(t[6]=[l("Last Month")])),_:1,__:[6]})]),_:1})]),_:1},8,["modelValue"]),W.value?(i(),p(e(Y),{key:0,variant:"outline",size:"sm",onClick:P,class:"flex items-center gap-1 whitespace-nowrap"},{default:s(()=>[a(e(oe),{class:"h-3 w-3"}),t[7]||(t[7]=l(" Clear Filters "))]),_:1,__:[7]})):c("",!0)])]),o("div",be,[a(e(Q),null,{default:s(()=>[a(e(K),null,{default:s(()=>[a(e(M),null,{default:s(()=>[a(e(f),{class:"text-left"},{default:s(()=>t[8]||(t[8]=[l("Date")])),_:1,__:[8]}),a(e(f),{class:"text-left"},{default:s(()=>t[9]||(t[9]=[l("Plan")])),_:1,__:[9]}),a(e(f),{class:"text-left"},{default:s(()=>t[10]||(t[10]=[l("Start Date")])),_:1,__:[10]}),a(e(f),{class:"text-left"},{default:s(()=>t[11]||(t[11]=[l("End Date")])),_:1,__:[11]}),a(e(f),{class:"text-left"},{default:s(()=>t[12]||(t[12]=[l("Status")])),_:1,__:[12]}),a(e(f),{class:"text-left"},{default:s(()=>t[13]||(t[13]=[l("Amount")])),_:1,__:[13]}),a(e(f),{class:"text-left"},{default:s(()=>t[14]||(t[14]=[l("Payment Status")])),_:1,__:[14]}),a(e(f),{class:"text-left"},{default:s(()=>t[15]||(t[15]=[l("Reference")])),_:1,__:[15]})]),_:1})]),_:1}),a(e(Z),null,{default:s(()=>[(i(!0),b(X,null,de(h.value,n=>(i(),p(e(M),{key:n.id},{default:s(()=>[a(e(_),null,{default:s(()=>[o("div",Ce,[a(e(ue),{class:"h-4 w-4 text-gray-400"}),l(" "+d(e(D)(n.created_at)),1)])]),_:2},1024),a(e(_),{class:"flex flex-col gap-2"},{default:s(()=>[o("span",ke,d(n.plan.name),1),a(e($),{variant:"outline",class:"text-xs"},{default:s(()=>[o("span",null,d(n.plan.number_of_days)+" days",1)]),_:2},1024)]),_:2},1024),a(e(_),null,{default:s(()=>[l(d(n.payment_status=="paid"?e(D)(n.starts_at):""),1)]),_:2},1024),a(e(_),null,{default:s(()=>[l(d(n.payment_status=="paid"?e(D)(n.ends_at):""),1)]),_:2},1024),a(e(_),null,{default:s(()=>[n.payment_status==="paid"?(i(),p(e($),{key:0,variant:n.is_active?"success":"destructive"},{default:s(()=>[l(d(n.is_active?"Active":"Expired"),1)]),_:2},1032,["variant"])):c("",!0)]),_:2},1024),a(e(_),null,{default:s(()=>[o("div",$e,[o("span",he,"â‚µ"+d(e(re)(n.amount,2)),1)])]),_:2},1024),a(e(_),null,{default:s(()=>[a(e($),{class:H(["inline-flex items-center gap-1 text-xs font-medium capitalize",J(n.payment_status)])},{default:s(()=>[(i(),p(me(G(n.payment_status)),{class:"h-3 w-3"})),l(" "+d(n.payment_status),1)]),_:2},1032,["class"])]),_:2},1024),a(e(_),{class:"font-mono text-gray-500"},{default:s(()=>[l(d(n.payment_reference),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),h.value.length===0&&u.promotions.length>0?(i(),b("div",De,[a(e(E),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t[17]||(t[17]=o("p",{class:"text-gray-500"},"No promotion match your filters",-1)),a(e(Y),{variant:"outline",size:"sm",onClick:P,class:"mt-2"},{default:s(()=>t[16]||(t[16]=[l(" Clear Filters ")])),_:1,__:[16]})])):c("",!0),u.promotions.length===0?(i(),b("div",Se,[a(e(j),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t[18]||(t[18]=o("p",{class:"text-gray-500"},"No promotion found",-1))])):c("",!0)]))}});var Ve=(m=>(m.SERVICE="service",m.SIGNBOARD="signboard",m.JOB="job",m))(Ve||{});const A=L({__name:"AlertTitle",props:{class:{}},setup(m){const y=m;return(r,v)=>(i(),b("div",{"data-slot":"alert-title",class:H(e(te)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",y.class))},[fe(r.$slots,"default")],2))}}),Xe=L({__name:"PromotionPaymentAlert",props:{payment_status:{}},setup(m){return(y,r)=>(i(),b(X,null,[y.payment_status=="success"?(i(),p(e(V),{key:0,class:"mb-5",variant:"success"},{default:s(()=>[a(e(_e)),a(e(A),null,{default:s(()=>r[0]||(r[0]=[l("Payment Successful")])),_:1,__:[0]}),a(e(S),null,{default:s(()=>r[1]||(r[1]=[l(" Your payment has been successfully confirmed. "),o("br",null,null,-1),l(" Your promotion is now active and visible to potential customers. ")])),_:1,__:[1]})]),_:1})):c("",!0),y.payment_status=="pending"?(i(),p(e(V),{key:1,class:"mb-5",variant:"success"},{default:s(()=>[a(e(F)),a(e(A),null,{default:s(()=>r[2]||(r[2]=[l("Payment in Progress")])),_:1,__:[2]}),a(e(S),null,{default:s(()=>r[3]||(r[3]=[l(" We've received your request and are currently verifying your payment. "),o("br",null,null,-1),l(" This may take a few moments. Once confirmed, your promotion will be activated automatically. ")])),_:1,__:[3]})]),_:1})):c("",!0),y.payment_status=="cancelled"?(i(),p(e(V),{key:2,class:"mb-5",variant:"destructive"},{default:s(()=>[a(e(U)),a(e(A),null,{default:s(()=>r[4]||(r[4]=[l("Transaction Cancelled")])),_:1,__:[4]}),a(e(S),null,{default:s(()=>r[5]||(r[5]=[l(" You cancelled the payment process. "),o("br",null,null,-1),l(" If this was unintentional, please try again to complete your promotion. ")])),_:1,__:[5]})]),_:1})):c("",!0)],64))}});export{Ve as P,Xe as _,Re as a};
