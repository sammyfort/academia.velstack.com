import{c as w,_ as W}from"./Input.vue_vue_type_script_setup_true_lang-C51oJD59.js";import{d as x,c as m,o as d,b as u,n as g,u as e,k,r as N,y as q,i as C,j as $,a,e as r,w as s,t as _,F as Y,h as G,m as J}from"./app-DRCK7nkC.js";import{X as K,_ as H}from"./index-CFhbb7sd.js";import{a as O,b as Z,c as ee,d as S,_ as te}from"./SelectValue.vue_vue_type_script_setup_true_lang-Bei65dRc.js";import{_ as T}from"./index-CZ88FyEx.js";import{e as L,n as ae}from"./helpers-CMjjm8WS.js";import{c as V}from"./createLucideIcon-DJItMF46.js";import{C as P}from"./clock-CO6O2HhL.js";import{C as se}from"./circle-check-big-D-GDM62h.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=V("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=V("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=V("CreditCardIcon",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=V("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ne={"data-slot":"table-container",class:"relative w-full overflow-auto"},oe=x({__name:"Table",props:{class:{}},setup(c){const o=c;return(n,i)=>(d(),m("div",ne,[u("table",{"data-slot":"table",class:g(e(w)("w-full caption-bottom text-sm",o.class))},[k(n.$slots,"default")],2)]))}}),de=x({__name:"TableBody",props:{class:{}},setup(c){const o=c;return(n,i)=>(d(),m("tbody",{"data-slot":"table-body",class:g(e(w)("[&_tr:last-child]:border-0",o.class))},[k(n.$slots,"default")],2))}}),p=x({__name:"TableCell",props:{class:{}},setup(c){const o=c;return(n,i)=>(d(),m("td",{"data-slot":"table-cell",class:g(e(w)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",o.class))},[k(n.$slots,"default")],2))}}),X=x({__name:"TableRow",props:{class:{}},setup(c){const o=c;return(n,i)=>(d(),m("tr",{"data-slot":"table-row",class:g(e(w)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",o.class))},[k(n.$slots,"default")],2))}}),y=x({__name:"TableHead",props:{class:{}},setup(c){const o=c;return(n,i)=>(d(),m("th",{"data-slot":"table-head",class:g(e(w)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",o.class))},[k(n.$slots,"default")],2))}}),ue=x({__name:"TableHeader",props:{class:{}},setup(c){const o=c;return(n,i)=>(d(),m("thead",{"data-slot":"table-header",class:g(e(w)("[&_tr]:border-b",o.class))},[k(n.$slots,"default")],2))}}),ce={class:"rounded-2xl border border-gray-100 bg-white p-6 shadow-xl mt-4"},ie={class:"mb-6 flex items-center justify-between"},_e={class:"flex items-center gap-2 text-2xl font-bold text-gray-900"},fe={class:"mb-6 space-y-2"},me={class:"flex flex-col sm:flex-row gap-4"},pe={class:"relative flex-1"},ye={class:"overflow-x-auto"},xe={class:"flex items-center gap-1.5"},ge={class:"font-semibold"},be={class:"flex items-center gap-1"},he={class:"font-medium"},ve={key:0,class:"text-center py-8"},we={key:1,class:"text-center py-8"},ze=x({__name:"PaymentHistory",props:{signboard:{}},setup(c){const o=c,n=N(""),i=N("all"),F=q(()=>{let f=[...o.signboard.promotions];if(n.value){const t=n.value.toLowerCase();f=f.filter(l=>{var D,b,h,v,A,M,B,I;return((b=(D=l.payment_reference)==null?void 0:D.toLowerCase())==null?void 0:b.includes(t))||((v=(h=l.amount)==null?void 0:h.toString())==null?void 0:v.includes(t))||((M=(A=l.payment_platform)==null?void 0:A.toLowerCase())==null?void 0:M.includes(t))||((I=(B=l.payment_channel)==null?void 0:B.toLowerCase())==null?void 0:I.includes(t))})}if(i.value!=="all"){const t=new Date,l=new Date(t.getFullYear(),t.getMonth(),t.getDate());f=f.filter(D=>{const b=new Date(D.created_at);switch(i.value){case"today":return b>=l;case"week":const h=new Date(l);return h.setDate(h.getDate()-7),b>=h;case"month":const v=new Date(l);return v.setMonth(v.getMonth()-1),b>=v;default:return!0}})}return f}),z=()=>{n.value="",i.value="all"},R=q(()=>n.value!==""||i.value!=="all"),U=f=>{switch(f){case"paid":return se;case"pending":return P;case"failed":return re;default:return P}},Q=f=>{switch(f){case"paid":return"text-green-600 bg-green-50 border-green-200";case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"failed":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return(f,t)=>(d(),m("div",ce,[u("div",ie,[u("h2",_e,[a(e(j),{class:"h-6 w-6 text-primary"}),t[2]||(t[2]=r(" Promotion History "))]),o.signboard.promotions.length?(d(),$(e(T),{key:0,variant:"secondary",class:"text-sm"},{default:s(()=>[r(_(F.value.length)+" of "+_(o.signboard.promotions.length)+" promotions ",1)]),_:1})):C("",!0)]),u("div",fe,[u("div",me,[u("div",pe,[a(e(E),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),a(e(W),{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=l=>n.value=l),placeholder:"Search reference, amount, platform, or channel...",class:"pl-10 w-100"},null,8,["modelValue"])]),a(e(te),{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=l=>i.value=l)},{default:s(()=>[a(e(O),{class:"w-full sm:w-40"},{default:s(()=>[a(e(Z),{placeholder:"Filter by date"})]),_:1}),a(e(ee),null,{default:s(()=>[a(e(S),{value:"all"},{default:s(()=>t[3]||(t[3]=[r("All Time")])),_:1,__:[3]}),a(e(S),{value:"today"},{default:s(()=>t[4]||(t[4]=[r("Today")])),_:1,__:[4]}),a(e(S),{value:"week"},{default:s(()=>t[5]||(t[5]=[r("Last Week")])),_:1,__:[5]}),a(e(S),{value:"month"},{default:s(()=>t[6]||(t[6]=[r("Last Month")])),_:1,__:[6]})]),_:1})]),_:1},8,["modelValue"]),R.value?(d(),$(e(H),{key:0,variant:"outline",size:"sm",onClick:z,class:"flex items-center gap-1 whitespace-nowrap"},{default:s(()=>[a(e(K),{class:"h-3 w-3"}),t[7]||(t[7]=r(" Clear Filters "))]),_:1,__:[7]})):C("",!0)])]),u("div",ye,[a(e(oe),null,{default:s(()=>[a(e(ue),null,{default:s(()=>[a(e(X),null,{default:s(()=>[a(e(y),{class:"text-left"},{default:s(()=>t[8]||(t[8]=[r("Date")])),_:1,__:[8]}),a(e(y),{class:"text-left"},{default:s(()=>t[9]||(t[9]=[r("Plan")])),_:1,__:[9]}),a(e(y),{class:"text-left"},{default:s(()=>t[10]||(t[10]=[r("Start Date")])),_:1,__:[10]}),a(e(y),{class:"text-left"},{default:s(()=>t[11]||(t[11]=[r("End Date")])),_:1,__:[11]}),a(e(y),{class:"text-left"},{default:s(()=>t[12]||(t[12]=[r("Status")])),_:1,__:[12]}),a(e(y),{class:"text-left"},{default:s(()=>t[13]||(t[13]=[r("Amount")])),_:1,__:[13]}),a(e(y),{class:"text-left"},{default:s(()=>t[14]||(t[14]=[r("Payment Status")])),_:1,__:[14]}),a(e(y),{class:"text-left"},{default:s(()=>t[15]||(t[15]=[r("Reference")])),_:1,__:[15]})]),_:1})]),_:1}),a(e(de),null,{default:s(()=>[(d(!0),m(Y,null,G(F.value,l=>(d(),$(e(X),{key:l.id},{default:s(()=>[a(e(p),null,{default:s(()=>[u("div",xe,[a(e(le),{class:"h-4 w-4 text-gray-400"}),r(" "+_(e(L)(l.created_at)),1)])]),_:2},1024),a(e(p),{class:"flex flex-col gap-2"},{default:s(()=>[u("span",ge,_(l.plan.name),1),a(e(T),{variant:"outline",class:"text-xs"},{default:s(()=>[u("span",null,_(l.plan.number_of_days)+" days",1)]),_:2},1024)]),_:2},1024),a(e(p),null,{default:s(()=>[r(_(l.payment_status=="paid"?e(L)(l.starts_at):""),1)]),_:2},1024),a(e(p),null,{default:s(()=>[r(_(l.payment_status=="paid"?e(L)(l.ends_at):""),1)]),_:2},1024),a(e(p),null,{default:s(()=>[l.payment_status==="paid"?(d(),$(e(T),{key:0,variant:l.is_active?"success":"destructive"},{default:s(()=>[r(_(l.is_active?"Active":"Expired"),1)]),_:2},1032,["variant"])):C("",!0)]),_:2},1024),a(e(p),null,{default:s(()=>[u("div",be,[u("span",he,"â‚µ"+_(e(ae)(l.amount,2)),1)])]),_:2},1024),a(e(p),null,{default:s(()=>[a(e(T),{class:g(["inline-flex items-center gap-1 text-xs font-medium capitalize",Q(l.payment_status)])},{default:s(()=>[(d(),$(J(U(l.payment_status)),{class:"h-3 w-3"})),r(" "+_(l.payment_status),1)]),_:2},1032,["class"])]),_:2},1024),a(e(p),{class:"font-mono text-gray-500"},{default:s(()=>[r(_(l.payment_reference),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),F.value.length===0&&o.signboard.promotions.length>0?(d(),m("div",ve,[a(e(E),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t[17]||(t[17]=u("p",{class:"text-gray-500"},"No promotion match your filters",-1)),a(e(H),{variant:"outline",size:"sm",onClick:z,class:"mt-2"},{default:s(()=>t[16]||(t[16]=[r(" Clear Filters ")])),_:1,__:[16]})])):C("",!0),o.signboard.promotions.length===0?(d(),m("div",we,[a(e(j),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t[18]||(t[18]=u("p",{class:"text-gray-500"},"No promotion found",-1))])):C("",!0)]))}});export{re as C,ze as _};
