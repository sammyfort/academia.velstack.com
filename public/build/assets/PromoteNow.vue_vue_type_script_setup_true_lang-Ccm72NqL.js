import{_ as k}from"./InputSelect.vue_vue_type_script_setup_true_lang-B5d6yjzb.js";import{d as N,r as C,B as $,q as u,x as B,c as i,o as r,b as n,j as f,i as _,t as c,F as S,h as V,a as y,u as a,w as b,e as v}from"./app-DxcfcLTv.js";import{a as z}from"./helpers-Cd-xIn6s.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-DZpTo509.js";import{R as U}from"./rocket-L0jCCf6p.js";const j={class:"mb-4 border-t border-gray-100 pt-4 p-3 shadow-lg shadow-primary"},D={class:"mb-3 flex items-center justify-between"},F={key:0,class:"space-y-2"},T={class:"text-gray-600"},q={class:"font-semibold text-primary"},E={key:1,class:"relative"},G=N({__name:"PromoteNow",props:{promotable:{},plans:{},promotableType:{}},setup(w){const l=w,p=C(!1),x=$(),m=u(()=>x.props.auth.user),o=B({plan_id:null,promotable_id:l.promotable.id,promotable_type:l.promotableType}),d=u(()=>{const s=l.plans.find(e=>e.id===o.plan_id);return s?s.price<m.value.points_in_cedis:!1}),h=()=>{o.post(route("promotions.payment.initialize"),{replace:!0,onSuccess:s=>{const e=s.props.data.authorization_url;e?window.location=e:z("Payment initialization failed, pleased reload the page and try again")}})},P=()=>{d.value&&o.post(route("promotions.payment.points"),{onSuccess:s=>{console.log(s.props)}})};return(s,e)=>(r(),i("div",j,[n("div",D,[e[1]||(e[1]=n("h4",{class:"font-black animate-bounce text-secondary text-2xl"},"Promote Now",-1)),n("button",{onClick:e[0]||(e[0]=t=>p.value=!p.value),class:"text-sm font-medium text-primary transition-colors hover:text-primary/80"},c(p.value?"Select Plan":"View Plans"),1)]),e[3]||(e[3]=n("div",{class:"mb-3 text-sm italic text-primary font-bold"}," Promote now to reach more audience ! ",-1)),p.value?(r(),i("div",F,[(r(!0),i(S,null,V(l.plans.slice(0,3),t=>(r(),i("div",{key:t.id,class:"flex items-center justify-between text-sm"},[n("span",T,c(t.number_of_days)+" Days",1),n("span",q,c(t.price),1)]))),128))])):(r(),i("div",E,[y(k,{label:"Select Plan",form:a(o),model:"plan_id",options:s.plans.map(t=>({label:`${t.name} - ${t.number_of_days} Days - â‚µ${t.price}`,value:t.id})),required:"",searchable:""},null,8,["form","options"])])),a(o).plan_id?(r(),f(a(g),{key:2,onClick:P,processing:a(o).processing,class:"mt-4 w-full",variant:"secondary",disabled:!d.value},{default:b(()=>[v(" Use My Points ("+c(m.value.points)+" points) ",1)]),_:1},8,["processing","disabled"])):_("",!0),a(o).plan_id?(r(),f(a(g),{key:3,onClick:h,processing:a(o).processing,class:"mt-4 w-full"},{default:b(()=>[y(a(U),{class:"h-4 w-4"}),e[2]||(e[2]=v(" Promote Now "))]),_:1,__:[2]},8,["processing"])):_("",!0)]))}});export{G as _};
