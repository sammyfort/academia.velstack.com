import{_ as V,a as j}from"./ReviewsList.vue_vue_type_script_setup_true_lang-G7KnqD9F.js";import{S as c}from"./VueStarRating.common-Bon-tQ7y.js";import{a as D,t as E,n as g}from"./helpers-DbA93d0e.js";import{a as I,P as M,_ as k,c as Q}from"./Input.vue_vue_type_script_setup_true_lang-CM7hcv5X.js";import{d as z,j as O,o as b,w as f,k as N,u as t,x as W,r as S,f as A,c as x,a as r,b as s,l as F,e as R,B as J,q as T,n as G,i as U,t as d,J as w}from"./app-BY3mG2bU.js";import{i as H,e as K,f as L,g as X}from"./Layout.vue_vue_type_script_setup_true_lang-D4gm2Nvp.js";import{_ as Y}from"./InputText.vue_vue_type_script_setup_true_lang-kLR70F67.js";import{r as Z}from"./api-CA9zwsrm.js";var ss=z({__name:"PopoverClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(_){const u=_;I();const v=H();return(l,m)=>(b(),O(t(M),{type:l.as==="button"?"button":void 0,as:l.as,"as-child":u.asChild,onClick:m[0]||(m[0]=a=>t(v).onOpenChange(!1))},{default:f(()=>[N(l.$slots,"default")]),_:3},8,["type","as","as-child"]))}}),es=ss;const ts={class:"flex flex-wrap items-center border-b py-1.5 text-sm font-medium text-fade"},is={class:"w-1/2 flex items-center"},as={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ls={class:"w-1/2 flex items-center"},rs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},os={class:"w-1/2 flex items-center"},ns={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ds={class:"w-1/2 flex items-center"},us={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},vs={class:"w-1/2 flex items-center"},ms={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ps={class:"w-1/2 flex items-center"},fs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},gs={class:"pt-3 flex justify-between"},cs=z({__name:"RatePopover",props:{ratable:{},ratable_type:{},carouselPlugin:{}},emits:["popoverOpen","rated"],setup(_,{emit:u}){const v=_,l=W({overall:0,customer_service:0,quality:0,price:0,communication:0,speed:0,review:"",ratable_id:v.ratable.id,ratable_type:v.ratable_type}),m=S(null),a=S(null),e=u,$=async()=>{await Z(l,v.ratable.id,o=>{var i,n;o.props.message&&(E(o.props.message),e("rated",o.props.data.ratable.total_average_rating)),(n=(i=a==null?void 0:a.value)==null?void 0:i.$el)==null||n.click()},null,o=>{for(const i in o){D(o[i]);break}})};A(()=>{var o,i,n,h,q,P,B;if(m.value=(o=v.ratable.reviews)!=null&&o.length?v.ratable.reviews[0]:null,m.value){const y=m.value.ratings;l.review=m.value.review,l.overall=((i=y.find(p=>p.key==="overall"))==null?void 0:i.value)??0,l.customer_service=((n=y.find(p=>p.key==="customer_service"))==null?void 0:n.value)??0,l.quality=((h=y.find(p=>p.key==="quality"))==null?void 0:h.value)??0,l.price=((q=y.find(p=>p.key==="price"))==null?void 0:q.value)??0,l.communication=((P=y.find(p=>p.key==="communication"))==null?void 0:P.value)??0,l.speed=((B=y.find(p=>p.key==="speed"))==null?void 0:B.value)??0}});const C=o=>{e("popoverOpen",o)};return(o,i)=>(b(),x("div",null,[r(t(K),{"onUpdate:open":C},{default:f(()=>[r(t(L),null,{default:f(()=>[N(o.$slots,"default")]),_:3}),r(t(X),{class:"w-[20rem]"},{default:f(()=>[s("form",{onSubmit:F($,["prevent"]),class:"grid grid-cols-1"},[s("div",ts,[i[6]||(i[6]=s("div",{class:"w-1/2"},"Overall",-1)),s("div",is,[r(t(c),{rating:t(l).overall,"onUpdate:rating":i[0]||(i[0]=n=>t(l).overall=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",as,[i[7]||(i[7]=s("div",{class:"w-1/2"},"Customer Service",-1)),s("div",ls,[r(t(c),{rating:t(l).customer_service,"onUpdate:rating":i[1]||(i[1]=n=>t(l).customer_service=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",rs,[i[8]||(i[8]=s("div",{class:"w-1/2"},"Quality",-1)),s("div",os,[r(t(c),{rating:t(l).quality,"onUpdate:rating":i[2]||(i[2]=n=>t(l).quality=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",ns,[i[9]||(i[9]=s("div",{class:"w-1/2"},"Price",-1)),s("div",ds,[r(t(c),{rating:t(l).price,"onUpdate:rating":i[3]||(i[3]=n=>t(l).price=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",us,[i[10]||(i[10]=s("div",{class:"w-1/2"},"Communication",-1)),s("div",vs,[r(t(c),{rating:t(l).communication,"onUpdate:rating":i[4]||(i[4]=n=>t(l).communication=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",ms,[i[11]||(i[11]=s("div",{class:"w-1/2"},"Speed",-1)),s("div",ps,[r(t(c),{rating:t(l).speed,"onUpdate:rating":i[5]||(i[5]=n=>t(l).speed=n),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",fs,[r(Y,{textarea:"","container-class":"w-full",label:"Review",required:"",form:t(l),model:"review"},null,8,["form"])]),s("div",gs,[r(t(es),{"as-child":"",ref_key:"closeBtn",ref:a},{default:f(()=>[r(t(k),{type:"button",size:"sm",variant:"secondary"},{default:f(()=>i[12]||(i[12]=[R("Close")])),_:1,__:[12]})]),_:1},512),r(t(k),{type:"submit",size:"sm",processing:t(l).processing},{default:f(()=>i[13]||(i[13]=[R("Submit Review")])),_:1,__:[13]},8,["processing"])])],32)]),_:1})]),_:3})]))}}),bs={class:"flex items-center"},_s={key:0,class:"ms-auto md:block hidden"},ys={key:1,class:"ms-auto md:hidden"},ws={class:"my-5 flex flex-col items-start gap-4"},xs={class:"flex items-start gap-2 lg:gap-4"},$s={class:"text-5xl"},Cs={class:""},ks={class:"w-full"},Rs={class:"flex flex-wrap"},zs={class:"w-full md:w-1/2"},Ss={class:"flex flex-col gap-1 text-sm"},hs={class:"flex gap-3"},qs={class:"flex gap-3"},Ps={class:"flex gap-3"},Bs={class:"flex gap-3"},Us={class:"flex gap-3"},Os={class:"flex gap-3"},Ns={class:"w-full md:w-1/2 mt-7 md:mt-0"},Vs={class:"flex flex-col gap-1 text-sm"},js={class:"flex items-center gap-4"},Ds={class:"flex bg-gray-200 w-[150px]"},Es={class:"flex items-center gap-4"},Is={class:"flex bg-gray-200 w-[150px]"},Ms={class:"flex items-center gap-4"},Qs={class:"flex bg-gray-200 w-[150px]"},Ws={class:"flex items-center gap-4"},As={class:"flex bg-gray-200 w-[150px]"},Fs={class:"flex items-center gap-4"},Js={class:"flex bg-gray-200 w-[150px]"},Ts=z({__name:"ReviewsInsight",props:{ratable:{},ratings:{},distributions:{},class:{},ratable_type:{}},setup(_){const u=J(),v=T(()=>u.props.auth.user),l=_,m=S(l.ratable.total_average_rating);return(a,e)=>{var $,C;return b(),x("div",{class:G(t(Q)("p-4 border-t text-fade",l.class))},[s("div",bs,[e[4]||(e[4]=s("div",{class:"font-medium text-lg"},"Reviews",-1)),(($=v.value)==null?void 0:$.id)!==a.ratable.created_by_id?(b(),x("div",_s,[r(cs,{ratable:a.ratable,ratable_type:a.ratable_type,onRated:e[0]||(e[0]=o=>{m.value=o})},{default:f(()=>[r(t(k),{size:"sm"},{default:f(()=>e[2]||(e[2]=[R("Write review")])),_:1,__:[2]})]),_:1},8,["ratable","ratable_type"])])):U("",!0),((C=v.value)==null?void 0:C.id)!==a.ratable.created_by_id?(b(),x("div",ys,[r(V,{ratable:a.ratable,ratable_type:a.ratable_type,onRated:e[1]||(e[1]=o=>{m.value=o})},{default:f(()=>[r(t(k),{size:"sm"},{default:f(()=>e[3]||(e[3]=[R("Write review")])),_:1,__:[3]})]),_:1},8,["ratable","ratable_type"])])):U("",!0)]),s("div",ws,[s("div",xs,[s("div",$s,d(t(g)(a.ratable.total_average_rating,1)),1),(b(),O(t(c),{"star-size":37,"show-rating":!1,rating:m.value,"read-only":"","active-color":"#009689",padding:3,class:"md:w-1/3 w-full",key:`rating-card-${a.ratable.id}`,increment:.01},null,8,["rating"]))]),s("div",Cs," ("+d(a.ratable.reviews_count)+" total reviews) ",1),s("div",ks,[e[18]||(e[18]=s("div",{class:"text-xl mb-3 font-medium text-secondary"},"Insights",-1)),s("div",Rs,[s("div",zs,[e[11]||(e[11]=s("div",{class:"font-medium mb-2"},"Ratings By Category",-1)),s("div",Ss,[s("div",hs,[s("div",null,d(t(g)(a.ratings.overall,1)),1),e[5]||(e[5]=s("div",null,"Overall",-1))]),s("div",qs,[s("div",null,d(t(g)(a.ratings.customer_service,1)),1),e[6]||(e[6]=s("div",null,"Customer Service",-1))]),s("div",Ps,[s("div",null,d(t(g)(a.ratings.quality,1)),1),e[7]||(e[7]=s("div",null,"Quality",-1))]),s("div",Bs,[s("div",null,d(t(g)(a.ratings.price,1)),1),e[8]||(e[8]=s("div",null,"Price",-1))]),s("div",Us,[s("div",null,d(t(g)(a.ratings.communication,1)),1),e[9]||(e[9]=s("div",null,"Communication",-1))]),s("div",Os,[s("div",null,d(t(g)(a.ratings.speed,1)),1),e[10]||(e[10]=s("div",null,"Speed",-1))])])]),s("div",Ns,[e[17]||(e[17]=s("div",{class:"font-medium mb-2"},"Ratings Distribution",-1)),s("div",Vs,[s("div",js,[e[12]||(e[12]=s("div",{class:"w-[50px]"},"5 stars",-1)),s("div",Ds,[s("div",{class:"bg-gray-400 h-2",style:w({width:`${a.distributions[5]}%`})},null,4)]),s("div",null,d(a.distributions[5])+"%",1)]),s("div",Es,[e[13]||(e[13]=s("div",{class:"w-[50px]"},"4 stars",-1)),s("div",Is,[s("div",{class:"bg-gray-400 h-2",style:w({width:`${a.distributions[4]}%`})},null,4)]),s("div",null,d(a.distributions[4])+"%",1)]),s("div",Ms,[e[14]||(e[14]=s("div",{class:"w-[50px]"},"3 stars",-1)),s("div",Qs,[s("div",{class:"bg-gray-400 h-2",style:w({width:`${a.distributions[3]}%`})},null,4)]),s("div",null,d(a.distributions[3])+"%",1)]),s("div",Ws,[e[15]||(e[15]=s("div",{class:"w-[50px]"},"2 stars",-1)),s("div",As,[s("div",{class:"bg-gray-400 h-2",style:w({width:`${a.distributions[2]}%`})},null,4)]),s("div",null,d(a.distributions[2])+"%",1)]),s("div",Fs,[e[16]||(e[16]=s("div",{class:"w-[50px]"},"1 star",-1)),s("div",Js,[s("div",{class:"bg-gray-400 h-2",style:w({width:`${a.distributions[1]}%`})},null,4)]),s("div",null,d(a.distributions[1])+"%",1)])])])])])]),e[19]||(e[19]=s("div",{class:"w-full flex flex-col gap-3 mt-3"},null,-1))],2)}}}),Gs={class:"p-4"},te=z({__name:"ReviewsDetails",props:{ratable:{},ratings:{},distributions:{},reviews:{},ratable_type:{}},setup(_){return(u,v)=>(b(),x("div",null,[r(Ts,{ratable:u.ratable,ratings:u.ratings,distributions:u.distributions,ratable_type:u.ratable_type},null,8,["ratable","ratings","distributions","ratable_type"]),s("div",Gs,[r(j,{ratable:u.ratable,reviews:u.reviews},null,8,["ratable","reviews"])])]))}});export{te as _};
