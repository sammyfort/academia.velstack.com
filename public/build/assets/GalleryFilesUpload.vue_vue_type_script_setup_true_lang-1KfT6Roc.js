import{_ as N,L as O}from"./Input.vue_vue_type_script_setup_true_lang-CbC4zl6P.js";import{C as P}from"./check-B3-fkeyX.js";import{d as $,c as n,o as i,b as t,k as U,a as c,u,w as E,j as R,e as G,t as m,L as C,M as j,r as F,v as k,f as W,i as y,N as M,F as b,h as w}from"./app-C9ZopDta.js";import{c as T}from"./createLucideIcon-DIBFlSSA.js";import{U as B}from"./upload-CCV0WSpW.js";import{X as p}from"./InputText.vue_vue_type_script_setup_true_lang-E8GVBOck.js";import{P as I}from"./plus-BtE-R8ve.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=T("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),A={class:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},S={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},D={class:"order-1 lg:order-2 space-y-6"},J={class:"order-2 lg:order-1 lg:col-span-2 space-y-6"},K={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},X={class:"flex items-center justify-between"},Pe=$({__name:"FormComponent",props:{form:{},featuredPreview:{},galleryPreviews:{},galleryItems:{default:()=>[]},galleryErrors:{default:()=>[]},submitText:{},processingText:{}},emits:["handleFeaturedImage","removeFeatured","handleGalleryImages","removeGalleryImage","submit"],setup(v,{emit:f}){const g=f;return(r,s)=>(i(),n("div",A,[t("div",S,[t("div",D,[U(r.$slots,"media-section")]),t("div",J,[U(r.$slots,"form-sections"),t("div",K,[t("div",X,[s[1]||(s[1]=t("p",{class:"text-sm text-gray-600"},"Review your information and submit when ready",-1)),c(u(N),{disabled:r.form.processing,onClick:s[0]||(s[0]=L=>g("submit")),class:"px-8 py-3 bg-gradient-to-r from-primary to-primary hover:from-primary hover:to-orange-300 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},{default:E(()=>[r.form.processing?(i(),R(u(O),{key:0,class:"mr-2 h-5 w-5 animate-spin"})):(i(),R(u(P),{key:1,class:"mr-2 h-5 w-5"})),G(" "+m(r.form.processing?r.processingText:r.submitText),1)]),_:1},8,["disabled"])])])])])]))}}),q={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},z={class:"flex items-center space-x-3 mb-4"},H={class:"p-2 bg-primary rounded-lg"},Q={class:"relative"},Y={class:"relative rounded-lg border-2 border-dashed border-gray-300 p-6 transition-all duration-200 hover:border-primary hover:bg-blue-50/50 group"},Z={key:0,class:"text-center"},ee={key:1,class:"relative"},te=["src","alt"],se={class:"absolute bottom-2 left-2 px-2 py-1 bg-black/50 rounded text-white text-xs"},re={key:0,class:"mt-2 text-sm text-red-600 flex items-center space-x-1"},Ee=$({__name:"FeatureFileUpload",props:C({form:{},featuredPreview:{default:null},modelName:{default:"featured"}},{file:{default:null},fileModifiers:{}}),emits:["update:file"],setup(v,{expose:f}){const g=v,r=j(v,"file"),s=F(null);f({resetFeature:()=>{s.value&&s.value.startsWith("blob:")&&URL.revokeObjectURL(s.value),r.value=null,s.value=g.featuredPreview}}),k(()=>g.featuredPreview,d=>{d&&!r.value&&(s.value=d)},{immediate:!0}),k(r,d=>{d&&(s.value&&s.value.startsWith("blob:")&&URL.revokeObjectURL(s.value),s.value=URL.createObjectURL(d))},{immediate:!0});const x=d=>{var o;const e=d.target,l=((o=e.files)==null?void 0:o[0])||null;s.value&&s.value.startsWith("blob:")&&URL.revokeObjectURL(s.value),r.value=l,e.value=""},_=()=>{s.value&&s.value.startsWith("blob:")&&URL.revokeObjectURL(s.value),r.value=null,s.value=g.featuredPreview};return W(()=>()=>{s.value&&s.value.startsWith("blob:")&&URL.revokeObjectURL(s.value)}),(d,e)=>(i(),n("div",q,[t("div",z,[t("div",H,[c(u(V),{class:"h-5 w-5 text-white"})]),e[2]||(e[2]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Featured Image",-1))]),t("div",Q,[t("div",Y,[t("input",{type:"file",accept:"image/*",onChange:x,class:"absolute inset-0 h-full w-full cursor-pointer opacity-0"},null,32),s.value?(i(),n("div",ee,[t("img",{src:s.value,alt:r.value?r.value.name:"Featured image",class:"w-full h-40 rounded-lg object-cover",onError:e[0]||(e[0]=l=>console.log("Image failed to load:",s.value)),onLoad:e[1]||(e[1]=l=>console.log("Image loaded successfully:",s.value))},null,40,te),t("button",{type:"button",onClick:_,class:"absolute top-2 right-2 p-1 bg-red-100 hover:bg-red-200 rounded-full shadow-lg transition-colors duration-200"},[c(u(p),{class:"h-4 w-4 text-red-600"})]),t("div",se,m(r.value?"New":"Current"),1)])):(i(),n("div",Z,[c(u(B),{class:"mx-auto h-12 w-12 text-gray-400 group-hover:text-primary transition-colors duration-200"}),e[3]||(e[3]=t("div",{class:"mt-4"},[t("p",{class:"text-sm font-medium text-gray-900"},"Upload featured image"),t("p",{class:"text-xs text-gray-500 mt-1"},"PNG, JPG up to 10MB")],-1))]))]),d.form.errors[d.modelName]?(i(),n("p",re,[c(u(p),{class:"h-4 w-4"}),t("span",null,m(d.form.errors[d.modelName]),1)])):y("",!0)])]))}}),le={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},oe={class:"flex items-center justify-between mb-4"},ae={class:"flex items-center space-x-3"},ie={class:"p-2 bg-primary rounded-lg"},ne={class:"inline-flex items-center whitespace-nowrap px-3 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded-full"},de={class:"space-y-4"},ue={class:"relative rounded-lg border-2 border-dashed border-gray-300 p-4 transition-all duration-200 hover:border-primary hover:bg-indigo-50/50 group"},ce={class:"text-center"},me={key:0,class:"max-h-96 overflow-y-auto"},ge={class:"grid grid-cols-2 gap-3 pr-2"},pe={key:0,class:"relative group"},ve=["src","alt"],fe=["onClick"],he={class:"absolute bottom-1 left-1 px-1.5 py-0.5 bg-blue-500/80 rounded text-white text-xs"},ye=["src","alt"],be=["onClick"],xe={class:"absolute bottom-1 left-1 px-1.5 py-0.5 bg-green-500/80 rounded text-white text-xs"},_e={key:1,class:"text-center py-8 text-gray-500"},we={class:"text-xs mt-1"},ke={key:2,class:"space-y-1"},$e={key:0,class:"text-sm text-red-600 flex items-center space-x-1"},Le={key:1,class:"text-sm text-red-600 flex items-center space-x-1"},Ge=$({__name:"GalleryFilesUpload",props:C({form:{},galleryItems:{default:()=>[]},galleryErrors:{default:()=>[]}},{files:{default:()=>[]},filesModifiers:{}}),emits:["update:files"],setup(v,{expose:f}){const g=v,r=j(v,"files"),s=F([]);f({resetGallery:()=>{s.value.forEach(e=>{e.startsWith("blob:")&&URL.revokeObjectURL(e)}),r.value=[],s.value=[]}}),k(r,e=>{const l=e.length;for(;s.value.length>l;){const o=s.value.pop();o&&o.startsWith("blob:")&&URL.revokeObjectURL(o)}for(let o=s.value.length;o<e.length;o++)s.value.push(URL.createObjectURL(e[o]))},{deep:!0});const x=e=>{const l=e.target,o=Array.from(l.files||[]);if(o.length>0){const a=[...r.value];o.forEach(h=>{a.push(h)}),r.value=a}l.value=""},_=e=>{const l=s.value[e];l&&l.startsWith("blob:")&&URL.revokeObjectURL(l);const o=[...r.value],a=[...s.value];o.splice(e,1),a.splice(e,1),r.value=o,s.value=a},d=e=>{const l=g.galleryItems[e];l&&l.isOriginal&&(g.form.removed_gallery_urls.includes(l.url)||g.form.removed_gallery_urls.push(l.url))};return M(()=>{s.value.forEach(e=>{e.startsWith("blob:")&&URL.revokeObjectURL(e)})}),(e,l)=>(i(),n("div",le,[t("div",oe,[t("div",ae,[t("div",ie,[c(u(I),{class:"h-5 w-5 text-white"})]),l[0]||(l[0]=t("h3",{class:"text-lg font-semibold text-gray-900"},"Gallery Images",-1))]),t("span",ne,m(e.galleryItems.filter(o=>{var a;return!((a=e.form.removed_gallery_urls)!=null&&a.includes(o.url))}).length+r.value.length)+" images ",1)]),t("div",de,[t("div",ue,[t("input",{type:"file",multiple:"",accept:"image/*",onChange:x,class:"absolute inset-0 h-full w-full cursor-pointer opacity-0"},null,32),t("div",ce,[c(u(I),{class:"mx-auto h-8 w-8 text-gray-400 group-hover:text-primary transition-colors duration-200"}),l[1]||(l[1]=t("p",{class:"text-sm font-medium text-gray-700 mt-2"},"Add more images",-1)),l[2]||(l[2]=t("p",{class:"text-xs text-gray-500"},"Multiple selection supported",-1))])]),e.galleryItems.length||r.value.length?(i(),n("div",me,[t("div",ge,[(i(!0),n(b,null,w(e.galleryItems,(o,a)=>{var h;return i(),n(b,{key:`original-${a}`},[(h=e.form.removed_gallery_urls)!=null&&h.includes(o.url)?y("",!0):(i(),n("div",pe,[t("img",{src:o.url,alt:`Gallery image ${a+1}`,class:"w-full h-24 rounded-lg object-cover border border-gray-200"},null,8,ve),t("button",{type:"button",onClick:Ue=>d(a),class:"absolute top-1 right-1 p-1 bg-red-100 hover:bg-red-200 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200"},[c(u(p),{class:"h-3 w-3 text-red-600"})],8,fe),t("div",he," Existing "+m(a+1),1)]))],64)}),128)),(i(!0),n(b,null,w(s.value,(o,a)=>(i(),n("div",{key:`new-${a}`,class:"relative group"},[t("img",{src:o,alt:`New image ${a+1}`,class:"w-full h-24 rounded-lg object-cover border border-gray-200"},null,8,ye),t("button",{type:"button",onClick:h=>_(a),class:"absolute top-1 right-1 p-1 bg-red-100 hover:bg-red-200 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200"},[c(u(p),{class:"h-3 w-3 text-red-600"})],8,be),t("div",xe," New "+m(a+1),1)]))),128))])])):(i(),n("div",_e,[l[3]||(l[3]=t("p",null,"No images to display",-1)),t("p",we,"Gallery items: "+m(e.galleryItems.length)+", New uploads: "+m(r.value.length),1)])),e.form.errors.gallery_images||e.form.errors.gallery||e.galleryErrors.length?(i(),n("div",ke,[e.form.errors.gallery_images?(i(),n("p",$e,[c(u(p),{class:"h-4 w-4"}),t("span",null,m(e.form.errors.gallery_images),1)])):y("",!0),e.form.errors.gallery?(i(),n("p",Le,[c(u(p),{class:"h-4 w-4"}),t("span",null,m(e.form.errors.gallery),1)])):y("",!0),(i(!0),n(b,null,w(e.galleryErrors,(o,a)=>(i(),n("p",{key:a,class:"text-sm text-red-600 flex items-center space-x-1"},[c(u(p),{class:"h-4 w-4"}),t("span",null,m(o),1)]))),128))])):y("",!0)])]))}});export{Pe as _,Ee as a,Ge as b};
