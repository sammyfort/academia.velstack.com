import{_ as O,a as U,b as B,c as i,d as G,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-B7QIWCtv.js";import{f as J,_ as M}from"./Input.vue_vue_type_script_setup_true_lang-CM7hcv5X.js";import{_ as Q,a as W,b as Y,c as K,d as h}from"./SelectValue.vue_vue_type_script_setup_true_lang-5szAepXk.js";import{_ as C}from"./index-CSjVQ8T_.js";import{g as $,n as Z}from"./helpers-DbA93d0e.js";import{c as b}from"./createLucideIcon-CeE_Hdh8.js";import{X as ee}from"./InputText.vue_vue_type_script_setup_true_lang-kLR70F67.js";import{C as N}from"./clock-D1NL5wjR.js";import{C as te}from"./circle-check-big-waJTZdZ4.js";import{d as ae,r as q,q as T,c as k,o as d,b as o,i as g,j as v,a,e as n,u as t,w as s,t as u,F as se,h as le,n as ne,m as re}from"./app-BY3mG2bU.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=b("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=b("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=b("CreditCardIcon",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=b("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),de={class:"rounded-2xl border border-gray-100 bg-white p-6 shadow-xl mt-4"},ie={class:"mb-6 flex items-center justify-between"},fe={class:"flex items-center gap-2 text-2xl font-bold text-gray-900"},ce={class:"mb-6 space-y-2"},me={class:"flex flex-col sm:flex-row gap-4"},_e={class:"relative flex-1"},ye={class:"overflow-x-auto"},pe={class:"flex items-center gap-1.5"},xe={class:"font-semibold"},ge={class:"flex items-center gap-1"},ve={class:"font-medium"},we={key:0,class:"text-center py-8"},he={key:1,class:"text-center py-8"},ze=ae({__name:"PaymentHistory",props:{promotions:{}},setup(c){const P=c,m=q(""),_=q("all"),D=T(()=>{let r=[...P.promotions];if(m.value){const e=m.value.toLowerCase();r=r.filter(l=>{var w,y,p,x,V,F,L,A,I,z;return((y=(w=l.payment_reference)==null?void 0:w.toLowerCase())==null?void 0:y.includes(e))||((x=(p=l.amount)==null?void 0:p.toString())==null?void 0:x.includes(e))||((F=(V=l.payment_platform)==null?void 0:V.toLowerCase())==null?void 0:F.includes(e))||((A=(L=l.payment_channel)==null?void 0:L.toLowerCase())==null?void 0:A.includes(e))||((z=(I=l.plan.name)==null?void 0:I.toLowerCase())==null?void 0:z.includes(e))})}if(_.value!=="all"){const e=new Date,l=new Date(e.getFullYear(),e.getMonth(),e.getDate());r=r.filter(w=>{const y=new Date(w.created_at);switch(_.value){case"today":return y>=l;case"week":const p=new Date(l);return p.setDate(p.getDate()-7),y>=p;case"month":const x=new Date(l);return x.setMonth(x.getMonth()-1),y>=x;default:return!0}})}return r}),S=()=>{m.value="",_.value="all"},R=T(()=>m.value!==""||_.value!=="all"),X=r=>{switch(r){case"paid":return te;case"pending":return N;case"failed":return ue;default:return N}},H=r=>{switch(r){case"paid":return"text-green-600 bg-green-50 border-green-200";case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"failed":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return(r,e)=>(d(),k("div",de,[o("div",ie,[o("h2",fe,[a(t(j),{class:"h-6 w-6 text-primary"}),e[2]||(e[2]=n(" Promotion History "))]),r.promotions.length?(d(),v(t(C),{key:0,variant:"secondary",class:"text-sm"},{default:s(()=>[n(u(D.value.length)+" of "+u(r.promotions.length)+" promotions ",1)]),_:1})):g("",!0)]),o("div",ce,[o("div",me,[o("div",_e,[a(t(E),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),a(t(J),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),placeholder:"Search reference, amount, platform, or channel...",class:"pl-10 w-100"},null,8,["modelValue"])]),a(t(Q),{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=l=>_.value=l)},{default:s(()=>[a(t(W),{class:"w-full sm:w-40"},{default:s(()=>[a(t(Y),{placeholder:"Filter by date"})]),_:1}),a(t(K),null,{default:s(()=>[a(t(h),{value:"all"},{default:s(()=>e[3]||(e[3]=[n("All Time")])),_:1,__:[3]}),a(t(h),{value:"today"},{default:s(()=>e[4]||(e[4]=[n("Today")])),_:1,__:[4]}),a(t(h),{value:"week"},{default:s(()=>e[5]||(e[5]=[n("Last Week")])),_:1,__:[5]}),a(t(h),{value:"month"},{default:s(()=>e[6]||(e[6]=[n("Last Month")])),_:1,__:[6]})]),_:1})]),_:1},8,["modelValue"]),R.value?(d(),v(t(M),{key:0,variant:"outline",size:"sm",onClick:S,class:"flex items-center gap-1 whitespace-nowrap"},{default:s(()=>[a(t(ee),{class:"h-3 w-3"}),e[7]||(e[7]=n(" Clear Filters "))]),_:1,__:[7]})):g("",!0)])]),o("div",ye,[a(t(O),null,{default:s(()=>[a(t(U),null,{default:s(()=>[a(t(B),null,{default:s(()=>[a(t(i),{class:"text-left"},{default:s(()=>e[8]||(e[8]=[n("Date")])),_:1,__:[8]}),a(t(i),{class:"text-left"},{default:s(()=>e[9]||(e[9]=[n("Plan")])),_:1,__:[9]}),a(t(i),{class:"text-left"},{default:s(()=>e[10]||(e[10]=[n("Start Date")])),_:1,__:[10]}),a(t(i),{class:"text-left"},{default:s(()=>e[11]||(e[11]=[n("End Date")])),_:1,__:[11]}),a(t(i),{class:"text-left"},{default:s(()=>e[12]||(e[12]=[n("Status")])),_:1,__:[12]}),a(t(i),{class:"text-left"},{default:s(()=>e[13]||(e[13]=[n("Amount")])),_:1,__:[13]}),a(t(i),{class:"text-left"},{default:s(()=>e[14]||(e[14]=[n("Payment Status")])),_:1,__:[14]}),a(t(i),{class:"text-left"},{default:s(()=>e[15]||(e[15]=[n("Reference")])),_:1,__:[15]})]),_:1})]),_:1}),a(t(G),null,{default:s(()=>[(d(!0),k(se,null,le(D.value,l=>(d(),v(t(B),{key:l.id},{default:s(()=>[a(t(f),null,{default:s(()=>[o("div",pe,[a(t(oe),{class:"h-4 w-4 text-gray-400"}),n(" "+u(t($)(l.created_at)),1)])]),_:2},1024),a(t(f),{class:"flex flex-col gap-2"},{default:s(()=>[o("span",xe,u(l.plan.name),1),a(t(C),{variant:"outline",class:"text-xs"},{default:s(()=>[o("span",null,u(l.plan.number_of_days)+" days",1)]),_:2},1024)]),_:2},1024),a(t(f),null,{default:s(()=>[n(u(l.payment_status=="paid"?t($)(l.starts_at):""),1)]),_:2},1024),a(t(f),null,{default:s(()=>[n(u(l.payment_status=="paid"?t($)(l.ends_at):""),1)]),_:2},1024),a(t(f),null,{default:s(()=>[l.payment_status==="paid"?(d(),v(t(C),{key:0,variant:l.is_active?"success":"destructive"},{default:s(()=>[n(u(l.is_active?"Active":"Expired"),1)]),_:2},1032,["variant"])):g("",!0)]),_:2},1024),a(t(f),null,{default:s(()=>[o("div",ge,[o("span",ve,"â‚µ"+u(t(Z)(l.amount,2)),1)])]),_:2},1024),a(t(f),null,{default:s(()=>[a(t(C),{class:ne(["inline-flex items-center gap-1 text-xs font-medium capitalize",H(l.payment_status)])},{default:s(()=>[(d(),v(re(X(l.payment_status)),{class:"h-3 w-3"})),n(" "+u(l.payment_status),1)]),_:2},1032,["class"])]),_:2},1024),a(t(f),{class:"font-mono text-gray-500"},{default:s(()=>[n(u(l.payment_reference),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),D.value.length===0&&r.promotions.length>0?(d(),k("div",we,[a(t(E),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e[17]||(e[17]=o("p",{class:"text-gray-500"},"No promotion match your filters",-1)),a(t(M),{variant:"outline",size:"sm",onClick:S,class:"mt-2"},{default:s(()=>e[16]||(e[16]=[n(" Clear Filters ")])),_:1,__:[16]})])):g("",!0),r.promotions.length===0?(d(),k("div",he,[a(t(j),{class:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e[18]||(e[18]=o("p",{class:"text-gray-500"},"No promotion found",-1))])):g("",!0)]))}});var Ce=(c=>(c.SERVICE="service",c.SIGNBOARD="signboard",c.JOB="job",c))(Ce||{});export{oe as C,Ce as P,ze as _,ue as a};
