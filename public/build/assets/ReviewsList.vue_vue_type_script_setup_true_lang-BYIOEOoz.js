import{u as K,P as V,r as T,c as F,f as W,_ as h}from"./Input.vue_vue_type_script_setup_true_lang-DIrI_26b.js";import{d as $,j as y,o as _,w as l,k as O,u as e,z as D,x as N,r as P,f as E,c as U,a as n,b as s,l as M,e as b,q as G,y as H,n as J,i as j,t as c,K as q,F as X,h as Y}from"./app-Aen1ciyG.js";import{S as v}from"./VueStarRating.common-DlRI_-z-.js";import{a as Q,t as A,n as x}from"./helpers-B0bnWFPX.js";import{i as Z,e as ss,f as es,g as ts,a as is,b as as,c as rs}from"./Layout.vue_vue_type_script_setup_true_lang-CC7cl54Q.js";import{d as ns,_ as L}from"./InputText.vue_vue_type_script_setup_true_lang-BRgoG5LL.js";import{r as I}from"./api-fN9ePhBf.js";import{_ as os,a as ls,b as ds,c as us,d as ms,e as cs}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-ChQIhL0R.js";import{a as fs,b as vs,_ as gs}from"./CardHeader.vue_vue_type_script_setup_true_lang-BseHVndZ.js";import{_ as ps}from"./CardTitle.vue_vue_type_script_setup_true_lang-CpbWa6Jp.js";const _s=$({__name:"PopoverClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(p){const f=p;K();const m=Z();return(i,r)=>(_(),y(e(V),{type:i.as==="button"?"button":void 0,as:i.as,"as-child":f.asChild,onClick:r[0]||(r[0]=a=>e(m).onOpenChange(!1))},{default:l(()=>[O(i.$slots,"default")]),_:3},8,["type","as","as-child"]))}}),bs=$({__name:"DialogClose",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]}},setup(p){const f=p;return(m,i)=>(_(),y(e(ns),D({"data-slot":"dialog-close"},f),{default:l(()=>[O(m.$slots,"default")]),_:3},16))}}),Ee=$({__name:"Badge",props:{asChild:{type:Boolean},as:{type:[String,Object,Function]},variant:{},class:{}},setup(p){const f=p,m=T(f,"class");return(i,r)=>(_(),y(e(V),D({"data-slot":"badge",class:e(F)(e(ws)({variant:i.variant}),f.class)},e(m)),{default:l(()=>[O(i.$slots,"default")]),_:3},16,["class"]))}}),ws=W("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"text-gray-600 bg-gray-50 border-gray-200",secondary:"text-secondary bg-blue-50 border-blue-200",success:"text-green-600 bg-green-50 border-green-200",destructive:"text-red-600 bg-red-50 border-red-200",primary:"text-primary bg-orange-50 border-orange-200",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),xs={class:"flex flex-wrap items-center border-b py-1.5 text-sm font-medium text-fade"},ys={class:"w-1/2 flex items-center"},$s={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},ks={class:"w-1/2 flex items-center"},hs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Cs={class:"w-1/2 flex items-center"},zs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ss={class:"w-1/2 flex items-center"},Rs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},qs={class:"w-1/2 flex items-center"},Us={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Os={class:"w-1/2 flex items-center"},Ps={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Bs={class:"pt-3 flex justify-between"},js=$({__name:"SignboardRating",props:{signboard:{},carouselPlugin:{}},emits:["popoverOpen","rated"],setup(p,{emit:f}){const m=p,i=N({overall:0,customer_service:0,quality:0,price:0,communication:0,speed:0,review:""}),r=P(null),a=P(null),w=f,k=async()=>{await I(i,m.signboard.id,d=>{var t,o;A(d.props.message),(o=(t=a==null?void 0:a.value)==null?void 0:t.$el)==null||o.click(),w("rated",d.props.data.signboard)},null,d=>{for(const t in d){Q(d[t]);break}})};E(()=>{var d,t,o,C,z,S,R;if(r.value=(d=m.signboard.reviews)!=null&&d.length?m.signboard.reviews[0]:null,r.value){const g=r.value.ratings;i.review=r.value.review,i.overall=((t=g.find(u=>u.key==="overall"))==null?void 0:t.value)??0,i.customer_service=((o=g.find(u=>u.key==="customer_service"))==null?void 0:o.value)??0,i.quality=((C=g.find(u=>u.key==="quality"))==null?void 0:C.value)??0,i.price=((z=g.find(u=>u.key==="price"))==null?void 0:z.value)??0,i.communication=((S=g.find(u=>u.key==="communication"))==null?void 0:S.value)??0,i.speed=((R=g.find(u=>u.key==="speed"))==null?void 0:R.value)??0}});const B=d=>{w("popoverOpen",d)};return(d,t)=>(_(),U("div",null,[n(e(ss),{"onUpdate:open":B},{default:l(()=>[n(e(es),null,{default:l(()=>[O(d.$slots,"default")]),_:3}),n(e(ts),{class:"w-[20rem]"},{default:l(()=>[s("form",{onSubmit:M(k,["prevent"]),class:"grid grid-cols-1"},[s("div",xs,[t[6]||(t[6]=s("div",{class:"w-1/2"},"Overall",-1)),s("div",ys,[n(e(v),{rating:e(i).overall,"onUpdate:rating":t[0]||(t[0]=o=>e(i).overall=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",$s,[t[7]||(t[7]=s("div",{class:"w-1/2"},"Customer Service",-1)),s("div",ks,[n(e(v),{rating:e(i).customer_service,"onUpdate:rating":t[1]||(t[1]=o=>e(i).customer_service=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",hs,[t[8]||(t[8]=s("div",{class:"w-1/2"},"Quality",-1)),s("div",Cs,[n(e(v),{rating:e(i).quality,"onUpdate:rating":t[2]||(t[2]=o=>e(i).quality=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",zs,[t[9]||(t[9]=s("div",{class:"w-1/2"},"Price",-1)),s("div",Ss,[n(e(v),{rating:e(i).price,"onUpdate:rating":t[3]||(t[3]=o=>e(i).price=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Rs,[t[10]||(t[10]=s("div",{class:"w-1/2"},"Communication",-1)),s("div",qs,[n(e(v),{rating:e(i).communication,"onUpdate:rating":t[4]||(t[4]=o=>e(i).communication=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Us,[t[11]||(t[11]=s("div",{class:"w-1/2"},"Speed",-1)),s("div",Os,[n(e(v),{rating:e(i).speed,"onUpdate:rating":t[5]||(t[5]=o=>e(i).speed=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Ps,[n(L,{textarea:"","container-class":"w-full",label:"Review",required:"",form:e(i),model:"review"},null,8,["form"])]),s("div",Bs,[n(e(_s),{"as-child":"",ref_key:"closeBtn",ref:a},{default:l(()=>[n(e(h),{type:"button",size:"sm",variant:"secondary"},{default:l(()=>t[12]||(t[12]=[b("Close")])),_:1,__:[12]})]),_:1},512),n(e(h),{type:"submit",size:"sm",processing:e(i).processing},{default:l(()=>t[13]||(t[13]=[b("Submit Review")])),_:1,__:[13]},8,["processing"])])],32)]),_:1})]),_:3})]))}}),Vs={class:"flex flex-wrap items-center border-b py-1.5 text-sm font-medium text-fade"},Fs={class:"w-1/2 flex items-center"},Ds={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ns={class:"w-1/2 flex items-center"},Es={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ms={class:"w-1/2 flex items-center"},Qs={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},As={class:"w-1/2 flex items-center"},Ls={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Is={class:"w-1/2 flex items-center"},Ks={class:"flex items-center border-b py-1.5 text-sm font-medium text-fade"},Ts={class:"w-1/2 flex items-center"},Ws={class:"flex items-center py-1.5 text-sm font-medium text-fade"},Gs={class:"flex gap-3 justify-between w-full"},Hs=$({__name:"SignboardRatingModal",props:{signboard:{},carouselPlugin:{}},emits:["popoverOpen","rated"],setup(p,{emit:f}){const m=p,i=N({overall:0,customer_service:0,quality:0,price:0,communication:0,speed:0,review:""}),r=P(null),a=P(null),w=f,k=async()=>{await I(i,m.signboard.id,d=>{var t,o;A(d.props.message),(o=(t=a==null?void 0:a.value)==null?void 0:t.$el)==null||o.click(),w("rated",d.props.data.signboard)},null,d=>{for(const t in d){Q(d[t]);break}})};E(()=>{var d,t,o,C,z,S,R;if(r.value=(d=m.signboard.reviews)!=null&&d.length?m.signboard.reviews[0]:null,r.value){const g=r.value.ratings;i.review=r.value.review,i.overall=((t=g.find(u=>u.key==="overall"))==null?void 0:t.value)??0,i.customer_service=((o=g.find(u=>u.key==="customer_service"))==null?void 0:o.value)??0,i.quality=((C=g.find(u=>u.key==="quality"))==null?void 0:C.value)??0,i.price=((z=g.find(u=>u.key==="price"))==null?void 0:z.value)??0,i.communication=((S=g.find(u=>u.key==="communication"))==null?void 0:S.value)??0,i.speed=((R=g.find(u=>u.key==="speed"))==null?void 0:R.value)??0}});const B=d=>{w("popoverOpen",d)};return(d,t)=>(_(),y(e(cs),{"onUpdate:open":B},{default:l(()=>[n(e(os),null,{default:l(()=>[O(d.$slots,"default")]),_:3}),n(e(ls),null,{default:l(()=>[n(e(ds),null,{default:l(()=>[n(e(us),null,{default:l(()=>t[6]||(t[6]=[b("Write Review")])),_:1,__:[6]})]),_:1}),s("div",null,[s("form",{onSubmit:M(k,["prevent"]),class:"grid grid-cols-1",id:"form"},[s("div",Vs,[t[7]||(t[7]=s("div",{class:"w-1/2"},"Overall",-1)),s("div",Fs,[n(e(v),{rating:e(i).overall,"onUpdate:rating":t[0]||(t[0]=o=>e(i).overall=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Ds,[t[8]||(t[8]=s("div",{class:"w-1/2"},"Customer Service",-1)),s("div",Ns,[n(e(v),{rating:e(i).customer_service,"onUpdate:rating":t[1]||(t[1]=o=>e(i).customer_service=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Es,[t[9]||(t[9]=s("div",{class:"w-1/2"},"Quality",-1)),s("div",Ms,[n(e(v),{rating:e(i).quality,"onUpdate:rating":t[2]||(t[2]=o=>e(i).quality=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Qs,[t[10]||(t[10]=s("div",{class:"w-1/2"},"Price",-1)),s("div",As,[n(e(v),{rating:e(i).price,"onUpdate:rating":t[3]||(t[3]=o=>e(i).price=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Ls,[t[11]||(t[11]=s("div",{class:"w-1/2"},"Communication",-1)),s("div",Is,[n(e(v),{rating:e(i).communication,"onUpdate:rating":t[4]||(t[4]=o=>e(i).communication=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Ks,[t[12]||(t[12]=s("div",{class:"w-1/2"},"Speed",-1)),s("div",Ts,[n(e(v),{rating:e(i).speed,"onUpdate:rating":t[5]||(t[5]=o=>e(i).speed=o),class:"ms-auto","show-rating":!1,"active-color":"#009689","star-size":17,"rounded-corners":!0,animate:!0,padding:3},null,8,["rating"])])]),s("div",Ws,[n(L,{textarea:"","container-class":"w-full",label:"Review",required:"",form:e(i),model:"review"},null,8,["form"])])],32)]),n(e(ms),{class:"flex"},{default:l(()=>[s("div",Gs,[n(e(bs),{"as-child":"",ref_key:"closeBtn",ref:a},{default:l(()=>[n(e(h),{type:"button",size:"sm",variant:"destructive"},{default:l(()=>t[13]||(t[13]=[b("Close")])),_:1,__:[13]})]),_:1},512),n(e(h),{type:"submit",form:"form",size:"sm",processing:e(i).processing},{default:l(()=>t[14]||(t[14]=[b("Submit Review")])),_:1,__:[14]},8,["processing"])])]),_:1})]),_:1})]),_:3}))}}),Js={class:"flex items-center"},Xs={key:0,class:"ms-auto md:block hidden"},Ys={key:1,class:"ms-auto md:hidden"},Zs={class:"my-5 flex flex-col items-start gap-4"},se={class:"flex items-start gap-2 lg:gap-4"},ee={class:"text-5xl"},te={class:""},ie={class:"w-full"},ae={class:"flex flex-wrap"},re={class:"w-full md:w-1/2"},ne={class:"flex flex-col gap-1 text-sm"},oe={class:"flex gap-3"},le={class:"flex gap-3"},de={class:"flex gap-3"},ue={class:"flex gap-3"},me={class:"flex gap-3"},ce={class:"flex gap-3"},fe={class:"w-full md:w-1/2 mt-7 md:mt-0"},ve={class:"flex flex-col gap-1 text-sm"},ge={class:"flex items-center gap-4"},pe={class:"flex bg-gray-200 w-[150px]"},_e={class:"flex items-center gap-4"},be={class:"flex bg-gray-200 w-[150px]"},we={class:"flex items-center gap-4"},xe={class:"flex bg-gray-200 w-[150px]"},ye={class:"flex items-center gap-4"},$e={class:"flex bg-gray-200 w-[150px]"},ke={class:"flex items-center gap-4"},he={class:"flex bg-gray-200 w-[150px]"},Me=$({__name:"ReviewsDetails",props:{signboard:{},ratings:{},distributions:{},class:{}},setup(p){const f=G(),m=H(()=>f.props.auth.user),i=p;return(r,a)=>{var w,k;return _(),U("div",{class:J(e(F)("p-4 border-t text-fade",i.class))},[s("div",Js,[a[2]||(a[2]=s("div",{class:"font-medium text-lg"},"Reviews",-1)),((w=m.value)==null?void 0:w.id)!==r.signboard.business.user_id?(_(),U("div",Xs,[n(js,{signboard:r.signboard},{default:l(()=>[n(e(h),{size:"sm"},{default:l(()=>a[0]||(a[0]=[b("Add Review")])),_:1,__:[0]})]),_:1},8,["signboard"])])):j("",!0),((k=m.value)==null?void 0:k.id)!==r.signboard.business.user_id?(_(),U("div",Ys,[n(Hs,{signboard:r.signboard},{default:l(()=>[n(e(h),{size:"sm"},{default:l(()=>a[1]||(a[1]=[b("Add Review")])),_:1,__:[1]})]),_:1},8,["signboard"])])):j("",!0)]),s("div",Zs,[s("div",se,[s("div",ee,c(e(x)(r.signboard.total_average_rating,1)),1),(_(),y(e(v),{"star-size":37,"show-rating":!1,rating:r.signboard.total_average_rating,"read-only":"","active-color":"#009689",padding:3,class:"md:w-1/3 w-full",key:`rating-card-${r.signboard.id}`,increment:.01},null,8,["rating"]))]),s("div",te," ("+c(r.signboard.reviews_count)+" total reviews) ",1),s("div",ie,[a[16]||(a[16]=s("div",{class:"text-xl mb-3 font-medium text-secondary"},"Insights",-1)),s("div",ae,[s("div",re,[a[9]||(a[9]=s("div",{class:"font-medium mb-2"},"Ratings By Category",-1)),s("div",ne,[s("div",oe,[s("div",null,c(e(x)(r.ratings.overall,1)),1),a[3]||(a[3]=s("div",null,"Overall",-1))]),s("div",le,[s("div",null,c(e(x)(r.ratings.customer_service,1)),1),a[4]||(a[4]=s("div",null,"Customer Service",-1))]),s("div",de,[s("div",null,c(e(x)(r.ratings.quality,1)),1),a[5]||(a[5]=s("div",null,"Quality",-1))]),s("div",ue,[s("div",null,c(e(x)(r.ratings.price,1)),1),a[6]||(a[6]=s("div",null,"Price",-1))]),s("div",me,[s("div",null,c(e(x)(r.ratings.communication,1)),1),a[7]||(a[7]=s("div",null,"Communication",-1))]),s("div",ce,[s("div",null,c(e(x)(r.ratings.speed,1)),1),a[8]||(a[8]=s("div",null,"Speed",-1))])])]),s("div",fe,[a[15]||(a[15]=s("div",{class:"font-medium mb-2"},"Ratings Distribution",-1)),s("div",ve,[s("div",ge,[a[10]||(a[10]=s("div",{class:"w-[50px]"},"5 stars",-1)),s("div",pe,[s("div",{class:"bg-gray-400 h-2",style:q({width:`${r.distributions[5]}%`})},null,4)]),s("div",null,c(r.distributions[5])+"%",1)]),s("div",_e,[a[11]||(a[11]=s("div",{class:"w-[50px]"},"4 stars",-1)),s("div",be,[s("div",{class:"bg-gray-400 h-2",style:q({width:`${r.distributions[4]}%`})},null,4)]),s("div",null,c(r.distributions[4])+"%",1)]),s("div",we,[a[12]||(a[12]=s("div",{class:"w-[50px]"},"3 stars",-1)),s("div",xe,[s("div",{class:"bg-gray-400 h-2",style:q({width:`${r.distributions[3]}%`})},null,4)]),s("div",null,c(r.distributions[3])+"%",1)]),s("div",ye,[a[13]||(a[13]=s("div",{class:"w-[50px]"},"2 stars",-1)),s("div",$e,[s("div",{class:"bg-gray-400 h-2",style:q({width:`${r.distributions[2]}%`})},null,4)]),s("div",null,c(r.distributions[2])+"%",1)]),s("div",ke,[a[14]||(a[14]=s("div",{class:"w-[50px]"},"1 star",-1)),s("div",he,[s("div",{class:"bg-gray-400 h-2",style:q({width:`${r.distributions[1]}%`})},null,4)]),s("div",null,c(r.distributions[1])+"%",1)])])])])])]),a[17]||(a[17]=s("div",{class:"w-full flex flex-col gap-3 mt-3"},null,-1))],2)}}}),Ce={class:"w-full text-sm"},ze={class:"text-fade mt-3 flex w-full items-center"},Se={class:"text-xs"},Re={class:"ms-auto"},Qe=$({__name:"ReviewsList",props:{signboard:{},reviews:{}},setup(p){return(f,m)=>(_(!0),U(X,null,Y(f.reviews,i=>(_(),y(e(gs),{key:`review-${i.id}`,class:"gap-4 shadow-none"},{default:l(()=>[n(e(fs),{class:"flex items-center"},{default:l(()=>[n(e(ps),{class:"text-fade"},{default:l(()=>[b(c(i.user.fullname),1)]),_:2},1024),n(e(is),{class:"h-12 w-12 lg:ms-auto"},{default:l(()=>{var r;return[n(e(as),{src:((r=i.user.avatar)==null?void 0:r.original_url)??""},null,8,["src"]),n(e(rs),null,{default:l(()=>[b(c(i.user.initials),1)]),_:2},1024)]}),_:2},1024)]),_:2},1024),n(e(vs),null,{default:l(()=>[s("div",Ce,c(i.review),1),s("div",ze,[s("div",Se,c(i.created_at_str),1),s("div",Re,[(_(),y(e(v),{"star-size":15,"show-rating":!1,rating:i.average_rating,"read-only":"","active-color":"#009689",padding:3,class:"w-full md:w-1/3",key:`rating-card-${f.signboard.id}`,increment:.01},null,8,["rating"]))])])]),_:2},1024)]),_:2},1024))),128))}});export{Ee as _,Me as a,Qe as b};
