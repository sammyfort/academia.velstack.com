var O=Object.defineProperty;var P=(t,e,a)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var f=(t,e,a)=>P(t,typeof e!="symbol"?e+"":e,a);import{r as c,W as U,d as V,f as C,c as _,o as g,F as A,a as i,i as b,j as Q,u as l,w as m,b as S,C as T,D as j}from"./app-RZYziCOX.js";import{d as B,e as E}from"./api-BKAo8y4X.js";import{_ as y,a as w,b as M,c as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-Bzqn9bpe.js";import{L as F,_ as L}from"./Input.vue_vue_type_script_setup_true_lang-COHS9RD5.js";import{c as q}from"./createLucideIcon-Cv9DwHDB.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=q("ArrowUpIcon",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var u,N=(u=class{constructor(e){f(this,"_path");f(this,"_params",{});this._path=e}static defineAliases(e){u.aliases=e}filter(e,a){return this.createOrUpdateParams(`filter[${e}]`,[a]),this}sort(...e){return this.createOrUpdateParams("sort",e),this}include(...e){return this.createOrUpdateParams("include",e),this}append(...e){return this.createOrUpdateParams("append",e),this}param(e,...a){return this.createOrUpdateParams(e,a),this}fields(e){return Object.entries(e).forEach(([a,r])=>{this.createOrUpdateParams(`fields[${a}]`,r)}),this}page(e){return this._params.page=[e.toString()],this}when(e,a){return e&&a(this),this}forgetValue(e,a){return this._params[e]||(e=this.parseKeyToAlias(e)),this._params[e]=(this._params[e]||[]).filter(r=>r!==a),this}forget(e){return this._params[e]||(e=this.parseKeyToAlias(e)),delete this._params[e],this}forgets(...e){return e.forEach(a=>{this.forget(a)}),this}createOrUpdateParams(e,a){return e=this.parseKeyToAlias(e),this._params[e]=[...this._params[e]||[],...a],this}parseKeyToAlias(e){return Object.entries(u.aliases).forEach(([a,r])=>{e.includes(a)&&(e=e.replace(a,r))}),e}tap(e){return e(this),this}scopes(...e){return e.forEach(a=>a(this)),this}buildParams(e){const a=this._params[e];return a?`${e}=${a.join(",")}`:""}buildAsArray(e){let a=[];return e!=null&&e.includePath&&a.push(this._path),Object.keys(this._params).map(r=>{var n;(n=e==null?void 0:e.excludes)!=null&&n.includes(r)||!(e!=null&&e.includePagination)&&(r==="page"||r==="limit")||a.push(this.buildParams(r))}),a}build(){const e=Object.keys(this._params).map(r=>this.buildParams(r));let a=this.shouldHaveQmark()?"?":"";return`${this._path}${a}${this.connectQueryString(...e)}`}shouldHaveQmark(){return Object.keys(this._params).length>0}connectQueryString(...e){return e.filter(a=>a.length>0).join("&")}},f(u,"aliases",{}),u),R=N,I=(t="/")=>new R(t);function X(t){const e=c(null);return{filteredQuery:e,runFilter:()=>{const r=I();t.buildQuery(r);const n=r.build().replace("/","");e.value=n==="/"?null:n,U.visit(route(t.routeName)+decodeURIComponent(e.value||""),{preserveScroll:!0,only:t.preserveKeys,onStart:()=>t.form.processing=!0,onFinish:()=>t.form.processing=!1})}}}const z={key:0,class:"flex w-100 text-sm items-center gap-2 text-fade"},Z=V({__name:"CountryRegionSelector",props:{form:{},countryModel:{},regionModel:{},class:{}},setup(t){const e=t,a=c([]),r=c([]),n=c(null),p=c(!1),h=c(!1);async function v(s){r.value=[],e.form[e.regionModel]=null,h.value=!0,r.value=(await E(s)).regions,h.value=!1}return C(async()=>{p.value=!0,a.value=(await B()).countries,p.value=!1,e.countryModel&&e.regionModel&&e.form[e.countryModel]&&(e.form[e.countryModel]&&(n.value=e.form[e.regionModel]),await v(e.form[e.countryModel])),e.form[e.regionModel]=n.value}),(s,d)=>(g(),_(A,null,[i(l(y),{modelValue:s.form[s.countryModel],"onUpdate:modelValue":[d[0]||(d[0]=o=>s.form[s.countryModel]=o),v],disabled:p.value},{default:m(()=>[i(l(w),{class:"col-span-2 w-full md:col-span-1 lg:col-span-2"},{default:m(()=>[i(l(M),{placeholder:h.value?"Loading countries...":"Select country"},null,8,["placeholder"])]),_:1}),i(l($),{options:a.value.map(o=>({label:o.name,value:o.id})),slice:"all"},null,8,["options"])]),_:1},8,["modelValue","disabled"]),h.value?(g(),_("div",z,[d[2]||(d[2]=S("span",null,"Loading regions ...",-1)),i(l(F),{size:12,class:"animate-spin"})])):b("",!0),s.regionModel&&r.value.length?(g(),Q(l(y),{key:1,modelValue:s.form[s.regionModel],"onUpdate:modelValue":d[1]||(d[1]=o=>s.form[s.regionModel]=o)},{default:m(()=>[i(l(w),{class:"col-span-2 w-full md:col-span-1 lg:col-span-2"},{default:m(()=>[i(l(M),{placeholder:"Select region"})]),_:1}),i(l($),{options:r.value.map(o=>({label:o.name,value:o.id})),slice:"all"},null,8,["options"])]),_:1},8,["modelValue"])):b("",!0)],64))}}),D={class:"fixed bottom-6 right-6 opacity-100 starting:opacity-0 transition-opacity duration-2000"},k=V({__name:"BackToTop",setup(t){const e=c(!1),a=()=>{e.value=window.scrollY>200},r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return C(()=>{window.addEventListener("scroll",a)}),(n,p)=>(g(),_("div",D,[T(i(l(L),{onClick:r,class:"p-5 rounded-full",size:"icon",variant:"secondary"},{default:m(()=>[i(l(K),{className:"w-5 h-5"})]),_:1},512),[[j,e.value]])]))}});export{Z as _,k as a,X as u};
