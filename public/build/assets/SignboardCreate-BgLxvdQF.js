import{d as y,x as R,r as l,y as w,f as L,D as g,c as U,o as h,a as i,u as n,g as S,w as k,b as j,F as C}from"./app-HbfJ7GXu.js";import{t as F,a as O}from"./helpers-DybXdqGV.js";import{_ as I}from"./Layout.vue_vue_type_script_setup_true_lang-Df__GQ1J.js";import{_ as B}from"./SignboardForm.vue_vue_type_script_setup_true_lang-C9bDe5eV.js";import{_ as E}from"./PageHeader.vue_vue_type_script_setup_true_lang-xY4o4qrd.js";import{B as G}from"./building-2-BQK2EhR4.js";import"./index-D3ZHaOxs.js";import"./Input.vue_vue_type_script_setup_true_lang-C6lBuJ-B.js";import"./createLucideIcon-C4J8KU6M.js";import"./useForwardPropsEmits-CORgFP7H.js";import"./chevron-down-C_KuNtVX.js";import"./DialogPortal-DgK5JFdH.js";import"./x-BMabPpbc.js";import"./InputText.vue_vue_type_script_setup_true_lang-kEV0hhat.js";import"./Label.vue_vue_type_script_setup_true_lang-DAY9zrSP.js";import"./map-pin-C1Dtk0xH.js";import"./InputSelect.vue_vue_type_script_setup_true_lang-CvVi6G6m.js";import"./ImageUpload.vue_vue_type_script_setup_true_lang-Bf47LMhF.js";import"./upload-CC9eVdKs.js";import"./GalleryUpload.vue_vue_type_script_setup_true_lang-BN5YLy7A.js";import"./plus-U8z3iTuc.js";import"./check-CzLOjmiZ.js";const N={class:"w-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},te=y({__name:"SignboardCreate",props:{business:{},categories:{},regions:{},businesses:{}},setup(c){const u=c,r=R({business_id:"",region_id:"",categories:[],town:"",street:"",landmark:"",blk_number:"",gps:"",featured_image:null,gallery_images:[]}),m=l(!1),a=l(null),o=l([]),p=w(()=>Object.keys(r.errors).filter(e=>e.startsWith("gallery_images.")).map(e=>r.errors[e]));L(()=>{u.business&&(r.business_id=String(u.business),m.value=!0)});const d=()=>{r.post(route("my-signboards.store"),{onSuccess:e=>{e.props.success?F(e.props.message):O(e.props.message),r.reset(),a.value=null,o.value=[]}})},f=e=>{var t;const s=((t=e.target.files)==null?void 0:t[0])||null;r.featured_image=s,a.value=s?URL.createObjectURL(s):null},b=()=>{r.featured_image=null,a.value&&URL.revokeObjectURL(a.value),a.value=null},v=e=>{(e.target.files?Array.from(e.target.files):[]).forEach(t=>{r.gallery_images.push(t),o.value.push(URL.createObjectURL(t))}),e.target.value=""},_=e=>{const s=o.value.splice(e,1)[0];r.gallery_images.splice(e,1),URL.revokeObjectURL(s)};return g(a,(e,s)=>s&&URL.revokeObjectURL(s)),g(o,(e,s)=>s.forEach(t=>URL.revokeObjectURL(t))),(e,s)=>(h(),U(C,null,[i(n(S),{title:"Create Signboard"}),i(I,null,{default:k(()=>[j("div",N,[i(E,{title:"Add New Signboard",subtitle:"Create a new signboard listing for your business",icon:n(G)},null,8,["icon"]),i(B,{form:n(r),categories:e.categories,regions:e.regions,businesses:e.businesses,"business-field-disabled":m.value,"featured-preview":a.value,"gallery-previews":o.value,"gallery-errors":p.value,"submit-text":"Create Signboard","processing-text":"Creating Signboard...",onHandleFeaturedImage:f,onRemoveFeatured:b,onHandleGalleryImages:v,onRemoveGalleryImage:_,onSubmit:d},null,8,["form","categories","regions","businesses","business-field-disabled","featured-preview","gallery-previews","gallery-errors"])])]),_:1})],64))}});export{te as default};
