import{d as v,r as f,x,f as h,q as p,c as U,o as g,a as t,u as r,g as P,w as d,b as n,j as q,i as $,F as k}from"./app-C08sUrqi.js";import{t as S,a as N}from"./helpers-DiqNEN_e.js";import{B,_ as V}from"./Layout.vue_vue_type_script_setup_true_lang-BDquMtOD.js";import{_ as E}from"./PageHeader.vue_vue_type_script_setup_true_lang-W5ID35mt.js";import{_ as R,a as C}from"./FeatureFileUpload.vue_vue_type_script_setup_true_lang-DU39JlEz.js";import{_ as m}from"./InputSelect.vue_vue_type_script_setup_true_lang-CHR7zGCW.js";import{_ as a}from"./InputText.vue_vue_type_script_setup_true_lang-CRcMAOW1.js";import{_ as I}from"./GalleryFilesUpload.vue_vue_type_script_setup_true_lang-dapSmhlJ.js";import{_ as F}from"./TextEditor.vue_vue_type_script_setup_true_lang-24T5Ow60.js";import{d as M}from"./Input.vue_vue_type_script_setup_true_lang-CwRYwVV6.js";import"./map-pin-DVYHk9Lb.js";import"./createLucideIcon-Cm3d7vJH.js";import"./check-hDbsyISF.js";import"./upload-CSEo7meX.js";import"./plus-5lcqGAuA.js";const j={class:"w-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},D={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={class:"col-span-1 md:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6"},te=v({__name:"ProductEdit",props:{categories:{},regions:{},choices:{},product:{},statuses:{}},setup(_){const l=_,b=f(),y=f(),e=x({name:"",status:"",description:"",short_description:"",price:"",categories:[],is_negotiable:"",first_mobile:"",second_mobile:"",website:"",town:"",region_id:"",featured:null,gallery:[],removed_gallery_urls:[]});h(()=>{console.log(l.product);const o=l.product;e.region_id=o.region_id,e.name=o.name,e.status=o.status,e.categories=(o.categories||[]).map(s=>s.id),e.description=o.description,e.short_description=o.short_description,e.price=o.price,e.is_negotiable=o.is_negotiable?"yes":"no",e.first_mobile=o.first_mobile,e.second_mobile=o.second_mobile,e.town=o.town,e.website=o.website});const u=p(()=>l.product.gallery?Array.from(l.product.gallery).map((s,i)=>({url:s,isOriginal:!0,originalIndex:i})):[]),c=p(()=>Object.keys(e.errors).filter(o=>o.startsWith("gallery.")).map(o=>e.errors[o])),w=()=>{e.put(route("my-products.update",l.product.id),{onSuccess:o=>{o.props.success?S(o.props.message):N(o.props.message)}})};return(o,s)=>(g(),U(k,null,[t(r(P),{title:"Update Product"}),t(V,null,{default:d(()=>[n("div",j,[t(E,{title:"Edit Product",subtitle:"Update Product",icon:r(B)},null,8,["icon"]),t(R,{form:r(e),"featured-preview":l.product.featured,"gallery-items":u.value,"gallery-errors":c.value,"submit-text":"Update Product","processing-text":"Updating Product...",onSubmit:w},{"form-sections":d(()=>[n("div",D,[s[3]||(s[3]=n("h2",{class:"text-lg font-semibold text-gray-900 mb-6"},"Product Information",-1)),n("div",O,[t(m,{label:"Select Region",form:r(e),model:"region_id",options:l.regions,required:"",searchable:""},null,8,["form","options"]),t(a,{form:r(e),label:"Product Name",model:"name",required:""},null,8,["form"]),t(m,{form:r(e),label:"Status",model:"status",options:l.statuses,required:""},null,8,["form","options"]),t(m,{form:r(e),label:"Category",model:"categories",options:l.categories,taggable:"",required:"",searchable:""},null,8,["form","options"]),t(a,{form:r(e),label:"Price",model:"price",type:"number",required:""},null,8,["form"]),t(m,{label:"Is Negotiable?",form:r(e),model:"is_negotiable",options:l.choices,required:""},null,8,["form","options"]),t(a,{form:r(e),label:"First Mobile No",type:"tel",model:"first_mobile",required:""},null,8,["form"]),t(a,{form:r(e),label:"Second Mobile No",type:"tel",model:"second_mobile"},null,8,["form"]),t(a,{form:r(e),label:"Website",model:"website"},null,8,["form"]),t(a,{form:r(e),label:"Town",model:"town",required:""},null,8,["form"]),t(a,{form:r(e),label:"Short Description",model:"short_description",textarea:""},null,8,["form"])])]),n("div",W,[s[4]||(s[4]=n("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Product Description",-1)),t(F,{modelValue:r(e).description,"onUpdate:modelValue":s[0]||(s[0]=i=>r(e).description=i)},null,8,["modelValue"]),r(e).errors.description?(g(),q(M,{key:0,message:r(e).errors.description},null,8,["message"])):$("",!0)])]),"media-section":d(()=>[t(C,{ref_key:"featureUploadRef",ref:y,form:r(e),"featured-preview":l.product.featured,file:r(e).featured,"onUpdate:file":s[1]||(s[1]=i=>r(e).featured=i),"model-name":"featured"},null,8,["form","featured-preview","file"]),t(I,{ref_key:"galleryUploadRef",ref:b,form:r(e),files:r(e).gallery,"onUpdate:files":s[2]||(s[2]=i=>r(e).gallery=i),"gallery-errors":c.value,"gallery-items":u.value},null,8,["form","files","gallery-errors","gallery-items"])]),_:1},8,["form","featured-preview","gallery-items","gallery-errors"])])]),_:1})],64))}});export{te as default};
