import{d as I,a9 as R,r as v,q as D,f as E,I as U,s as V,c as s,o as l,a as y,i as c,u,w as q,e as k,C as F,t as f,b as r,D as K,F as w,h as x,n as _,z as H,l as M}from"./app-BSE14mLX.js";import{f as P,p as A,d as Q}from"./Input.vue_vue_type_script_setup_true_lang-D1XutL9j.js";const G={class:"grid gap-2"},J={class:"text-destructive"},W={key:0},X={class:"flex flex-wrap items-center gap-2"},Y=["onClick"],Z={key:0,class:"text-muted-foreground select-none"},ee={class:"ml-auto"},oe={key:0,class:"absolute z-50 mt-1 w-full max-h-60 bg-popover border border-border rounded-md shadow-md overflow-hidden"},re={class:"p-2 border-b border-border"},te={class:"relative"},se={class:"max-h-48 overflow-y-auto"},le=["onClick"],ne={class:"text-foreground"},ae={class:"flex items-center"},de={key:0,class:"w-4 h-4 bg-primary rounded-full flex items-center justify-center"},ie={key:1,class:"w-4 h-4 border-2 border-border rounded-full group-hover:border-primary transition-colors"},ue={key:0,class:"p-3 text-center"},ce={key:1,class:"p-3 text-center text-muted-foreground"},fe={key:0,class:"text-foreground"},me={key:1,class:"text-muted-foreground"},pe={key:0,class:"absolute z-50 mt-1 w-full max-h-60 bg-popover border border-border rounded-md shadow-md overflow-hidden"},ve={key:0,class:"p-2 border-b border-border"},ge={class:"relative"},he={class:"max-h-48 overflow-y-auto"},be=["onClick"],ye={class:"text-foreground"},ke={class:"flex items-center"},we={key:0,class:"w-4 h-4 bg-primary rounded-full flex items-center justify-center"},xe={key:1,class:"w-4 h-4 border-2 border-border rounded-full group-hover:border-primary transition-colors"},_e={key:0,class:"p-3 text-center text-muted-foreground"},Be=I({__name:"InputSelect",props:{form:{},model:{},label:{},options:{},searchable:{type:Boolean},taggable:{type:Boolean}},setup(S){const e=S,g=R(),L=Math.random().toString(36).substring(2,10),a=v(""),d=v(!1),h=v(),$=v(),p=D(()=>!e.searchable||!a.value?e.options:e.options.filter(t=>t.label.toLowerCase().includes(a.value.toLowerCase()))),N=v([]);function C(t){h.value&&!h.value.contains(t.target)&&(d.value=!1)}E(()=>{document.addEventListener("click",C)}),U(()=>{document.removeEventListener("click",C)}),V(d,t=>{t?t&&e.searchable&&!e.taggable&&setTimeout(()=>{},100):a.value=""}),V(()=>{var t;return(t=e.form)==null?void 0:t[e.model]},t=>{e.taggable&&Array.isArray(t)&&(N.value=t)},{immediate:!0});function z(t){if(!e.form||!e.model)return;const i=e.form[e.model].indexOf(t);i===-1?e.form[e.model].push(t):e.form[e.model].splice(i,1)}function j(){if(!e.form||!e.model)return;const t=a.value.trim();if(!t)return;const o=e.options.some(m=>m.label===t);let i;o?i=e.options.find(m=>m.label===t):(i={label:t,value:t},e.options.push(i)),Array.isArray(e.form[e.model])||(e.form[e.model]=[]),e.form[e.model].includes(i.value)||e.form[e.model].push(i.value),a.value=""}function O(t){!e.form||!e.model||Array.isArray(e.form[e.model])&&(e.form[e.model]=e.form[e.model].filter(o=>o!==t))}function T(t){!e.form||!e.model||(e.form[e.model]=t,d.value=!1)}return(t,o)=>{var i,m;return l(),s("div",G,[y(u(P),{for:u(L)},{default:q(()=>[k(f(e.label)+" ",1),F(r("span",J,"*",512),[[K,e.label&&u(g).hasOwnProperty("required")]])]),_:1},8,["for"]),e.form&&e.model?(l(),s("div",W,[e.taggable?(l(),s("div",{key:0,class:"relative",ref_key:"dropdownRef",ref:h},[r("div",{class:"flex min-h-10 w-full items-center justify-between rounded-md border border-input bg-gray-50 px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer gap-2 flex-wrap",onClick:o[0]||(o[0]=n=>d.value=!d.value)},[r("div",X,[(l(!0),s(w,null,x(e.form[e.model],n=>{var b;return l(),s("span",{key:n,class:"inline-flex items-center gap-1 bg-primary text-primary-foreground px-2 py-1 rounded-md text-sm font-medium shadow-sm hover:bg-primary/90 transition-colors"},[k(f(((b=e.options.find(B=>B.value===n))==null?void 0:b.label)||n)+" ",1),r("button",{onClick:M(B=>O(n),["stop"]),class:"ml-1 hover:bg-primary-foreground/20 rounded-full p-0.5 transition-colors","aria-label":"Remove tag"},o[5]||(o[5]=[r("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,Y)])}),128))]),(i=e.form[e.model])!=null&&i.length?c("",!0):(l(),s("span",Z,"Select or add options... ")),r("div",ee,[(l(),s("svg",{class:_(["w-4 h-4 text-muted-foreground transition-transform duration-200",{"rotate-180":d.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[6]||(o[6]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),d.value?(l(),s("div",oe,[r("div",re,[r("div",te,[o[7]||(o[7]=r("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),y(u(A),{modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=n=>a.value=n),onKeyup:H(j,["enter"]),placeholder:"Search or type to add...",class:"pl-10"},null,8,["modelValue"])])]),r("div",se,[(l(!0),s(w,null,x(p.value,n=>(l(),s("div",{key:n.value,onClick:b=>z(n.value),class:"px-3 py-2 hover:bg-accent cursor-pointer flex items-center justify-between group transition-colors"},[r("span",ne,f(n.label),1),r("div",ae,[Array.isArray(e.form[e.model])&&e.form[e.model].includes(n.value)?(l(),s("div",de,o[8]||(o[8]=[r("svg",{class:"w-2.5 h-2.5 text-primary-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)]))):(l(),s("div",ie))])],8,le))),128)),e.searchable&&p.value.length===0&&a.value.trim()?(l(),s("div",ue,[o[10]||(o[10]=r("div",{class:"text-muted-foreground mb-2"},"No results found",-1)),r("button",{onClick:j,class:"inline-flex items-center gap-2 px-3 py-1.5 bg-primary/10 text-primary rounded-md hover:bg-primary/20 transition-colors text-sm font-medium"},[o[9]||(o[9]=r("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),k(' Add "'+f(a.value.trim())+'" ',1)])])):e.searchable&&p.value.length===0&&!a.value.trim()?(l(),s("div",ce," Start typing to search or add new options ")):c("",!0)])])):c("",!0)],512)):(l(),s("div",{key:1,class:"relative",ref_key:"dropdownRef",ref:h},[r("div",{class:_(["flex h-10 w-full items-center justify-between rounded-md border border-input bg-gray-50 px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",{"opacity-100 cursor-not-allowed":u(g).disabled}]),onClick:o[2]||(o[2]=n=>!u(g).disabled&&(d.value=!d.value))},[e.form[e.model]&&e.options.length?(l(),s("span",fe,f(((m=e.options.find(n=>n.value===e.form[e.model]))==null?void 0:m.label)||e.form[e.model]),1)):(l(),s("span",me,f(u(g).placeholder||"Select an option"),1)),(l(),s("svg",{class:_(["w-4 h-4 text-muted-foreground transition-transform duration-200 ml-2",{"rotate-180":d.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[11]||(o[11]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2),d.value?(l(),s("div",pe,[e.searchable?(l(),s("div",ve,[r("div",ge,[o[12]||(o[12]=r("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),y(u(A),{modelValue:a.value,"onUpdate:modelValue":o[3]||(o[3]=n=>a.value=n),ref_key:"searchInput",ref:$,onClick:o[4]||(o[4]=M(()=>{},["stop"])),placeholder:"Search...",class:"pl-10"},null,8,["modelValue"])])])):c("",!0),r("div",he,[(l(!0),s(w,null,x(p.value,n=>(l(),s("div",{key:n.value,onClick:b=>T(n.value),class:"px-3 py-2 hover:bg-accent cursor-pointer flex items-center justify-between group transition-colors"},[r("span",ye,f(n.label),1),r("div",ke,[e.form[e.model]===n.value?(l(),s("div",we,o[13]||(o[13]=[r("svg",{class:"w-2.5 h-2.5 text-primary-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)]))):(l(),s("div",xe))])],8,be))),128)),e.searchable&&p.value.length===0?(l(),s("div",_e," No results found ")):c("",!0)])])):c("",!0)],512)),y(Q,{message:e.form.errors[e.model]},null,8,["message"])])):c("",!0)])}}});export{Be as _};
